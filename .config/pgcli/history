
# 2020-10-27 11:09:27.534164
+\d

# 2020-10-27 11:09:36.064382
+select * from land;

# 2020-10-27 11:09:39.168783
+\gx

# 2020-10-27 11:09:41.497727
+\x

# 2020-10-27 11:09:44.929107
+select * from land;

# 2020-10-27 11:09:48.294021
+\x

# 2020-10-27 11:09:50.296668
+select * from land;

# 2020-10-27 11:09:58.229287
+\d

# 2020-10-27 11:15:38.877140
+select * from land;

# 2020-10-27 11:26:57.152903
+ls

# 2020-10-29 09:42:00.041615
+\d

# 2020-10-29 09:42:02.966488
+\?

# 2020-10-29 09:42:09.862917
+\db

# 2020-10-29 09:42:15.072769
+\?

# 2020-10-29 09:42:31.993987
+\l

# 2020-10-29 09:42:59.672144
+\c ndl

# 2020-10-29 09:43:01.011076
+l

# 2020-10-29 09:43:02.282353
+\d

# 2020-10-29 09:43:07.592636
+\?

# 2020-10-29 09:43:16.606267
+\dt

# 2020-10-29 09:45:23.859663
+\d

# 2020-10-29 09:45:25.986012
+\l

# 2020-10-29 09:45:30.440968
+\c orgpool

# 2020-10-29 09:47:25.346842
+\l

# 2020-10-29 09:47:41.977097
+\u

# 2020-10-29 09:47:43.562926
+\?

# 2020-10-29 09:47:49.637964
+\du

# 2020-10-29 09:51:53.566875
+\d

# 2020-10-29 10:18:54.786936
+\c test

# 2020-10-29 16:11:48.562458
+\l

# 2020-10-29 16:11:49.473526
+\d

# 2020-10-29 16:12:14.786841
+create type status as enum('active', 'deactive')

# 2020-10-29 16:12:34.339698
+create table person (

# 2020-10-29 16:12:56.985972
+create table person (name varchar(128), st status);

# 2020-10-29 16:13:17.078098
+insert into person (name, st) values ('aaa', 'active')

# 2020-10-29 16:13:21.871127
+select * from person;

# 2020-10-30 18:02:02.236654
+\d

# 2020-10-30 18:02:04.457431
+\l

# 2020-10-30 18:02:09.372666
+\c ndl

# 2020-10-30 18:02:12.020173
+\l

# 2020-10-30 18:02:17.345656
+\d

# 2020-10-30 18:02:31.137816
+\u

# 2020-10-31 09:15:17.662091
+\l

# 2020-10-31 09:15:19.569819
+\d

# 2020-10-31 09:15:35.351944
+\c test

# 2020-10-31 09:15:36.487299
+\l

# 2020-10-31 09:15:37.700422
+\d

# 2020-10-31 09:15:42.921524
+\c ndl

# 2020-10-31 09:15:44.851115
+\d

# 2020-10-31 09:15:48.867434
+\l

# 2020-10-31 09:15:54.360995
+\d

# 2020-10-31 09:16:02.349317
+\d group

# 2020-10-31 09:16:24.727084
+\d organization

# 2020-10-31 09:16:26.583773
+;

# 2020-10-31 09:20:43.158685
+\d

# 2020-10-31 09:20:47.521926
+\d organization

# 2020-10-31 09:21:36.320952
+alter table organization add constraint key_uq UNIQUE (key)

# 2020-10-31 09:21:41.166027
+alter table organization add constraint key_uq UNIQUE (key);

# 2020-10-31 09:21:54.114170
+alter table organization add constraint key_uq UNIQUE ("key");

# 2020-10-31 09:22:10.316545
+\d organization

# 2020-10-31 09:22:31.338474
+\d land

# 2020-10-31 09:24:27.310955
+ALTER TABLE land ADD CONSTRAINT domain_uq UNIQUE (domain);

# 2020-10-31 09:24:31.075273
+\d land

# 2020-10-31 09:27:23.274463
+\d

# 2020-10-31 09:27:26.071524
+\d land

# 2020-11-02 15:59:34.820573
+l

# 2020-11-02 15:59:36.084920
+\l

# 2020-11-02 15:59:37.279682
+\d

# 2020-11-02 15:59:47.285926
+\d organization

# 2020-11-02 16:00:02.310718
+delete table organization;

# 2020-11-02 16:00:27.375002
+drop table organization;

# 2020-11-02 16:00:34.561430
+\d organization;

# 2020-11-02 16:00:37.229355
+drop table organization;

# 2020-11-02 16:01:15.926147
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2020-11-02 16:01:45.293242
+\d organization;

# 2020-11-02 17:10:51.296839
+\d

# 2020-11-02 17:11:00.475125
+select * from organization;

# 2020-11-02 17:54:05.672454
+gws

# 2020-11-03 13:33:59.388385
+\d

# 2020-11-03 13:34:08.073121
+\d actor

# 2020-11-03 13:34:42.328157
+\d film_actor

# 2020-11-03 13:35:07.008249
+select count(1) from film_actor;

# 2020-11-03 13:35:11.704984
+select count(1) from actor;

# 2020-11-03 13:35:28.283548
+select * from actor limit 1;

# 2020-11-03 13:35:41.880804
+select * from film_actor limit 1

# 2020-11-03 13:35:49.821996
+\d film

# 2020-11-03 13:39:00.040556
+select * from film_actor where film_id = 1;

# 2020-11-03 13:40:27.822693
+with aids as (select actor_id from film_actor where film_id = 1) select * from actor where actor_id in aids;

# 2020-11-03 13:41:40.105235
+with aids as (select actor_id from film_actor where film_id = 1) select * from actor where actor_id in aids.actor_id;

# 2020-11-03 13:42:04.012394
+with aids as (select actor_id from film_actor where film_id = 1)select * from actor where actor_id in aids.actor_id;

# 2020-11-03 13:42:13.532439
+with aids as (select actor_id from film_actor where film_id = 1)

# 2020-11-03 13:43:13.011393
+with aids as (select actor_id from film_actor where film_id = 1) select * from actor where actor_id in aids.actor_id;

# 2020-11-03 13:43:40.623868
+select * from actor where actor_id in (select actor_id from film_actor where film_id = 1)

# 2020-11-03 19:50:06.758339
+\d

# 2020-11-03 19:51:50.736228
+\d film

# 2020-11-03 19:54:03.483467
+select * from film where language_id == 4;

# 2020-11-03 19:54:07.006887
+select * from film where language_id = 4;

# 2020-11-03 19:54:14.010512
+select * from film limit 10;

# 2020-11-03 19:54:23.047046
+select * from film limit 1;

# 2020-11-03 19:54:30.479594
+select * from film where language_id = 1;

# 2020-11-03 19:54:43.854881
+explain select * from film where language_id = 1;

# 2020-11-03 19:55:14.051866
+explain select * from film where language_id = 2;

# 2020-11-03 19:55:45.627170
+ select count(1) from film where language_id = 2;

# 2020-11-03 19:55:57.330907
+ select count(1) from film where language_id = 1;

# 2020-11-03 19:56:07.387312
+ select count(1) from film;

# 2020-11-05 09:46:22.550873
+\d

# 2020-11-05 09:46:29.547387
+\d land;

# 2020-11-05 09:47:07.144530
+insert into land (domain, capacity) values ('xxx', 10) returning *;

# 2020-11-05 16:55:55.554800
+\d

# 2020-11-05 16:56:56.400214
+select * from land;

# 2020-11-05 16:58:14.689804
+delete from land where domain = yyy;

# 2020-11-05 16:58:24.555902
+delete from land where domain = 'yyy';

# 2020-11-05 16:58:37.766119
+delete from land where domain = 'xxx';

# 2020-11-08 15:19:15.609529
+notify test_channel;

# 2020-11-08 15:19:37.354420
+listen test_channel;

# 2020-11-08 15:19:59.156425
+notify test_channel, 'hello';

# 2020-11-08 15:20:18.215669
+listen test_channel;

# 2020-11-08 15:20:50.047246
+select pg_notify()

# 2020-11-08 15:20:54.907725
+select pg_notify();

# 2020-11-08 15:21:10.136563
+select pg_notify('test_channel');

# 2020-11-08 15:21:16.513912
+select pg_notify('test_channel', 'hello');

# 2020-11-08 15:21:40.794624
+select pg_notify('test'||'channel', 'he'||'llo');

# 2020-11-08 15:21:58.496948
+select pg_notify('test_channel', 'hello')

# 2020-11-09 15:27:19.133678
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2020-11-09 15:27:51.839169
+\d land

# 2020-11-09 15:27:53.448190
+;

# 2020-11-09 15:27:56.879771
+\d land;

# 2020-11-09 15:28:00.727106
+\d

# 2020-11-09 15:28:03.652098
+\d;

# 2020-11-09 15:28:08.285982
+\d

# 2020-11-09 15:28:11.943604
+\?

# 2020-11-09 15:28:32.802237
+\dt

# 2020-11-09 15:28:49.338877
+\?

# 2020-11-09 15:28:56.068019
+\l

# 2020-11-10 12:19:05.269352
+\d

# 2020-11-10 12:19:11.893482
+select * from user_group_mapping;

# 2020-11-10 12:19:21.882562
+\d user_group_mapping;

# 2020-11-10 12:20:59.305200
+select * from user_group_mapping;

# 2020-11-10 12:21:01.778742
+\d user_group_mapping;

# 2020-11-10 12:29:37.086178
+INSERT INTO pubic.user_group_mapping(user_id, group_id) VALUES ('9a02868a-2315-11eb-884f-0242ac110003', '93ed4226-2315-11eb-873e-0242ac110003');

# 2020-11-11 16:48:26.577488
+\d

# 2020-11-11 16:48:29.671313
+\?

# 2020-11-11 16:48:43.173208
+\dT

# 2020-11-11 16:49:52.353010
+select * from information_schema.data_type_privileges;

# 2020-11-11 16:50:28.106420
+select * from information_schema.element_types;

# 2020-11-11 16:50:47.569523
+select * from information_schema.user_defined_types;

# 2020-11-11 16:50:53.819669
+\?

# 2020-11-11 16:51:10.688181
+select * from information_schema.data_type_privileges;

# 2020-11-11 16:51:56.195740
+select pg_typeof(status) from public.organization;

# 2020-11-11 16:52:00.977662
+\d organization

# 2020-11-11 16:52:18.989581
+select pg_typeof(status) as t from public.organization;

# 2020-11-12 13:20:17.206003
+\d test

# 2020-11-12 13:20:19.299124
+\d

# 2020-11-12 13:20:33.767044
+\d test

# 2020-11-12 13:21:52.505722
+create table person (id uuid not null default uuid_generate_v1(), name varchar);

# 2020-11-12 13:21:58.300139
+CREATE EXTENSION "uuid-ossp"
+WITH SCHEMA public;
+

# 2020-11-12 13:22:01.180051
+create table person (id uuid not null default uuid_generate_v1(), name varchar);

# 2020-11-12 13:22:16.221211
+insert into person (name) values ('a');

# 2020-11-12 13:22:18.639976
+insert into person (name) values ('b');

# 2020-11-12 13:22:20.392538
+insert into person (name) values ('c');

# 2020-11-12 13:22:22.026695
+insert into person (name) values ('d');

# 2020-11-12 13:22:24.479187
+insert into person (name) values ('e');

# 2020-11-12 13:22:31.285417
+select * from person;

# 2020-11-12 13:22:39.801488
+select * from person order by id desc;

# 2020-11-12 13:22:58.881698
+select * from person order by id desc limit 1,3;

# 2020-11-12 13:23:05.721628
+select * from person order by id desc limit 1 offset 3;

# 2020-11-12 13:23:10.570421
+select * from person order by id desc limit 1 offset 0;

# 2020-11-12 13:23:13.247641
+select * from person order by id desc limit 1 offset 1;

# 2020-11-12 13:23:15.778794
+select * from person order by id desc limit 1 offset 2;

# 2020-11-12 13:23:20.234034
+select * from person order by id desc limit 1 offset 3;

# 2020-11-12 13:23:23.170310
+select * from person order by id desc limit 1 offset 4;

# 2020-11-12 13:23:25.668553
+select * from person order by id desc limit 1 offset 5;

# 2020-11-12 13:27:06.266124
+select * from person order by id desc limit 1 offset 3;

# 2020-11-12 13:32:31.971106
+with total as (select count(1) from person) select * from person order by id desc limit 1 offset 3;

# 2020-11-12 13:32:38.878930
+with total as (select count(1) from person) select *, total from person order by id desc limit 1 offset 3;

# 2020-11-12 13:32:52.873724
+with total as (select count(1) from person) select *, total as total from person order by id desc limit 1 offset 3;

# 2020-11-12 13:33:09.422707
+with total as (select count(1) from person) select *, total.count from person order by id desc limit 1 offset 3;

# 2020-11-12 13:33:18.389407
+select count(1) from person;

# 2020-11-12 13:33:50.238926
+with total as (select count(1) from person) select *, total.count from person as ps, total as total order by id desc limit 1 offset 3;

# 2020-11-12 13:33:59.520012
+with total as (select count(1) from person) select * from person as ps, total as total order by id desc limit 1 offset 3;

# 2020-11-12 13:34:04.627216
+with total as (select count(1) from person) select * from person as ps, total as total order by id desc limit 3 offset 3;

# 2020-11-12 13:35:08.832022
+with total as (select count(1) from person) select * from person, total order by id desc limit 3 offset 3;

# 2020-11-12 15:11:35.689429
+    WITH total as (SELECT COUNT(1) from public.person) SELECT * from public.land, total ORDER BY id DESC LIMIT 1 OFFSET 0
+

# 2020-11-12 15:11:39.770921
+    WITH total as (SELECT COUNT(1) from public.person) SELECT * from public.land, total ORDER BY id DESC LIMIT 1 OFFSET 0;

# 2020-11-12 15:11:47.286090
+    WITH total as (SELECT COUNT(1) from public.person) SELECT * from public.person, total ORDER BY id DESC LIMIT 1 OFFSET 0;

# 2020-11-12 15:12:52.492989
+select * from land;

# 2020-11-12 15:13:11.372456
+    WITH total as (SELECT COUNT(1) from public.land) SELECT * from public.land, total ORDER BY id DESC LIMIT 1 OFFSET 0;

# 2020-11-12 15:19:08.759190
+gws

# 2020-11-18 10:17:27.290213
+\d

# 2020-11-18 10:17:29.619235
+\l

# 2020-11-18 10:17:30.530973
+\d

# 2020-11-18 10:17:37.100738
+\?

# 2020-11-18 10:17:43.468315
+\c ndl

# 2020-11-18 10:17:44.875157
+\d

# 2020-11-18 10:17:52.368178
+select * from land;

# 2020-11-18 10:17:56.946561
+select * from user;

# 2020-11-18 10:18:08.039297
+\d user;

# 2020-11-18 10:18:15.948420
+select * from public.user;

# 2020-11-18 10:18:19.110173
+select * from public.land;

# 2020-11-18 10:18:21.078578
+\d

# 2020-11-18 10:18:23.677852
+\?

# 2020-11-18 10:18:27.952844
+\l

# 2020-11-18 10:18:34.905446
+\c orgpool

# 2020-11-18 10:18:38.742045
+\d

# 2020-11-18 10:18:40.328785
+\l

# 2020-11-18 10:18:44.378459
+\c test

# 2020-11-18 10:18:46.065752
+l

# 2020-11-18 10:18:47.753416
+\l

# 2020-11-18 10:18:49.137801
+\d

# 2020-11-18 10:18:55.100109
+\d public

# 2020-11-18 10:19:00.962195
+\?

# 2020-11-18 10:19:08.071432
+\d

# 2020-11-18 10:19:15.125688
+create table person (id uuid not null default uuid_generate_v1(), name varchar);

# 2020-11-18 10:19:21.650896
+select * from person;

# 2020-11-18 10:19:45.164121
+select * from person where name in ('a', 'c')

# 2020-11-18 10:19:52.680074
+select * from person where name in ('a', 'c');

# 2020-11-18 10:19:56.763628
+explain select * from person where name in ('a', 'c');

# 2020-11-18 10:21:14.413882
+explain select * from person where name =ANY ('a', 'c');

# 2020-11-18 10:21:20.287234
+explain select * from person where name = ANY('a', 'c');

# 2020-11-18 10:22:47.578550
+explain select * from person where name = ANY('a','c');

# 2020-11-18 10:22:53.766811
+explain select * from person where name = ANY('a');

# 2020-11-18 10:22:58.806799
+select * from person where name = ANY('a');

# 2020-11-18 10:23:03.059618
+select * from person where name = ANY('a','c');

# 2020-11-18 10:23:15.637132
+select * from person where name = ANY(a,c);

# 2020-11-18 10:23:19.024357
+select * from person where name = ANY(a , c);

# 2020-11-18 10:23:24.941453
+select * from person where name = ANY( 'a' , 'c');

# 2020-11-18 10:23:42.908352
+explain select * from person where name in ('a', 'c');

# 2020-11-18 11:06:59.473034
+\d 

# 2020-11-18 11:07:06.706976
+select * from organization;

# 2020-11-20 09:10:46.846962
+select * from person where name = ANY( 'a' , 'c');

# 2020-11-20 09:10:56.081775
+select * from person where name = ANY( 'a', 'c');

# 2020-11-20 09:11:00.986860
+select * from person where name = ANY(['a', 'c']);

# 2020-11-20 09:11:08.858128
+select * from person where name = ANY('a', 'c');

# 2020-11-20 09:12:11.168529
+select * from person where name = ANY('a','c'::string[]);

# 2020-11-20 09:12:17.221225
+select * from person where name = ANY("'a','c'"::string[]);

# 2020-11-20 09:13:16.653153
+select * from person where name = ANY("{'a','c'}"::string[]);

# 2020-11-20 09:14:07.213253
+select * from person where name = ANY(ARRAY['a','c']);

# 2020-12-18 17:53:43.022893
+\d

# 2020-12-18 17:54:35.901190
+create table public.role (

# 2020-12-18 17:55:45.663483
+create table public.role (id uuid NOT NULL DEFAULT uuid_generate_v1(), name varchar(128));

# 2020-12-18 17:56:46.899051
+create table public.wsrole (ws uuid) inherits (public.role);

# 2020-12-18 17:56:48.865499
+\d

# 2020-12-18 17:56:55.348193
+\d public.role

# 2020-12-18 17:56:59.971879
+\d public.wsrole

# 2020-12-18 17:57:32.003579
+insert into public.role (name) values ('adm')

# 2020-12-18 17:57:36.659302
+insert into public.role (name) values ('user')

# 2020-12-18 17:57:59.395538
+insert into public.wsrole (name,ws) values ('user', uuid_generate_v1());

# 2020-12-18 17:58:11.005990
+insert into public.wsrole (name,ws) values ('kk', uuid_generate_v1());

# 2020-12-18 17:58:24.956838
+select * from public.role where name = 'adm'

# 2020-12-18 17:58:42.540920
+select * from public.wsrole where name = 'kk'

# 2020-12-19 11:05:16.855816
+ls

# 2020-12-19 11:05:20.317639
+\d

# 2020-12-19 11:05:27.012566
+select * from role;

# 2020-12-19 11:05:33.200097
+select * from wsrole;

# 2020-12-19 11:06:25.724113
+\d role;

# 2020-12-19 11:06:35.207326
+\d wsrole;

# 2020-12-19 11:07:39.576509
+select ws from role;

# 2020-12-19 11:35:23.604441
+\d

# 2020-12-19 11:36:02.992100
+create table public.scheme (

# 2020-12-19 11:36:07.783612
+create table public.scheme 

# 2020-12-19 11:36:10.901168
+create table public.scheme \

# 2020-12-19 11:36:33.999609
+\e

# 2020-12-19 11:40:05.583208
+create table public.scheme(
+name VARCHAR,
+id int,
+parent int);

# 2020-12-19 11:40:32.676237
+insert into public.scheme (name, id, parent) values ('a', 1, null);

# 2020-12-19 11:40:39.222342
+insert into public.scheme (name, id, parent) values ('b', 2, null);

# 2020-12-19 11:40:46.738087
+insert into public.scheme (name, id, parent) values ('c', 3, 1);

# 2020-12-19 11:40:51.834028
+insert into public.scheme (name, id, parent) values ('c', 4, 2);

# 2020-12-19 11:40:58.243359
+select * from public.scheme;

# 2020-12-19 11:41:31.287573
+select * form id = 4;

# 2020-12-19 11:41:46.408543
+select * from scheme where id = 4;

# 2020-12-19 11:44:09.818742
+with ws as (select * from scheme where id=4) select * from scheme where id = ws.parent;

# 2020-12-19 11:44:16.961084
+with ws as (select * from scheme where id=4) select * from scheme,ws where id = ws.parent;

# 2020-12-19 11:44:21.012643
+with ws as (select * from scheme where id=4) select * from scheme, ws where id = ws.parent;

# 2020-12-19 11:44:31.364748
+with ws as (select * from scheme where id=4) select * from scheme, ws where scheme.id = ws.parent;

# 2020-12-19 11:49:47.136539
+with ws as (select * from scheme where id=4) 
+select * from scheme union ws where scheme.id = ws.parent;

# 2020-12-19 11:52:15.424990
+with ws as (select * from scheme where id=4) 
+select * from scheme, ws where scheme.id = ws.parent group by id;

# 2020-12-19 11:52:22.085910
+with ws as (select * from scheme where id=4) 
+select * from scheme, ws where scheme.id = ws.parent group by scheme.id;

# 2020-12-19 11:52:30.354615
+with ws as (select * from scheme where id=4) 
+select * from scheme, ws where scheme.id = ws.parent;

# 2020-12-19 11:52:40.704283
+with ws as (select * from scheme where id=4) 
+select * from scheme, ws;

# 2020-12-19 11:53:19.452171
+with ws as (select * from scheme where id=4) 
+select * from scheme, ws where scheme.id = ws.parent_id;

# 2020-12-19 11:53:29.338115
+with ws as (select * from scheme where id=4) 
+select * from scheme, ws where scheme.id = ws.parent;

# 2020-12-19 11:53:48.287043
+with ws as (select * from scheme where id=4) 
+select * from scheme as s, ws as w where scheme.id = ws.parent;

# 2020-12-19 11:53:57.242595
+with ws as (select * from scheme where id=4) 
+select * from scheme as s, ws as w where s.id = w.parent;

# 2020-12-19 11:56:42.156832
+with ws as (select * from scheme where id=4) 
+select * from scheme as s cross join ws as w where s.id = w.parent;

# 2020-12-19 11:56:48.559629
+with ws as (select * from scheme where id=4) 
+select * from scheme as s join ws as w where s.id = w.parent;

# 2020-12-19 12:55:45.595492
+with ws as (select * from scheme where id=4) 
+select * from scheme as s union ws as w where s.id = w.parent;

# 2020-12-19 12:56:57.874157
+with ws as (select * from scheme where id=4) 
+select * from scheme as s, ws as w where s.id = w.parent;

# 2020-12-19 12:57:28.534399
+with ws as (select * from scheme where id=4) 
+select * from scheme as s left join ws as w where s.id = w.parent;

# 2020-12-19 13:02:52.721783
+ls;

# 2020-12-19 13:03:10.451319
+\d

# 2020-12-19 13:03:21.005441
+\d wsrole;

# 2020-12-19 13:03:42.892786
+select * from role;

# 2020-12-19 13:23:47.023015
+with ws as (select * from scheme where id=4)
+select * from scheme as s where s.id = ws.parent;

# 2020-12-19 13:24:45.767351
+select * from scheme where id = 4;

# 2020-12-19 13:25:56.426364
+with ws as (select parent from scheme where id=4)
+select * from scheme as s, ws where s.id = ws.parent or s.id = 4;

# 2020-12-19 13:26:43.384829
+select * from scheme where id = 4 or id = (select parent where id = 4);

# 2020-12-19 13:26:51.105182
+select * from scheme where id = 4 or id = (select parent from scheme where id = 4);

# 2020-12-19 13:27:24.329444
+with ws as (select parent from scheme where id=4)
+select * from scheme as s, ws where s.id = ws.parent or s.id = 4;

# 2020-12-19 13:29:18.517715
+select * from scheme where id = 5 or id = (select parent from scheme where id = 5);

# 2020-12-19 13:29:47.628233
+with ws as (select parent from scheme where id=4)
+select * from scheme as s, ws where s.id = ws.parent or s.id = 4;

# 2020-12-19 13:31:29.378657
+with ws as (select parent as pp from scheme where id=4)
+select * from scheme as s, ws where s.id = ws.parent or s.id = 4;

# 2020-12-19 13:31:45.196797
+with ws as (select parent as pp from scheme where id=4)
+select * from scheme as s, ws where s.id = ws.pp or s.id = 4;

# 2020-12-19 14:15:19.201822
+\d

# 2020-12-19 14:15:28.863864
+\d role

# 2020-12-19 14:15:37.528299
+drop role;

# 2020-12-19 14:15:46.934239
+drop table role;

# 2020-12-19 14:15:54.808187
+\d

# 2020-12-19 14:15:56.686549
+drop table role;

# 2020-12-19 14:16:07.790593
+drop table wsrole;

# 2020-12-19 14:16:12.673524
+drop table role;

# 2020-12-19 14:16:38.628913
+create table role (
+id int,
+name varchar);

# 2020-12-19 14:17:13.831170
+create table role_mapping(
+rid int,
+sid int);

# 2020-12-19 14:17:53.298885
+insert into role (id, name) values
+(1, "admin"),
+(2, "user"),
+(3, "guest");

# 2020-12-19 14:18:04.277178
+insert into role (id, name) values
+(1, 'admin"),
+(2, 'user"),
+(3, 'guest");

# 2020-12-19 14:18:10.598535
+insert into role (id, name) values
+(1, 'admin'),
+(2, 'user'),
+(3, 'guest');

# 2020-12-19 14:18:14.749705
+select * from role;

# 2020-12-19 14:18:46.645775
+insert into role_mapping (rid, sid) values
+(1, 1),
+(2, 1);

# 2020-12-19 14:19:05.844265
+select * from role_mapping where sid = 1;

# 2020-12-19 14:19:42.100312
+select * from role_mapping as rm join role where rm.sid = 1 and role.id = rm.id;

# 2020-12-19 14:20:34.981144
+select * from role_mapping as rm join role on (role.id = rm.id) where rm.sid = 1;

# 2020-12-19 14:21:14.036512
+select * from role_mapping join role on (role.id = role_mapping.id) where rm.sid = 1;

# 2020-12-19 14:21:22.530786
+select * from role_mapping join role on (role.id = role_mapping.rid) where rm.sid = 1;

# 2020-12-19 14:21:28.741891
+select * from role_mapping join role on (role.id = role_mapping.rid) where role_mapping.sid = 1;

# 2020-12-19 16:39:07.988468
+\e

# 2020-12-19 16:40:44.662924
+\d

# 2020-12-19 16:40:59.199232
+\d scheme

# 2020-12-19 16:41:05.421714
+select * from scheme;

# 2020-12-19 16:45:32.735704
+select * from role_mapping join role on (role.id = role_mapping.rid) where role_mapping.sid = 1;

# 2020-12-19 16:46:02.281009
+select * from scheme as srole_mapping join role on (role.id = role_mapping.rid) where role_mapping.sid = 1;

# 2020-12-19 16:49:06.853502
+select *
+from scheme as s
+join role_mapping rm on rm.sid = s.id
+join role r on r.id = rm.rid
+where s.id = 1;

# 2020-12-19 16:50:14.032355
+select s.name, s.id, s.parent, r.name as rolename
+from scheme as s
+join role_mapping rm on rm.sid = s.id
+join role r on r.id = rm.rid
+where s.id = 1;

# 2020-12-19 16:50:24.539919
+select s.name, s.id, r.name as rolename
+from scheme as s
+join role_mapping rm on rm.sid = s.id
+join role r on r.id = rm.rid
+where s.id = 1;

# 2020-12-20 10:22:08.125070
+select * from scheme;

# 2020-12-20 10:22:21.825103
+\e

# 2020-12-20 10:23:11.231964
+select s.id, s.name, s.description, s.parent_id, s.workspace_id, s.organization_id, rule.action,
+r.id as rid, r.name as rname, r.description as rdescription, r.workspace_id as rworkspace_id, r.direct_role as rdirect_role
+from scheme as s
+join rule on rule.scheme_id = s.id
+join role r on rule.role_id = r.id
+where s.id=62f95692-4272-11eb-b7a4-0242ac110003;

# 2020-12-20 10:23:16.964444
+select s.id, s.name, s.description, s.parent_id, s.workspace_id, s.organization_id, rule.action,
+r.id as rid, r.name as rname, r.description as rdescription, r.workspace_id as rworkspace_id, r.direct_role as rdirect_role
+from scheme as s
+join rule on rule.scheme_id = s.id
+join role r on rule.role_id = r.id
+where s.id='62f95692-4272-11eb-b7a4-0242ac110003';

# 2020-12-20 10:23:39.089606
+select s.id, s.name, s.description, s.parent_id, s.workspace_id, s.organization_id, rule.action,
+r.id as rid, r.name as rname, r.description as rdescription, r.workspace_id as rworkspace_id, r.direct_role as rdirect_role
+from scheme as s
+left join rule on rule.scheme_id = s.id
+left join role r on rule.role_id = r.id
+where s.id='62f95692-4272-11eb-b7a4-0242ac110003';

# 2020-12-20 12:07:17.721662
+select * from scheme;

# 2020-12-20 12:08:45.399214
+select id where workspace_id = '894459a9-131b-4001-aa83-5356bddc49d7' or id = (select parent_id where workspace_id='894459a9-131b-4001-aa83-5356bddc49d7');

# 2020-12-20 12:09:15.391111
+select id from scheme where workspace_id = '894459a9-131b-4001-aa83-5356bddc49d7' or id = (select parent_id where workspace_id='894459a9-131b-4001-aa83-5356bddc49d7');

# 2020-12-20 12:09:27.032943
+select parent_id where workspace_id='894459a9-131b-4001-aa83-5356bddc49d7';

# 2020-12-20 12:09:38.526487
+select parent_id from scheme where workspace_id='894459a9-131b-4001-aa83-5356bddc49d7';

# 2020-12-20 12:10:10.001249
+select id from scheme where workspace_id = '894459a9-131b-4001-aa83-5356bddc49d7';

# 2020-12-20 12:10:58.895319
+select id from scheme where name = 'ws' or description = 'description'
+;

# 2020-12-20 12:11:31.115121
+explain select id from scheme where workspace_id = '894459a9-131b-4001-aa83-5356bddc49d7' or id = (select parent_id where workspace_id='894459a9-131b-4001-aa83-5356bddc49d7');

# 2020-12-20 12:15:28.451804
+with ws as (select id, parent_id where workspace_id='894459a9-131b-4001-aa83-5356bddc49d7')
+select id from scheme where id = ws.id or id = ws.parent_id;

# 2020-12-20 12:15:55.834527
+with ws as (select id, parent_id from scheme where workspace_id='894459a9-131b-4001-aa83-5356bddc49d7')
+select id from scheme where id = ws.id or id = ws.parent_id;

# 2020-12-20 12:17:47.422595
+with ws as (select id, parent_id from scheme where workspace_id='894459a9-131b-4001-aa83-5356bddc49d7')
+select * from ws;

# 2020-12-20 12:20:32.772519
+\d

# 2020-12-20 12:20:36.700514
+select * from ws;

# 2020-12-20 12:20:41.292538
+select * from scheme;

# 2020-12-20 12:21:32.078748
+update scheme set name=d where id=4;

# 2020-12-20 12:21:36.297587
+update scheme set name='d' where id=4;

# 2020-12-20 12:21:39.321878
+select * from scheme;

# 2020-12-20 12:22:05.380318
+select * from scheme where name = d;

# 2020-12-20 12:22:11.837489
+select * from scheme where name = 'd';

# 2020-12-20 12:22:17.059857
+select id, parent from scheme where name = 'd';

# 2020-12-20 12:22:25.125309
+select id, parent as id from scheme where name = 'd';

# 2020-12-20 12:22:34.272200
+select id, ws as id from scheme where name = 'd';

# 2020-12-20 12:22:37.050420
+select id, parent as id from scheme where name = 'd';

# 2020-12-20 12:23:01.241076
+with wsall as (select id, parent as id from scheme where name = 'd')
+select * from wsall;

# 2020-12-20 12:50:17.563207
+\d;

# 2020-12-20 12:50:23.685084
+select * from role_mapping;

# 2020-12-20 12:50:53.719096
+insert into role_mapping (rid, sid) values
+(3,1), (4,1), (5,1);

# 2020-12-20 12:51:00.069705
+select * from role_mapping;

# 2020-12-20 12:51:29.002005
+delete from role_mapping where sid = 1 and (rid = 3 or rid = 4);

# 2020-12-20 12:51:34.778286
+select * from role_mapping;

# 2020-12-20 12:51:56.338548
+insert into role_mapping (rid, sid) values
+(3,2), (4,2), (5,2);

# 2020-12-20 12:51:59.226387
+delete from role_mapping where sid = 1 and (rid = 3 or rid = 4);

# 2020-12-20 12:52:03.926773
+select * from role_mapping;

# 2020-12-20 15:51:12.019166
+\d

# 2020-12-20 15:51:22.864512
+select * from role_mapping;

# 2020-12-20 15:52:18.230819
+create table mix (
+id int,
+user int,
+group int,
+fu int);

# 2020-12-20 15:52:51.000103
+create table mix (
+id int,
+u int,
+g int,
+fu int);

# 2020-12-20 15:52:57.421883
+select * from mix;

# 2020-12-20 15:53:26.145217
+\e

# 2020-12-20 15:54:01.102765
+ALTER TABLE mix add constraint mapping_uq UNIQUE (id,u,g,fu);

# 2020-12-20 15:54:20.179011
+insert into mix (id, u, g, fu) values (1,2,3,4);

# 2020-12-20 15:54:24.571364
+insert into mix (id, u, g, fu) values (1,2,3,5);

# 2020-12-20 15:54:33.593793
+insert into mix (id, u, g, fu) values (1,2,3,4);

# 2020-12-21 09:37:41.079124
+\d

# 2020-12-21 09:37:43.655022
+\d role

# 2020-12-21 09:37:50.349220
+\d role_mapping;

# 2020-12-21 09:37:59.630632
+\d scheme;

# 2020-12-21 09:38:06.965783
+\d mix;

# 2020-12-21 09:38:42.115617
+create table scope(
+id int;

# 2020-12-21 09:38:51.588579
+create table scope(
+id int,
+oid int);

# 2020-12-21 09:39:00.103620
+drop table role;

# 2020-12-21 09:40:01.958854
+create table role(
+id int,
+sid int);

# 2020-12-21 09:41:22.271625
+ALTER TABLE public.role ADD CONSTRAINT scope_fk FOREIGN KEY (sid)
+REFERENCES public.scope(id) MATCH FULL
+ON DELETE SET NULL ON UPDATE CASCADE

# 2020-12-21 09:41:27.214720
+ALTER TABLE public.role ADD CONSTRAINT scope_fk FOREIGN KEY (sid)
+REFERENCES public.scope(id) MATCH FULL
+ON DELETE SET NULL ON UPDATE CASCADE;

# 2020-12-21 09:42:31.959697
+alter table role add constraint id_pk primary key (id);

# 2020-12-21 09:42:34.716620
+ALTER TABLE public.role ADD CONSTRAINT scope_fk FOREIGN KEY (sid)
+REFERENCES public.scope(id) MATCH FULL
+ON DELETE SET NULL ON UPDATE CASCADE;

# 2020-12-21 10:03:35.591167
+\d;

# 2020-12-21 10:03:38.965398
+\d scope;

# 2020-12-21 10:03:42.578139
+ls
+
+;

# 2020-12-21 10:04:00.105583
+drop table role;

# 2020-12-21 10:04:04.436993
+drop table scope;

# 2020-12-21 10:14:24.942105
+CREATE TABLE public.scope (
+	id int NOT NULL,
+	oid int,
+	CONSTRAINT scope_pk PRIMARY KEY (id)
+);

# 2020-12-21 10:23:18.831916
+create table public.mapping(
+id int not null,
+name varchar,
+sid int,
+constraint s_fk foreign key (sid) references public.scope (id) MATCH full
+);

# 2020-12-21 10:23:47.574174
+insert into mapping (id, name, sid) values (1, 'a', 1);

# 2020-12-21 10:56:25.405231
+\d scope;

# 2020-12-21 10:56:53.354149
+insert into scope (id, oid) values (1, 1);

# 2020-12-21 10:57:05.631364
+insert into scope (id, oid) values (1, 1) on conflict do nothing;

# 2020-12-21 10:57:17.595983
+select * from scope;

# 2020-12-21 10:58:07.151392
+\d

# 2020-12-21 10:58:16.618065
+insert into mapping (id, name, sid) values (1, 'a', 2);

# 2020-12-21 10:59:07.018955
+insert into scope (id, oid) values (1, 1) on conflict do nothing returning id;

# 2020-12-21 10:59:20.509607
+insert into scope (id, oid) values (2, 2) on conflict do nothing returning id;

# 2020-12-21 15:48:18.647373
+select * from scope;

# 2020-12-21 16:05:37.240918
+\e

# 2020-12-21 16:07:14.094798
+select s.id, s.name, s.description, s.parent_id, s.scope_id
+rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.direct_role as rdirect_role, role.scope_id as rscope_id
+from scheme as s
+left join rule on rule.scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id='11f5a820-4369-11eb-9f13-0242ac110003';

# 2020-12-21 16:11:45.252292
+select * from scope;

# 2020-12-23 11:06:37.638160
+select * from organization;

# 2020-12-23 11:48:31.311102
+select * from scheme;

# 2020-12-23 14:03:07.935480
+\e

# 2020-12-23 14:03:32.122630
+SELECT gp.* FROM public.user_group_mapping um
+ LEFT JOIN group gp on gp.id = um.group_id
+ WHERE um.user_id='11111';

# 2020-12-23 14:03:50.214209
+SELECT gp.* FROM public.user_group_mapping um
+ LEFT JOIN public.group gp on gp.id = um.group_id
+ WHERE um.user_id='11111';

# 2020-12-23 14:52:28.668086
+\d

# 2020-12-28 17:06:59.165128
+\d;

# 2020-12-28 17:07:04.619787
+select * from rule;

# 2020-12-28 17:07:10.884736
+\d

# 2020-12-28 17:07:22.079523
+select * from rule;

# 2020-12-28 17:08:16.074095
+select * from role;

# 2020-12-28 17:36:00.300092
+select * from organization;

# 2020-12-28 17:44:08.194300
+\d

# 2020-12-28 17:44:10.154092
+select * from organization;

# 2020-12-28 17:44:15.383446
+\d

# 2020-12-28 17:44:21.033070
+select * from user;

# 2020-12-28 17:44:47.180185
+select * from public.user;

# 2020-12-28 17:44:58.304344
+\d

# 2020-12-28 17:45:03.628477
+select * from public.rule;

# 2020-12-28 17:45:26.747211
+select * from public.role;

# 2020-12-28 17:54:45.870743
+select * from public.rule;

# 2020-12-28 17:55:15.235074
+select * from public.role_mapping;

# 2020-12-28 17:58:23.131476
+\e

# 2020-12-28 17:59:11.386257
+select s.id, s.name, s.description, s.parent_id, s.scope_id rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.direct_role as rdirect_role, role.scope_id as rscope_id
+from scheme as s
+left join rule on rule.scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id='8a2fe642-48fb-11eb-97c7-0242ac110003';

# 2020-12-28 17:59:56.862428
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.direct_role as rdirect_role, role.scope_id as rscope_id
+from scheme as s
+left join rule on rule.scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id='8a2fe642-48fb-11eb-97c7-0242ac110003';

# 2020-12-28 18:00:24.654264
+\d scheme_id;

# 2020-12-28 18:00:27.500186
+\d scheme;

# 2020-12-28 18:00:52.870984
+\d public.role;

# 2020-12-28 18:01:30.731449
+select * from rule where scheme_id = '8a2fe642-48fb-11eb-97c7-0242ac110003'
+;

# 2020-12-28 18:01:38.752159
+select * from rule;

# 2020-12-28 18:01:55.436828
+select * from scheme;

# 2021-01-04 18:09:40.770263
+select * from organization;

# 2021-01-04 18:10:05.543604
+\d

# 2021-01-04 18:10:26.506497
+select * from role_mappings;

# 2021-01-04 18:10:28.351477
+select * from role_mapping;

# 2021-01-04 18:10:57.905730
+select * from scope;

# 2021-01-04 18:11:18.966477
+select * from role;

# 2021-01-05 10:59:13.200507
+create table agent (
+id serial primary key);

# 2021-01-05 11:00:15.167875
+create table user_agent (
+name varchar
+) inherits (agent);

# 2021-01-05 11:00:57.839534
+create table field_agent (
+field_key varchar
+) inherits (agent);

# 2021-01-05 11:01:29.416940
+insert into user_agent (name) values ('a');

# 2021-01-05 11:01:31.768185
+insert into user_agent (name) values ('b');

# 2021-01-05 11:01:33.469394
+insert into user_agent (name) values ('c');

# 2021-01-05 11:01:37.201791
+select * from role;

# 2021-01-05 11:01:40.508781
+select * from agent;

# 2021-01-05 11:01:48.383071
+select * from user_agent;

# 2021-01-05 11:06:28.337947
+select * from field_agent;

# 2021-01-05 11:06:39.924272
+\d field_agent

# 2021-01-05 11:06:58.943914
+insert into field_agent (field_key) values ('1');

# 2021-01-05 11:07:01.066738
+insert into field_agent (field_key) values ('2');

# 2021-01-05 11:08:24.667914
+select * from agent;

# 2021-01-05 11:08:34.849970
+select * from field_agent;

# 2021-01-05 14:00:59.019356
+select * from pg_inherits;

# 2021-01-05 14:02:51.699456
+select * from pg_namespace;

# 2021-01-05 14:03:37.861135
+select * from pg_class;

# 2021-01-05 14:04:15.591711
+\d

# 2021-01-05 14:05:31.198343
+select * from agent;

# 2021-01-05 14:05:38.183740
+select * from field_agent;

# 2021-01-05 14:06:50.401158
+select agen.*
+from agent
+left join field_agent fa on fa.id = agent.id
+left join user_agent ua on ua.id = agent.id
+where agent.id = 3;

# 2021-01-05 14:07:00.891532
+select agent.*
+from agent
+left join field_agent fa on fa.id = agent.id
+left join user_agent ua on ua.id = agent.id
+where agent.id = 3;

# 2021-01-05 14:07:16.169256
+select agent.*, fa.*, ua.*
+from agent
+left join field_agent fa on fa.id = agent.id
+left join user_agent ua on ua.id = agent.id
+where agent.id = 3;

# 2021-01-05 14:07:33.382619
+select agent.*, fa.*, ua.*
+from agent
+left join field_agent fa on fa.id = agent.id
+left join user_agent ua on ua.id = agent.id
+where agent.id = ANY(3,4,5);

# 2021-01-05 14:07:41.784663
+select agent.*, fa.*, ua.*
+from agent
+left join field_agent fa on fa.id = agent.id
+left join user_agent ua on ua.id = agent.id
+where agent.id in (3,4,5);

# 2021-01-05 14:12:34.038264
+create table person (
+name varchar primary key,
+age int,
+foreign key (parent) references person(name)
+);

# 2021-01-05 14:13:20.325453
+create table person (
+name varchar primary key,
+age int,
+parent varchar,
+foreign key (parent) references person(name)
+);

# 2021-01-05 14:13:47.786011
+insert into person (name, age, parent) values ('a', 1, null);

# 2021-01-05 14:13:52.848746
+insert into person (name, age, parent) values ('b', 2, null);

# 2021-01-05 14:14:01.938432
+insert into person (name, age, parent) values ('c', 3, 'a');

# 2021-01-05 14:14:08.666629
+insert into person (name, age, parent) values ('d', 4, 'c');

# 2021-01-05 14:14:16.697284
+insert into person (name, age, parent) values ('e', 5, 'b');

# 2021-01-05 14:14:19.957129
+select * from user;

# 2021-01-05 14:14:25.311862
+select * from person;

# 2021-01-05 14:22:10.187617
+with recursive tmp as (
+select * from person where name = 'e'
+union
+select * from person inner join tmp t on t.parent = person.name
+) select * from tmp;

# 2021-01-05 14:23:03.129597
+with recursive tmp as (
+select person.* from person where name = 'e'
+union
+select person.* from person inner join tmp t on t.parent = person.name
+) select * from tmp;

# 2021-01-05 14:41:59.466184
+with recursive tmp as (
+select person.* from person where name = 'd'
+union
+select person.* from person inner join tmp t on t.parent = person.name
+) select * from tmp;

# 2021-01-05 17:35:53.400399
+\d

# 2021-01-05 17:36:07.958854
+select * from scheme;

# 2021-01-05 19:50:51.770224
+with recursive tmp as (
+select person.* from person where name = 'd'
+union
+select person.* from person inner join tmp on t.parent = person.name
+) select * from tmp;

# 2021-01-05 19:51:03.740494
+with recursive tmp as (
+select person.* from person where name = 'd'
+union
+select person.* from person inner join tmp on tmp.parent = person.name
+) select * from tmp;

# 2021-01-05 19:55:03.721686
+with recursive temp as ( select scheme.*   from scheme   left join scope on scope.id = scheme.scope_id   where scheme.scope_id = $1 union    select scheme.*        from scheme       left join scope sc on sc.id = scheme.scope_id       inner join temp       where scheme.id = t.parent_id ) select * from temp;

# 2021-01-05 20:03:21.533681
+\d

# 2021-01-05 20:03:28.807259
+select * from scheme;

# 2021-01-05 20:04:00.283005
+with recursive temp as ( select scheme.*   from scheme   left join scope on scope.id = scheme.scope_id   where scheme.scope_id = $1 union    select scheme.*        from scheme       left join scope sc on sc.id = scheme.scope_id       inner join temp      on scheme.id = temp.parent_id ) select * from temp;

# 2021-01-05 20:04:48.194679
+with recursive temp as ( select scheme.*   from scheme   left join scope on scope.id = scheme.scope_id   where scheme.scope_id = '36988-4f55-11eb-827a-0242ac110005' union    select scheme.*        from scheme       left join scope sc on sc.id = scheme.scope_id       inner join temp      on scheme.id = temp.parent_id ) select * from temp;

# 2021-01-05 20:05:07.593848
+with recursive temp as ( select scheme.*   from scheme   left join scope on scope.id = scheme.scope_id   where scheme.scope_id = "36988-4f55-11eb-827a-0242ac110005" union    select scheme.*        from scheme       left join scope sc on sc.id = scheme.scope_id       inner join temp      on scheme.id = temp.parent_id ) select * from temp;

# 2021-01-05 20:05:34.953706
+with recursive temp as ( select scheme.*   from scheme   left join scope on scope.id = scheme.scope_id   where scheme.scope_id = 36988-4f55-11eb-827a-0242ac110005" union    select scheme.*        from scheme       left join scope sc on sc.id = scheme.scope_id       inner join temp      on scheme.id = temp.parent_id ) select * from temp;

# 2021-01-05 20:05:45.896309
+with recursive temp as ( select scheme.*   from scheme   left join scope on scope.id = scheme.scope_id   where scheme.scope_id = '36988-4f55-11eb-827a-0242ac110005' union    select scheme.*        from scheme       left join scope sc on sc.id = scheme.scope_id       inner join temp      on scheme.id = temp.parent_id ) select * from temp;

# 2021-01-05 20:06:12.221279
+with recursive temp as ( select scheme.*   from scheme   left join scope on scope.id = scheme.scope_id   where scheme.scope_id = 'cf936988-4f55-11eb-827a-0242ac110005' union    select scheme.*        from scheme       left join scope sc on sc.id = scheme.scope_id       inner join temp      on scheme.id = temp.parent_id ) select * from temp;

# 2021-01-05 20:10:04.266100
+select * from scope;

# 2021-01-05 21:58:25.285086
+with recursive tmp as (
+select person.* from person where name = 'd'
+union
+select person.* from person inner join tmp on tmp.parent = person.name
+) select * from tmp;

# 2021-01-05 21:58:52.994883
+with recursive tmp as (
+select person.* from person where name in ('d', 'c')
+union
+select person.* from person inner join tmp on tmp.parent = person.name
+) select * from tmp;

# 2021-01-05 21:59:29.085271
+with recursive tmp as (
+select person.* from person where name in ('c', 'd')
+union
+select person.* from person inner join tmp on tmp.parent = person.name
+) select * from tmp;

# 2021-01-05 22:03:33.364448
+\d

# 2021-01-05 22:03:53.997184
+create table scope(
+a int,
+b int,
+c int);

# 2021-01-05 22:04:16.500118
+insert into scope (a,b,c) values (1, null, null);

# 2021-01-05 22:04:21.499371
+insert into scope (a,b,c) values (1, 2, null);

# 2021-01-05 22:04:24.386680
+insert into scope (a,b,c) values (1, 2, 3);

# 2021-01-05 22:04:27.481620
+insert into scope (a,b,c) values (1, 2, );

# 2021-01-05 22:04:34.438828
+insert into scope (a,b,c) values (1, 2,4);

# 2021-01-05 22:04:37.889927
+insert into scope (a,b,c) values (1, 2, 5);

# 2021-01-05 22:04:41.838010
+select * from scope;

# 2021-01-05 22:04:57.041704
+select * from scope where c = 4;

# 2021-01-05 22:07:39.297594
+with recursive tmp as (
+select * from scope where c = 4
+union
+select * from scope inner join tmp on tmp.b = scope.b or tmp.a = scope.a
+) select * from tmp;

# 2021-01-05 22:08:02.966050
+with recursive tmp as (
+select scope.* from scope where c = 4
+union
+select scope.* from scope inner join tmp on tmp.b = scope.b or tmp.a = scope.a
+) select * from tmp;

# 2021-01-05 22:08:58.403143
+with recursive tmp as (
+select scope.* from scope where c = 4
+union
+select scope.* from scope inner join tmp on (tmp.b = scope.b and scope.c is null) or (tmp.a = scope.a and scope.b is null and scope.c is null)
+) select * from tmp;

# 2021-01-06 09:57:20.123316
+select * from role_mapping;

# 2021-01-06 09:57:37.236912
+select * from role_mapping where rold_id = 'd05b14b8-4fca-11eb-b9ef-0242ac110004'
+;

# 2021-01-06 09:57:41.457906
+select * from role_mapping where rold_id = 'd05b14b8-4fca-11eb-b9ef-0242ac110004';

# 2021-01-06 09:57:50.738605
+select * from role_mapping where role_mapping.rold_id = 'd05b14b8-4fca-11eb-b9ef-0242ac110004';

# 2021-01-06 09:58:08.436066
+select * from role_mapping where role_mapping.role_id = 'd05b14b8-4fca-11eb-b9ef-0242ac110004';

# 2021-01-06 10:00:26.518734
+select * from role_mapping;

# 2021-01-06 10:05:15.877117
+select * from role_mapping where role_mapping.role_id = 'e5bb5916-4fcb-11eb-8b81-0242ac110003';

# 2021-01-07 16:08:09.611173
+select * from role;

# 2021-01-07 16:08:25.651015
+\d

# 2021-01-07 16:08:34.979748
+select * from role_mapping;

# 2021-01-07 16:08:52.684689
+\d

# 2021-01-07 16:09:05.623749
+select * from scheme;

# 2021-01-07 16:10:21.294333
+select * from role where scope in ('ca2a1500-50c7-11eb-85c5-0242ac110003', 'c99c4216-50c7-11eb-a583-0242ac110003');

# 2021-01-07 16:10:28.404454
+select * from role where scope_id in ('ca2a1500-50c7-11eb-85c5-0242ac110003', 'c99c4216-50c7-11eb-a583-0242ac110003');

# 2021-01-07 16:11:38.354498
+select * from scheme;

# 2021-01-07 16:12:01.193029
+select * from rule where scheme_id = 'ca2a4958-50c7-11eb-bc4f-0242ac110003';

# 2021-01-07 16:12:13.885128
+select * from rule where scheme_id = 'ca19e68a-50c7-11eb-bc4f-0242ac110003';

# 2021-01-07 16:13:22.149163
+select * from rule;

# 2021-01-07 16:13:54.538846
+select * from rule where action = 'iss-create'
+;

# 2021-01-07 16:14:12.525522
+select * from scheme;

# 2021-01-08 09:40:05.252414
+\d

# 2021-01-08 09:40:11.001817
+select * from scheme;

# 2021-01-08 09:40:18.382477
+select * from rule;

# 2021-01-08 09:40:30.768553
+select * from role;

# 2021-01-08 09:40:37.440211
+select * from scheme;

# 2021-01-08 09:41:21.355479
+select * from rule where scheme_id = '863de9a0-515a-11eb-8222-0242ac110003';

# 2021-01-08 09:42:02.250978
+select * from rule join role on role.id = rule.role_id where rule.scheme_id = '863de9a0-515a-11eb-8222-0242ac110003';

# 2021-01-08 09:42:20.281844
+\d mapping;

# 2021-01-08 09:42:22.330342
+\d mappings;

# 2021-01-08 09:42:24.837779
+\d

# 2021-01-08 09:43:07.403577
+select * from role_mapping as rm join role on role.id = rm.role_id where rm.scheme_id = '863de9a0-515a-11eb-8222-0242ac110003';

# 2021-01-08 09:44:08.686507
+select rm.*, role.name from role_mapping as rm join role on role.id = rm.role_id where rm.scheme_id = '863de9a0-515a-11eb-8222-0242ac110003';

# 2021-01-08 14:02:12.188023
+\d

# 2021-01-08 14:02:17.035243
+select * from scope;

# 2021-01-08 14:02:34.058335
+\d agent;

# 2021-01-08 14:02:44.206791
+\d person;

# 2021-01-08 14:04:22.306717
+create table scheme(
+id serial primary key,
+name varchar,
+scope_id int,
+foreign key (scope_id) references scope(id)
+);

# 2021-01-08 14:04:43.121442
+create table scheme(
+id serial primary key,
+name varchar,
+scope_id int,
+foreign key (scope_id) references scope(a)
+);

# 2021-01-08 14:05:45.269729
+\d scope;

# 2021-01-08 14:06:18.009896
+alter table socpe add column id serial primary key;

# 2021-01-08 14:06:25.807110
+alter table scope add column id serial primary key;

# 2021-01-08 14:06:30.607512
+\d scope;

# 2021-01-08 14:06:43.541331
+create table scheme(
+id serial primary key,
+name varchar,
+scope_id int,
+foreign key (scope_id) references scope(id)
+);

# 2021-01-08 14:06:53.627136
+select * from scope;

# 2021-01-08 14:07:03.683132
+\d scheme;

# 2021-01-08 14:07:25.806432
+insert into scheme(name, scope_id) values ('a', 1);

# 2021-01-08 14:07:29.667489
+insert into scheme(name, scope_id) values ('b', 1);

# 2021-01-08 14:07:33.017966
+insert into scheme(name, scope_id) values ('c', 2);

# 2021-01-08 14:07:36.942247
+insert into scheme(name, scope_id) values ('d', 2);

# 2021-01-08 14:07:43.491067
+insert into scheme(name, scope_id) values ('e', 3);

# 2021-01-08 14:07:46.555046
+insert into scheme(name, scope_id) values ('f', 3);

# 2021-01-08 14:07:51.036628
+select * from scope;

# 2021-01-08 14:07:54.334703
+select * from scheme;

# 2021-01-08 14:08:55.416551
+select scope.* from scope inner join scheme on scheme.scope_id = scope.id;

# 2021-01-08 14:09:20.384440
+select scope.* from scope inner join scheme on scheme.scope_id = scope.id where scope.b is not null;

# 2021-01-08 14:10:47.305841
+select scope.* from scope inner join scheme on scheme.scope_id = scope.id where scope.b is not null group by scope.b;

# 2021-01-08 14:11:02.674100
+select scope.b from scope inner join scheme on scheme.scope_id = scope.id where scope.b is not null group by scope.b;

# 2021-01-08 14:11:18.625430
+select distinct scope.b from scope inner join scheme on scheme.scope_id = scope.id where scope.b is not null;

# 2021-01-10 18:26:08.809132
+select * from rule;

# 2021-01-10 18:26:44.421579
+select * from rule join role on role.id = rule.role_id where rule.scheme_id = '9280ca60-5336-11eb-a391-0242ac110004';

# 2021-01-10 18:27:53.481272
+select * from mapping where mapping.scheme_id = '9280ca60-5336-11eb-a391-0242ac110004'
+;

# 2021-01-10 18:27:59.669971
+select * from role_mapping where mapping.scheme_id = '9280ca60-5336-11eb-a391-0242ac110004';

# 2021-01-10 18:28:07.029449
+select * from role_mapping where role_mapping.scheme_id = '9280ca60-5336-11eb-a391-0242ac110004';

# 2021-01-10 18:29:24.361603
+select * from role_mapping join role on role.id = role_mapping.role_id where role_mapping.scheme_id = '9280ca60-5336-11eb-a391-0242ac110004';

# 2021-01-10 18:29:38.825142
+select role.name, role_mapping.* from role_mapping join role on role.id = role_mapping.role_id where role_mapping.scheme_id = '9280ca60-5336-11eb-a391-0242ac110004';

# 2021-01-10 18:30:13.010846
+select * from rule join role on role.id = rule.role_id where rule.scheme_id = '9280ca60-5336-11eb-a391-0242ac110004';

# 2021-01-11 14:37:50.275047
+\d

# 2021-01-11 14:37:54.796947
+\d agent;

# 2021-01-11 14:37:58.059946
+\d person;

# 2021-01-11 14:38:12.977557
+\d scheme;

# 2021-01-11 14:38:43.298636
+\d person;

# 2021-01-11 14:38:48.601646
+select * from person;

# 2021-01-11 14:39:55.800846
+alter table person add constraint name_uq unique (name);

# 2021-01-11 14:40:02.535114
+\d person;

# 2021-01-11 14:40:27.450859
+insert into person (name, age, parent) values ('e', 5, 'b');

# 2021-01-11 14:41:01.585365
+insert into person (name, age, parent) values ('e', 5, 'b')
+on conflict do nothing
+returning name;

# 2021-01-11 15:20:06.288765
+\d

# 2021-01-11 15:20:11.910899
+\d person;

# 2021-01-11 15:20:25.850297
+select * from person;

# 2021-01-11 15:21:27.732197
+insert into person (name, age, parent) values ('e', 5, 'b')
+on conflict do nothing
+returning name;

# 2021-01-11 15:21:51.685364
+insert into person (name, age, parent) values ('e', 5, 'b')
+on conflict do nothing
+returning select * from person where name = 'e';

# 2021-01-11 15:36:23.460065
+with tmp1 as ( select name from person where name = 'e'),
+tmp2 as (insert into person (name, age, parent) values ('e', 5, 'b') on conflict do nothing returning name)
+select * from tmp1
+union all
+select * from tmp2;

# 2021-01-11 15:36:40.866130
+delete from person where name = 'e';

# 2021-01-11 15:36:44.092849
+with tmp1 as ( select name from person where name = 'e'),
+tmp2 as (insert into person (name, age, parent) values ('e', 5, 'b') on conflict do nothing returning name)
+select * from tmp1
+union all
+select * from tmp2;

# 2021-01-11 15:36:50.673608
+select * from person;

# 2021-01-11 15:36:53.147665
+with tmp1 as ( select name from person where name = 'e'),
+tmp2 as (insert into person (name, age, parent) values ('e', 5, 'b') on conflict do nothing returning name)
+select * from tmp1
+union all
+select * from tmp2;

# 2021-01-12 11:22:27.796424
+\d person;

# 2021-01-12 11:22:34.953016
+select * from person;

# 2021-01-12 11:22:51.626764
+select * from person where age < 4;

# 2021-01-12 11:22:59.860439
+select * from person where age < 4 and parent=null;

# 2021-01-12 11:23:05.027538
+select * from person where age < 4 and parent = null;

# 2021-01-12 11:39:28.434622
+select * from person where age < 4 and parent is null;

# 2021-01-14 16:44:55.593922
+select * from user;

# 2021-01-14 16:45:00.107010
+select * from public.user;

# 2021-01-14 16:56:41.517144
+select * from group;

# 2021-01-14 16:56:45.139008
+select * from public.group;

# 2021-01-14 17:22:10.084356
+select * from public.user where id = '17202f90-5652-11eb-a1f2-005056be277d'
+;

# 2021-01-15 12:43:48.550963
+\d

# 2021-01-15 12:43:55.784582
+\d scope;

# 2021-01-15 12:44:00.012732
+\d agent;

# 2021-01-15 12:44:10.747372
+\d person;

# 2021-01-15 12:44:15.573724
+\d

# 2021-01-15 12:44:50.192001
+create table role(
+id serial primary key,
+other int);

# 2021-01-15 12:45:23.154726
+create table user_role(
+name varchar)
+inherits (role);

# 2021-01-15 12:45:36.082085
+create table field_role(
+field varchar)
+inherits (role);

# 2021-01-15 12:45:47.389813
+insert into role (other) values (10);

# 2021-01-15 12:45:52.652259
+select * from role;

# 2021-01-15 12:45:58.920079
+select * from user_role;

# 2021-01-15 12:46:15.854345
+insert into user_role value (other, name) values (1, 'a');

# 2021-01-15 12:46:22.533947
+insert into user_role (other, name) values (1, 'a');

# 2021-01-15 12:46:32.141766
+insert into user_role (other, name) values (1, 'b');

# 2021-01-15 12:46:35.933578
+insert into user_role (other, name) values (2, 'c');

# 2021-01-15 12:46:38.049475
+insert into user_role (other, name) values (2, 'd');

# 2021-01-15 12:46:57.906315
+insert into field_role (other, field) values (2, 'x');

# 2021-01-15 12:47:00.795167
+insert into field_role (other, field) values (2, 'y');

# 2021-01-15 12:47:04.632958
+insert into field_role (other, field) values (3, 'z');

# 2021-01-15 12:47:15.001362
+select * from user where other = 2;

# 2021-01-15 12:47:20.741906
+select * from role where other = 2;

# 2021-01-15 12:47:40.067083
+select * from user_role where other = 2;

# 2021-01-15 12:48:02.906221
+delete role where role.id = 4;

# 2021-01-15 12:48:23.821979
+delete from role where role.id = 4;

# 2021-01-15 12:48:29.996498
+select * from user_role where other = 2;

# 2021-01-15 12:48:34.003292
+select * from role where other = 2;

# 2021-01-16 16:52:40.465161
+select * from scheme;

# 2021-01-16 16:53:47.841975
+select * from rule where scheme_id = (select id from scheme where name = 'Scheme 1');

# 2021-01-16 16:54:04.761071
+select * from rule where scheme_id = (select id from scheme where name = 'Scheme 1.1');

# 2021-01-16 16:54:30.723502
+select * from scope;

# 2021-01-16 16:54:58.599446
+\e

# 2021-01-16 16:56:33.581867
+with recursive temp as (
+  select scheme.*
+    from scheme
+    left join scope on scope.id = scheme.scope_id
+    where scheme.scope_id = '6c2f664c-57e0-11eb-adb6-0242ac110005'
+  union
+    select scheme.*
+        from scheme
+        left join scope sc on sc.id = scheme.scope_id
+        inner join temp on scheme.id = temp.parent_id
+  ) select * from temp;

# 2021-01-16 16:57:59.596794
+select * from role_mapping where scheme_id = '6c2fb480-57e0-11eb-bc49-0242ac110005';

# 2021-01-16 19:19:11.309173
+\d

# 2021-01-16 19:19:22.114910
+select * from scheme;

# 2021-01-16 19:20:13.266428
+\d person;

# 2021-01-16 19:20:27.364369
+\d

# 2021-01-16 19:20:33.976628
+\d role;

# 2021-01-16 19:20:36.883262
+\d agent;

# 2021-01-16 19:20:46.865500
+\d scope;

# 2021-01-16 19:20:53.269921
+\d

# 2021-01-16 19:20:56.449886
+\d agent;

# 2021-01-16 19:21:04.811140
+\d scope;

# 2021-01-16 19:21:27.476829
+select * from scope;

# 2021-01-16 19:25:15.569975
+insert into scope (a,b,c) values (1,4, (select id from scope where c = 3));

# 2021-01-16 19:25:18.410886
+select * from scope;

# 2021-01-16 19:25:27.059976
+insert into scope (a,b,c) values (1,4, (select id from scope where c = 30));

# 2021-01-16 19:25:31.395331
+select * from scope;

# 2021-01-16 19:25:36.580692
+insert into scope (a,b,c) values (1,4, (select id from scope where c = 30));

# 2021-01-16 19:25:38.836780
+select * from scope;

# 2021-01-16 23:01:36.563743
+\d scope;

# 2021-01-16 23:01:42.724310
+select * from scope;

# 2021-01-16 23:02:33.324773
+select * from scope where b = 2;

# 2021-01-16 23:02:50.647076
+select * from scope where a = 1;

# 2021-01-16 23:03:24.158256
+with recursive tmp as (
+select scope.* from scope where c = 4
+union
+select scope.* from scope inner join tmp on tmp.b = scope.b or tmp.a = scope.a
+) select * from tmp;

# 2021-01-19 16:28:16.895614
+\d

# 2021-01-19 16:28:23.871777
+select * from scope;

# 2021-01-19 16:28:32.277425
+select * from person;

# 2021-01-19 16:31:01.913819
+with scope as (select * from scope where scope.id = 1)
+update person set name = 'xxx' where age = 1 from scope returning scope;

# 2021-01-19 16:31:24.460626
+with scope as (select * from scope where scope.id = 1)
+update person set name = 'xxx' from scope where person.age = 1 returning scope;

# 2021-01-19 16:31:54.306524
+with scope as (select * from scope where scope.id = 1)
+update person set person.age = 100 from scope where person.age = 1 returning scope;

# 2021-01-19 16:32:07.690948
+with scope as (select * from scope where scope.id = 1)
+update person set age = 100 from scope where person.age = 1 returning scope;

# 2021-01-19 16:32:41.240228
+with scope as (select * from scope where scope.id = 1)
+update person set age = 111 from scope where person.name = 'a' returning scope.*;

# 2021-01-19 16:32:49.839803
+select * from person;

# 2021-01-19 17:29:00.760336
+select * from invite_info;

# 2021-01-19 17:30:47.488065
+select * from invite_info where user_id = '9388e37f-4e2d-40f4-9a5a-d55f44c7d44c';

# 2021-01-19 17:34:08.891292
+select * from invite_info;

# 2021-01-19 19:26:48.248413
+with recursive tmp as (
+select scope.* from scope where c = 4
+union
+select scope.* from scope inner join tmp on tmp.b = scope.b or tmp.a = scope.a
+) select * from tmp;

# 2021-01-19 19:26:58.038912
+with recursive tmp as (
+select scope.* from scope where c = 4
+union
+select scope.* from scope inner join tmp on tmp.b = scope.b or tmp.a = scope.a
+) select * from tmp \e

# 2021-01-19 19:28:10.936352
+select * from scope as s
+left join person p on s.id = person.age
+where person.name = 'b';

# 2021-01-19 19:28:19.634808
+select * from person;

# 2021-01-19 19:28:34.657477
+select * from scope;

# 2021-01-19 19:28:45.497082
+select * from scope as s
+left join person p on s.id = person.age
+where person.name = 'b';

# 2021-01-19 19:28:54.978886
+select * from scope as s
+left join person p on s.id = p.age
+where person.name = 'b';

# 2021-01-19 19:29:01.050026
+select * from scope as s
+left join person p on s.id = p.age
+where p.name = 'b';

# 2021-01-19 19:29:23.840077
+select person.*, scope.* from scope as s
+left join person p on s.id = p.age
+where p.name = 'b';

# 2021-01-19 19:29:33.905435
+select p.*, s.* from scope as s
+left join person p on s.id = p.age
+where p.name = 'b';

# 2021-01-19 19:30:54.727427
+select p.*, ':', s.* from scope as s
+left join person p on s.id = p.age
+where p.name = 'b';

# 2021-01-19 21:48:20.604952
+\e

# 2021-01-19 21:49:09.420710
+select user.*, info.start_issue_id as info_start_issue_id, info.description as info_description
+from xxx as info
+left join scope user on user.id = info.user_id
+where info.user_id = 'a';

# 2021-01-20 09:48:59.565409
+select p.*, ':', s.* from scope as s
+left join person p on s.id = p.age
+where p.name = 'b';

# 2021-01-20 09:49:08.036981
+select p.*, ':', s.* from scope as s
+left join person p on s.id = p.age
+where p.name = 'a';

# 2021-01-20 09:49:17.965830
+select * from person;

# 2021-01-20 09:49:42.389551
+select p.*, s.* from scope as s
+left join person p on s.id = p.age
+where p.name = 'a';

# 2021-01-20 09:49:53.710963
+select * from person where name = 'a';

# 2021-01-20 09:50:03.545933
+select p.*, s.* from scope as s
+ join person p on s.id = p.age
+where p.name = 'a';

# 2021-01-20 09:50:25.370357
+select * scope;

# 2021-01-20 09:50:28.756257
+select * from scope;

# 2021-01-20 09:50:49.777525
+select p.*, s.* from scope as s
+left join person p on s.id = p.age
+where p.name = 'a';

# 2021-01-20 09:51:00.928568
+select p.*, s.* from scope as s
+right join person p on s.id = p.age
+where p.name = 'a';

# 2021-01-20 09:51:22.510957
+select p.*, s.* from scope as s
+left join person p on p.age = s.id
+where p.name = 'a';

# 2021-01-20 09:51:44.411124
+select  s.*, p.* from scope as s
+left join person p on p.age = s.id
+where p.name = 'a';

# 2021-01-20 09:51:53.771678
+select  s.*, p.* from scope as s
+right join person p on p.age = s.id
+where p.name = 'a';

# 2021-01-21 17:57:54.748592
+select *, COUNT(*) OVER() AS full_count from scope;

# 2021-01-22 08:50:25.739811
+\d

# 2021-01-22 08:50:31.145810
+\d agent;

# 2021-01-22 08:50:37.852929
+select * from agent;

# 2021-01-22 08:50:46.256596
+select * from agens;
+n;

# 2021-01-22 08:50:50.025600
+select * from person;

# 2021-01-22 08:50:55.328431
+select * from role;

# 2021-01-22 08:52:25.553021
+select * from person, role where person.age = role.id;

# 2021-01-22 08:52:43.009512
+select person.* from person, role where person.age = role.id;

# 2021-01-22 08:54:08.517614
+select person.* from person, role where person.age = role.other;

# 2021-01-22 08:54:27.226703
+select district(person.*) from person, role where person.age = role.other;

# 2021-01-22 08:54:34.753136
+select person.* from person, role where person.age = role.other;

# 2021-01-22 08:54:55.524870
+select district(person.id), person.* from person, role where person.age = role.other;

# 2021-01-22 08:55:27.919133
+select district on person.id, person.* from person, role where person.age = role.other;

# 2021-01-22 08:55:43.108712
+select district on (person.id), person.* from person, role where person.age = role.other;

# 2021-01-22 08:56:11.326183
+select district (person.id) from person, role where person.age = role.other;

# 2021-01-22 08:56:28.848115
+select distrinct on (person.id), person.* from person, role where person.age = role.other;

# 2021-01-22 08:56:35.483347
+select distinct on (person.id), person.* from person, role where person.age = role.other;

# 2021-01-22 08:56:41.413919
+select distinct on (person.id) from person, role where person.age = role.other;

# 2021-01-22 08:58:44.628351
+create talbe u (
+id serial primary key,
+name varchar);

# 2021-01-22 08:58:52.461402
+create table u (
+id serial primary key,
+name varchar);

# 2021-01-22 08:58:57.675722
+create table g (
+id serial primary key,
+name varchar);

# 2021-01-22 08:59:23.754964
+create table m (
+g_id int, u_id int);

# 2021-01-22 08:59:52.389891
+insert into table u (name) values ('a'), ('b'), ('c')
+;

# 2021-01-22 09:00:15.761177
+insert into table u (name) values ('a'), ('b'), ('c');

# 2021-01-22 09:00:19.149786
+insert into  u (name) values ('a'), ('b'), ('c');

# 2021-01-22 09:00:26.022017
+select * from u;

# 2021-01-22 09:00:45.469888
+insert into  g (name) values ('x'), ('y'), ('z'), ('k');

# 2021-01-22 09:01:24.040224
+insert into m (g_id, u_id) values(1, 1), (2,2), (2,3), (3,4);

# 2021-01-22 09:01:27.057539
+select * from u;

# 2021-01-22 09:01:28.521852
+select * from g;

# 2021-01-22 09:01:30.946583
+select * from m;

# 2021-01-22 09:02:21.883819
+select u.* from u, m where m.g_id = 2;

# 2021-01-22 09:02:38.563448
+select u.* from u, m where m.g_id = 2 and u.id = m.u_id;

# 2021-01-22 09:03:15.995145
+select u.* from u, m where m.g_id = 2 and u.id = m.u_id and u.name like 'b';

# 2021-01-23 10:25:34.476082
+\d

# 2021-01-23 10:25:39.018305
+select * from land;

# 2021-01-23 10:25:52.032093
+select * from organization;

# 2021-01-23 10:44:30.446511
+\d

# 2021-01-23 10:44:34.492556
+\d user;

# 2021-01-23 10:50:01.740715
+\d land;

# 2021-01-23 11:20:29.875794
+select * from land;

# 2021-01-23 11:20:35.400662
+select * from organization;

# 2021-01-23 11:20:44.202460
+select * from public.user;

# 2021-01-23 13:48:25.830575
+\d

# 2021-01-23 13:48:36.421607
+\d user_agent;

# 2021-01-23 13:48:45.695454
+select * from agent;

# 2021-01-23 13:48:53.703711
+select * from agent join user_agent;

# 2021-01-23 13:49:02.284562
+select * from user_agent;

# 2021-01-23 13:49:15.539820
+select * from agent left join user_agent;

# 2021-01-23 13:49:30.336828
+select * from agent left join user_agent ua on ua.id = agent.id;

# 2021-01-23 13:49:51.981013
+select agent.*, fa.*, ua.*
+from agent
+left join field_agent fa on fa.id = agent.id
+left join user_agent ua on ua.id = agent.id
+where agent.id in (3,4,5);

# 2021-01-23 13:50:25.099720
+select agent.id, fa.field_key, ua.name
+from agent
+left join field_agent fa on fa.id = agent.id
+left join user_agent ua on ua.id = agent.id
+where agent.id in (3,4,5);

# 2021-01-23 13:56:58.498787
+select agent.id, fa.field_key, ua.name
+from agent
+left join field_agent fa on fa.id = agent.id
+left join user_agent ua on ua.id = agent.id
+where agent.id in (3,4,5)\e

# 2021-01-23 13:57:30.289050
+select a.id, fa.field_key, ua.name
+from agent as a,
+field_agent fa on fa.id = agent.id,
+user_agent ua on ua.id = agent.id,
+where a.id in (3,4,5);

# 2021-01-23 13:57:35.492881
+select a.id, fa.field_key, ua.name
+from agent as a,
+field_agent fa on fa.id = agent.id,
+user_agent ua on ua.id = agent.id,
+where a.id in (3,4,5);\e

# 2021-01-23 13:58:20.303758
+select a.id, fa.field_key, ua.name
+from agent as a, field_agent as fa, user_agent as ua
+where a.id in (3,4,5) and fa.id = agent.id and ua.id = agent.id;

# 2021-01-23 13:58:23.882719
+select a.id, fa.field_key, ua.name
+from agent as a, field_agent as fa, user_agent as ua
+where a.id in (3,4,5) and fa.id = agent.id and ua.id = agent.id;\e

# 2021-01-23 13:58:32.182136
+select a.id, fa.field_key, ua.name
+from agent as a, field_agent as fa, user_agent as ua
+where a.id in (3,4,5) and fa.id = a.id and ua.id = a.id;

# 2021-01-23 13:59:16.726672
+select a.id, fa.field_key, ua.name
+from agent as a, field_agent as fa, user_agent as ua
+where a.id in (3,4,5) and fa.id in (3,4,5) and ua.id in (3,4,5);

# 2021-01-23 13:59:46.030416
+select a.id, fa.field_key, ua.name
+from agent as a, field_agent as fa, user_agent as ua
+where a.id in (3,4,5) and fa.id = a.id and ua.id = a.id;

# 2021-01-23 14:00:09.799822
+select a.id, fa.field_key, ua.name
+from agent as a, field_agent as fa, user_agent as ua
+where a.id in (3,4,5) and fa.id = a.id and ua.id = a.id;\e

# 2021-01-23 14:00:20.196698
+select a.id, fa.field_key, ua.name
+from agent as a, field_agent as fa, user_agent as ua
+where a.id in (3,4,5) and (fa.id = a.id or ua.id = a.id);

# 2021-01-23 15:04:50.639338
+select * from scheme;

# 2021-01-23 15:05:34.760030
+select * from mapping_field_user where scheme_id = '12c50712-5d51-11eb-b4f1-0242ac110005';

# 2021-01-23 15:05:53.341225
+select * from role_mapping where scheme_id = '12c50712-5d51-11eb-b4f1-0242ac110005';

# 2021-01-23 15:08:42.052521
+select * from role_mapping where scheme_id = '1d244fb4-5d52-11eb-9712-0242ac110003';

# 2021-01-25 09:46:13.025078
+\d

# 2021-01-25 09:46:19.341365
+select * from organization;

# 2021-01-25 09:47:40.354004
+\x

# 2021-01-25 09:47:42.404261
+select * from organization;

# 2021-01-25 09:47:53.675581
+\o ~/tmp

# 2021-01-25 09:48:03.778443
+\o ~/ndl/temp

# 2021-01-25 09:48:07.723533
+select * from organization;

# 2021-01-25 09:48:26.953425
+select * from user;

# 2021-01-25 09:48:33.144213
+select * from public.user;

# 2021-01-25 09:59:47.642882
+\h

# 2021-01-25 09:59:52.217741
+\?

# 2021-01-25 10:00:04.840583
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-25 10:00:12.459268
+\?

# 2021-01-25 10:00:46.712168
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-25 10:02:35.249540
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-25 11:08:22.619068
+select * from scheme;

# 2021-01-25 11:08:32.654622
+select * from perm_scheme;

# 2021-01-25 11:39:55.296325
+select * from group;

# 2021-01-25 11:39:59.214971
+select * from public.group;

# 2021-01-25 11:40:24.486682
+select * from public.scope
+;

# 2021-01-25 11:43:38.702745
+select * from public.scope;

# 2021-01-25 12:05:52.356312
+select * from public.scheme;

# 2021-01-25 12:05:59.805444
+select * from public.perm_scheme;

# 2021-01-25 12:07:02.790434
+select * from public.rule;

# 2021-01-25 12:07:08.319072
+select * from public.role_mapping;

# 2021-01-25 12:07:12.429598
+select * from role;

# 2021-01-25 12:14:28.786244
+select * from scheme;

# 2021-01-25 12:14:38.966582
+select * from scheme where id = '09b13cd2-5ecc-11eb-8887-0242ac110005';

# 2021-01-25 12:17:24.588327
+select * from scheme;

# 2021-01-25 17:48:54.338212
+select * from scope;

# 2021-01-25 17:49:28.793856
+\d scope;

# 2021-01-25 17:50:04.110292
+insert into scope (organization_id, workspace_id, project_id) values (null, null, null);

# 2021-01-25 17:50:08.379025
+select * from scope;

# 2021-01-25 17:50:38.045375
+delete from scope where id = '14ad327e-5efb-11eb-b70e-005056be277d';

# 2021-01-25 17:50:41.061627
+select * from scope;

# 2021-01-25 18:00:58.367371
+\d scope;

# 2021-01-25 18:37:55.429968
+insert into scope (organization_id, workspace_id, project_id) values ('', '', '');

# 2021-01-25 18:51:25.159823
+select * from scope;

# 2021-01-25 18:53:08.059726
+uuid_nil()
+;

# 2021-01-25 18:53:17.160147
+select uuid_nil();

# 2021-01-25 18:56:08.432980
+\d scope;

# 2021-01-25 18:57:02.895816
+select * from scope;

# 2021-01-25 18:57:10.507204
+\d scope;

# 2021-01-25 18:57:39.034360
+insert into scope (organization_id, workspace_id, project_id) values (uuid_nil(), uuid_nil(), uuid_nil());

# 2021-01-25 18:58:18.948768
+insert into organization (id) values (uuid_nil());

# 2021-01-25 18:58:33.703318
+insert into organization (id, key) values (uuid_nil(),'');

# 2021-01-25 18:58:51.398938
+insert into organization (id, key, owner_whoru_id) values (uuid_nil(),'', uuid_nil());

# 2021-01-25 18:58:55.265380
+insert into scope (organization_id, workspace_id, project_id) values (uuid_nil(), uuid_nil(), uuid_nil());

# 2021-01-25 19:53:50.341718
+select * from scope;

# 2021-01-25 19:54:01.956158
+select * from role;

# 2021-01-25 19:54:31.447277
+select * from a,b,c;

# 2021-01-25 19:54:40.542998
+select * from ('a', 'b', 'c')
+;

# 2021-01-25 19:55:08.037146
+select * from values (1,2,3);

# 2021-01-25 19:56:17.058268
+select * from (values(1), values(2));

# 2021-01-25 19:56:44.010523
+select * from (values(1), (2));

# 2021-01-25 19:57:15.633187
+select * from values(1), (2);

# 2021-01-25 19:57:22.911277
+select * from (values(1), (2)) as x;

# 2021-01-25 19:57:28.659495
+select * from (values(1), (2)) as (x);

# 2021-01-25 19:57:45.774296
+SELECT * FROM (VALUES (1, 'one'), (2, 'two'), (3, 'three')) AS t (num,letter);

# 2021-01-25 19:57:51.980229
+SELECT * FROM (VALUES (1, 'one'), (2, 'two'), (3, 'three')) AS t (num);

# 2021-01-25 19:59:28.393154
+with tmp as (select * from scope limit 1) insert into role (name, scope_id) values ('a', tmp), (b, tmp);

# 2021-01-25 19:59:50.683792
+with tmp as (select * from scope limit 1) insert into role (name, scope_id) values ('a', tmp.id), (b, tmp.id);

# 2021-01-25 20:03:50.702784
+with tmp as (select * from (values ('a', 'b')) left join scope on scope.id = '' ) insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:03:55.464472
+select * from scope;

# 2021-01-25 20:04:02.894656
+with tmp as (select * from (values ('a', 'b')) left join scope on scope.id = '' ) insert into role (name, scope_id) select * from tmp;\e

# 2021-01-25 20:04:45.475381
+with tmp as (select name, scope.id as scope_id from (values ('a'), ('b')) as (name)) left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003' ) insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:05:08.263917
+with tmp as (select name, scope.id as scope_id from (values ('a'), ('b')) as (name)) left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003' ) insert into role (name, scope_id) select * from tmp;\e

# 2021-01-25 20:05:22.605731
+with tmp as (select name, scope.id as scope_id from (values ('a'), ('b')) as (name) left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003' ) insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:05:26.006809
+with tmp as (select name, scope.id as scope_id from (values ('a'), ('b')) as (name) left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003' ) insert into role (name, scope_id) select * from tmp;\e

# 2021-01-25 20:06:04.901002
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('a'), ('b')) as (name) 
+    left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003'
+)
+insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:06:12.228971
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('a'), ('b')) as (name) 
+    left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003'
+)
+insert into role (name, scope_id) select * from tmp;\e

# 2021-01-25 20:06:47.304588
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('a'), ('b')) as t(name) 
+    left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003'
+)
+insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:06:56.318327
+select * from role;

# 2021-01-25 20:07:53.290462
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('a'), ('b')) as t(name) 
+    left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003'
+)
+insert into role (name, scope_id) select * from tmp;\e

# 2021-01-25 20:10:55.460930
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values 
+            ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ), as t(name) 
+    left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003'
+)
+insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:11:01.295949
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values 
+            ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ), as t(name) 
+    left join scope on scope.id = '57abee10-5f0c-11eb-b946-0242ac110003'
+)
+insert into role (name, scope_id) select * from tmp;\e

# 2021-01-25 20:13:53.034228
+\d

# 2021-01-25 20:14:03.137403
+create database landlord;

# 2021-01-25 20:14:09.188682
+\?

# 2021-01-25 20:14:35.925268
+\c landlord;

# 2021-01-25 20:14:39.262288
+\d

# 2021-01-25 20:14:59.406417
+\?

# 2021-01-25 20:15:07.768082
+\

# 2021-01-25 20:15:24.427277
+\T

# 2021-01-25 20:16:05.448600
+\l;

# 2021-01-25 20:16:10.014028
+\c landlord;

# 2021-01-25 20:16:15.425758
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-25 20:16:25.924966
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-25 20:17:12.668154
+\e

# 2021-01-25 20:17:27.180498
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ), as t(name) 
+    left join scope on scope.id = uuid_nil()
+)
+insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:17:32.927863
+select * from scope;

# 2021-01-25 20:17:41.556611
+select * from role;

# 2021-01-25 20:17:45.416163
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ), as t(name) 
+    left join scope on scope.id = uuid_nil()
+)
+insert into role (name, scope_id) select * from tmp;\e

# 2021-01-25 20:18:05.096994
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ) as t(name) 
+    left join scope on scope.id = uuid_nil()
+)
+insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:18:11.234864
+select * from role;

# 2021-01-25 20:18:32.336294
+detele from role;

# 2021-01-25 20:18:39.032566
+drop from role;

# 2021-01-25 20:19:46.216248
+delete from public.role;

# 2021-01-25 20:19:50.628381
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ) as t(name) 
+    left join scope on scope.id = uuid_nil()
+)
+insert into role (name, scope_id) select * from tmp;\e

# 2021-01-25 20:20:13.144731
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ) as t(name) 
+    left join scope on scope.id = '00000000-0000-0000-0000-000000000000'
+)
+insert into role (name, scope_id) select * from tmp;

# 2021-01-25 20:20:17.310318
+select * from role;

# 2021-01-25 20:20:59.206647
+delete from public.role;

# 2021-01-25 20:21:07.277138
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ) as t(name) 
+    left join scope on scope.id = '00000000-0000-0000-0000-000000000000'
+)
+insert into role (name, scope_id) select * from tmp; \e

# 2021-01-25 20:21:39.106880
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ) as t(name) 
+    left join scope on scope.organization_id = '00000000-0000-0000-0000-000000000000'
+)
+insert into role (name, scope_id) select * from tmp; 

# 2021-01-25 20:21:41.971188
+select * from role;

# 2021-01-25 20:23:20.019786
+delete from public.role;

# 2021-01-25 20:23:31.806124
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ) as t(name) 
+    left join scope on scope.organization_id = '00000000-0000-0000-0000-000000000000'
+)
+insert into role (name, scope_id) select * from tmp; \e

# 2021-01-25 20:23:40.000576
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values ('att-create'),
+            ('att-delete-all'),
+            ('att-delete-own'),
+            ('cmt-add'),
+            ('cmt-delete-all'),
+            ('cmt-delete-own'),
+            ('cmt-edit-all'),
+            ('cmt-edit-own'),
+            ('iss-assignable-user'),
+            ('iss-create'),
+            ('iss-update'),
+            ('iss-delete'),
+            ('iss-assign'),
+            ('iss-edit'),
+            ('iss-link'),
+            ('iss-mod-reporter'),
+            ('iss-move'),
+            ('iss-resolve'),
+            ('iss-schedule'),
+            ('iss-set-security'),
+            ('iss-transition'),
+            ('iss-close'),
+            ('org-user-invite'),
+            ('org-perm-scheme-create'),
+            ('org-create-workspace'),
+            ('org-mn-notify'),
+            ('org-edit-role'),
+            ('prj-admin'),
+            ('prj-browse'),
+            ('prj-edit-sprint'),
+            ('prj-manage-sprint'),
+            ('prj-start-complete-sprint'),
+            ('tm-delete-all-worklog'),
+            ('tm-delete-own-worklog'),
+            ('tm-edit-all-worklog'),
+            ('tm-edit-own-worklog'),
+            ('tm-log-for-other'),
+            ('tm-view-all'),
+            ('tm-work-on-issue'),
+            ('vw-manage-watcher'),
+            ('vw-view-voters-watchers')
+        ) as t(name) 
+    left join scope on scope.organization_id = uuid_nil()
+)
+insert into role (name, scope_id) select * from tmp; 

# 2021-01-25 20:23:43.377129
+select * from role;

# 2021-01-25 20:25:29.926112
+select * from scope;

# 2021-01-25 20:37:14.100507
+select * from scope where organization_id = uuid_nil();

# 2021-01-25 20:38:23.183720
+select * from scope;

# 2021-01-25 20:52:21.160343
+select * from scope where organization_id = uuid_nil();

# 2021-01-26 11:25:37.095699
+\d

# 2021-01-26 11:25:47.006741
+select * from scheme;

# 2021-01-26 11:25:51.325330
+select * from role;

# 2021-01-26 11:25:58.296767
+select * from ruel;

# 2021-01-26 11:26:01.237557
+select * from rule;

# 2021-01-26 11:27:33.023302
+with roles as (select role.id, role.name from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id) values select * from roles; \e

# 2021-01-26 11:28:25.682750
+with roles as (select role.id, substring(role.name from 1), null, null from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id) values select * from roles; 

# 2021-01-26 11:28:44.124960
+with roles as (select role.id, substring(role.name from 1), null, null from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id) values select * from roles; \e

# 2021-01-26 11:29:22.053674
+with droles as (select role.id, substring(role.name from 1), null, null from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id) select * from droles; 

# 2021-01-26 11:29:30.559952
+with droles as (select role.id, substring(role.name from 1), null, null from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id) select * from droles; \e

# 2021-01-26 11:30:50.972963
+with droles as (select role.id as role_id, substring(role.name from 1) as action, null, null from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id)
+select * from droles; 

# 2021-01-26 11:30:57.122565
+with droles as (select role.id as role_id, substring(role.name from 1) as action, null, null from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id)
+select * from droles; \e

# 2021-01-26 11:31:09.283286
+with droles as (select role.id as role_id, substring(role.name from 1) as action from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id)
+select * from droles; 

# 2021-01-26 11:31:11.168211
+with droles as (select role.id as role_id, substring(role.name from 1) as action from role)
+insert into rule (role_id, action, notify_scheme_id, perm_scheme_id)
+select * from droles; \e

# 2021-01-26 11:31:18.036620
+with droles as (select role.id as role_id, substring(role.name from 1) as action from role)
+insert into rule (role_id, action)
+select * from droles; 

# 2021-01-26 11:31:23.811339
+select * from droles;

# 2021-01-26 11:31:28.938099
+select * from role;

# 2021-01-26 11:31:41.842101
+select * from rule;

# 2021-01-26 11:32:06.193175
+with droles as (select role.id as role_id, substring(role.name from 1) as action from role)
+insert into rule (role_id, action)
+select * from droles; \e

# 2021-01-26 11:32:16.545577
+select role.id as role_id, substring(role.name from 1) as action from role
+
+
+;

# 2021-01-26 11:32:24.866817
+select role.id as role_id, substring(role.name from 2) as action from role;

# 2021-01-26 11:32:50.123277
+with droles as (select role.id as role_id, substring(role.name from 1) as action from role)
+insert into rule (role_id, action)
+select * from droles; \e

# 2021-01-26 11:45:37.700797
+select * from rule;

# 2021-01-26 11:46:10.986437
+select * from rule where notify_scheme is null and perm_scheme_id is null;

# 2021-01-26 11:46:20.496078
+select * from rule where notify_scheme_id is null and perm_scheme_id is null;

# 2021-01-26 12:10:31.424597
+select * from role;

# 2021-01-26 12:10:37.314503
+select * from rule;

# 2021-01-26 12:26:21.033494
+select * from rule where notify_scheme_id is null and perm_scheme_id is null;

# 2021-01-26 12:26:37.162889
+select * from rule where notify_scheme_id =ANY(null);

# 2021-01-26 12:26:43.556846
+select * from rule where notify_scheme_id =ANY(NULL);

# 2021-01-26 12:42:29.290007
+select * from rule;

# 2021-01-26 14:33:29.976766
+select * from scope;

# 2021-01-26 14:34:07.628001
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-26 14:34:13.303299
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-26 14:37:54.624584
+select * from organization;

# 2021-01-26 14:38:31.207867
+\T

# 2021-01-26 14:38:38.792043
+\?

# 2021-01-26 14:38:48.379789
+\x

# 2021-01-26 14:38:50.663421
+select * from organization;

# 2021-01-26 15:38:53.633599
+\x

# 2021-01-26 15:38:55.125153
+select * from organization;

# 2021-01-26 15:39:15.641067
+select * from user;

# 2021-01-26 15:39:18.345698
+select * from public.user;

# 2021-01-26 15:43:12.823928
+select * from groups;

# 2021-01-26 15:43:15.202483
+select * from group;

# 2021-01-26 15:43:21.306588
+select * from public."group";

# 2021-01-26 15:43:31.021603
+\x

# 2021-01-26 15:43:32.418036
+select * from public."group";

# 2021-01-26 15:43:55.767336
+SELECT gp.* FROM public.user_group_mapping um" +
+                " LEFT JOIN public.group gp on gp.id = um.group_id" +
+                " WHERE um.user_id=$1\e

# 2021-01-26 15:44:19.528799
+SELECT gp.* FROM public.user_group_mapping um
+LEFT JOIN public.group gp on gp.id = um.group_id
+WHERE um.user_id='8f48bc2a-5fa9-11eb-9542-005056be277d';

# 2021-01-26 15:44:53.709465
+select * from public.user_group_mapping;

# 2021-01-26 15:46:53.599370
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-26 15:47:08.581448
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-26 15:47:48.028821
+select * from public.organization;

# 2021-01-26 15:50:21.903698
+ALTER TABLE public.user_group_mapping ADD CONSTRAINT user_group_uq UNIQUE (group_id,user_id);
+

# 2021-01-26 15:51:03.051638
+select * from public.organization;

# 2021-01-26 15:51:05.243112
+\x

# 2021-01-26 15:51:06.753893
+select * from public.organization;

# 2021-01-26 16:29:26.315094
+select * from public.role_mapping where scheme_id = 'a92f4bea-5fb3-11eb-a3a2-005056be277d';

# 2021-01-26 16:29:36.874999
+select * from public.role_mapping where scheme_id = 'a92f4bea-5fb3-11eb-a3a2-005056be277d';\e

# 2021-01-26 16:30:05.873829
+select * from public.role_mapping as rm
+left join role on role.id = rm.role_id
+where scheme_id = 'a92f4bea-5fb3-11eb-a3a2-005056be277d';

# 2021-01-26 16:31:54.201889
+select * from scheme;

# 2021-01-26 16:32:02.248660
+select * from public.role;

# 2021-01-26 16:32:28.800784
+select * left join scope on scope.id = role.scope_id from public.role;

# 2021-01-26 16:32:32.330482
+select * left join scope on scope.id = role.scope_id from role;

# 2021-01-26 16:32:49.500703
+select * from role left join scope on scope.id = role.scope_id;

# 2021-01-26 16:33:52.458152
+select * from scheme;

# 2021-01-26 16:34:11.107363
+select * from role_mapping;

# 2021-01-26 16:35:45.948210
+\e

# 2021-01-26 16:36:32.835737
+  select rm.id, rm.scheme_id, rm.role_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+  from " + mappingSchemeTableName + " as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d';

# 2021-01-26 16:36:37.260447
+  select rm.id, rm.scheme_id, rm.role_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+  from " + mappingSchemeTableName + " as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d';\e

# 2021-01-26 16:36:46.823775
+select rm.id, rm.scheme_id, rm.role_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d';

# 2021-01-26 16:37:26.777083
+select rm.id, rm.scheme_id, rm.role_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d';\e

# 2021-01-26 16:37:50.820937
+select rm.id, rm.scheme_id, rm.role_id,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d';

# 2021-01-26 16:38:13.822170
+select rm.id, rm.scheme_id, rm.role_id,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d' limit 1;

# 2021-01-26 16:38:39.604829
+select * from role where id = 'e44dec14-5fa8-11eb-a94a-005056be277d';

# 2021-01-26 16:38:49.325499
+select * from role;

# 2021-01-26 16:41:35.558755
+select rm.id, rm.scheme_id, rm.role_id,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d';

# 2021-01-26 16:48:46.806297
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-26 16:48:50.970192
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-26 16:50:04.208487
+select rm.id, rm.scheme_id, rm.role_id,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d';

# 2021-01-26 16:50:11.595931
+select * from scheme;

# 2021-01-26 16:50:20.831821
+select * from organization;

# 2021-01-26 16:50:25.519197
+select * from scheme;

# 2021-01-26 16:50:34.403047
+select * from organization;

# 2021-01-26 16:50:39.422461
+select * from scheme;

# 2021-01-26 16:51:01.373199
+select rm.id, rm.scheme_id, rm.role_id,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id='a92f4bea-5fb3-11eb-a3a2-005056be277d'\e

# 2021-01-26 16:51:12.820791
+select rm.id, rm.scheme_id, rm.role_id,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id= 'f03526ce-5fbb-11eb-870c-005056be277d';

# 2021-01-26 17:11:57.560034
+with tmp as (
+    select name, scope.id as scope_id 
+    from (values
+            ('/notify-iss-create'),
+            ('/notify-iss-update'),
+            ('/notify-iss-assigned'),
+            ('/notify-iss-resolved'),
+            ('/notify-iss-closed'),
+            ('/notify-iss-commented'),
+            ('/notify-iss-comment-edited'),
+            ('/notify-iss-comment-deleted'),
+            ('/notify-iss-reopened'),
+            ('/notify-iss-deleted'),
+            ('/notify-iss-moved'),
+            ('/notify-iss-worklog-created'),
+            ('/notify-iss-worklog-started'),
+            ('/notify-iss-worklog-stopped'),
+            ('/notify-iss-worklog-updated'),
+            ('/notify-iss-worklog-deleted'),
+            ('/notify-generic')
+ ) as t(name)
+    left join scope on scope.organization_id = uuid_nil()
+)
+insert into role (name, scope_id) select * from tmp;

# 2021-01-26 17:13:13.841386
+select * from role;

# 2021-01-26 17:13:24.740252
+select * from scope;

# 2021-01-26 17:13:49.960479
+select * from role where scope_id = 'b3297848-5fbb-11eb-b72b-005056be277d';

# 2021-01-26 21:52:48.484186
+select rm.id, rm.scheme_id, rm.role_id,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id= 'f03526ce-5fbb-11eb-870c-005056be277d'\e

# 2021-01-26 21:53:06.021094
+select rm.id, rm.scheme_id, rm.role_id,
+  role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id,
+  mu.user_id as user_id, mg.group_id as group_id, mfu.field_key as field_user, mfg.field_key as field_group
+  from role_mapping as rm
+  left join mapping_user mu on mu.id = rm.id 
+  left join mapping_group mg on mg.id = rm.id 
+  left join mapping_field_user mfu on mfu.id = rm.id 
+  left join mapping_field_group mfg on mfg.id = rm.id 
+  left join role on rm.role_id = role.id
+  where rm.scheme_id= 'ef966488-5fe5-11eb-a84f-0242ac110003';

# 2021-01-26 21:53:18.176645
+select * from role_mapping;

# 2021-01-26 21:53:49.823635
+select * from role_mapping left join scheme s on s.id = role_mapping.scheme_id;

# 2021-01-26 22:44:34.385468
+select * from notify_scheme;

# 2021-01-26 22:44:39.460534
+select * from perm_scheme;

# 2021-01-26 22:52:12.264781
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-26 22:52:15.640295
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-26 22:52:33.860392
+select * from scheme;

# 2021-01-26 22:52:41.052345
+select * from role;

# 2021-01-26 22:52:49.284654
+select count(1) from role;

# 2021-01-26 23:13:08.603075
+select * from public.user;

# 2021-01-26 23:13:37.499435
+drop from public.user where id = '18f0bd6e-5ff1-11eb-819e-005056be277d';

# 2021-01-26 23:13:43.940156
+delete from public.user where id = '18f0bd6e-5ff1-11eb-819e-005056be277d';

# 2021-01-26 23:13:47.366722
+select * from public.user;

# 2021-01-27 14:13:10.868468
+-- ALTER TABLE public.mapping_group DROP CONSTRAINT IF EXISTS mapping_group_id CASCADE;

# 2021-01-27 14:13:10.903231
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);

# 2021-01-27 14:15:06.983720
+\e

# 2021-01-27 14:16:16.742495
+DELETE FROM mapping_group_id a
+WHERE a.id <> (SELECT min(b.ctid)
+                 FROM   mapping_group_id b
+                 WHERE  a.scheme_id = b.scheme_id and a.group_id = b.group_id and a.role_id = b.role_id);
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);

# 2021-01-27 14:16:22.875022
+DELETE FROM mapping_group_id a
+WHERE a.id <> (SELECT min(b.ctid)
+                 FROM   mapping_group_id b
+                 WHERE  a.scheme_id = b.scheme_id and a.group_id = b.group_id and a.role_id = b.role_id);
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);\e

# 2021-01-27 14:16:33.055736
+DELETE FROM public.mapping_group_id a
+WHERE a.id <> (SELECT min(b.ctid)
+                 FROM   public.mapping_group_id b
+                 WHERE  a.scheme_id = b.scheme_id and a.group_id = b.group_id and a.role_id = b.role_id);
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);

# 2021-01-27 14:16:53.565733
+DELETE FROM public.mapping_group_id a
+WHERE a.id <> (SELECT min(b.ctid)
+                 FROM   public.mapping_group_id b
+                 WHERE  a.scheme_id = b.scheme_id and a.group_id = b.group_id and a.role_id = b.role_id);
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);\e

# 2021-01-27 14:17:02.637299
+DELETE FROM public.mapping_group a
+WHERE a.id <> (SELECT min(b.ctid)
+                 FROM   public.mapping_group b
+                 WHERE  a.scheme_id = b.scheme_id and a.group_id = b.group_id and a.role_id = b.role_id);
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);

# 2021-01-27 14:17:06.268883
+DELETE FROM public.mapping_group a
+WHERE a.id <> (SELECT min(b.ctid)
+                 FROM   public.mapping_group b
+                 WHERE  a.scheme_id = b.scheme_id and a.group_id = b.group_id and a.role_id = b.role_id);
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);\e

# 2021-01-27 14:17:11.772664
+DELETE FROM public.mapping_group a
+WHERE a.id != (SELECT min(b.ctid)
+                 FROM   public.mapping_group b
+                 WHERE  a.scheme_id = b.scheme_id and a.group_id = b.group_id and a.role_id = b.role_id);
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);

# 2021-01-27 14:17:57.869278
+ALTER TABLE public.mapping_group ADD CONSTRAINT mapping_group_id UNIQUE (scheme_id,group_id,role_id);

# 2021-01-27 14:19:51.361773
+delete from public.role_mapping;

# 2021-01-27 14:20:22.233202
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-27 14:20:27.754365
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-27 14:21:14.298660
+select * from organization;

# 2021-01-27 14:21:48.306913
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-27 14:22:09.076871
+select * from organization;

# 2021-01-27 14:22:53.258327
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-27 14:22:57.181842
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-27 14:24:23.067369
+select * from organization;

# 2021-01-27 14:28:43.596816
+select * from public.user;

# 2021-01-27 14:32:09.561275
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-27 14:32:14.205085
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-27 14:33:48.793354
+select * from public.user;

# 2021-01-27 14:33:53.139697
+select * from organization;

# 2021-01-27 14:36:18.834167
+select * from user;

# 2021-01-27 14:36:22.783142
+select * from public.users;

# 2021-01-27 14:36:24.415217
+select * from public.user;

# 2021-01-27 14:36:33.864839
+select * from public.role;

# 2021-01-27 14:37:21.189034
+select * from public.users;

# 2021-01-27 14:37:24
+select * from public.user;

# 2021-01-27 14:39:24.291158
+select * from public.rule;

# 2021-01-27 14:48:18.175897
+select * from public.user;

# 2021-01-27 15:00:59.558180
+select * from public.role where role.id = 4a09de18-6072-11eb-8677-005056be277d'\e

# 2021-01-27 15:01:18.245207
+select * from public.role_mapping where role_id = '4a09de18-6072-11eb-8677-005056be277d' ;

# 2021-01-27 15:02:04.364958
+select * from public.role_mapping where role_id = '4a09de18-6072-11eb-8677-005056be277d' ;\e

# 2021-01-27 15:02:11.543110
+select * from public.rule where role_id = '4a09de18-6072-11eb-8677-005056be277d' ;

# 2021-01-27 15:58:09.062947
+select * from rule where scheme_id = 'ac68bd62-607d-11eb-abdd-0242ac110003';

# 2021-01-27 15:58:15.698567
+select * from rule where perm_scheme_id = 'ac68bd62-607d-11eb-abdd-0242ac110003';

# 2021-01-27 15:58:22.950922
+select * from rule;

# 2021-01-27 15:58:38.658226
+select * from rule where notify_scheme_id = 'ac68bd62-607d-11eb-abdd-0242ac110003';

# 2021-01-27 15:59:00.609487
+select * from rule join role where role.id = rule.role_id where notify_scheme_id = 'ac68bd62-607d-11eb-abdd-0242ac110003';

# 2021-01-27 15:59:07.622721
+select * from rule join role on role.id = rule.role_id where notify_scheme_id = 'ac68bd62-607d-11eb-abdd-0242ac110003';

# 2021-01-28 09:15:44.721095
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-28 09:15:49.228425
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-28 09:32:48.867479
+select * from organization;

# 2021-01-28 09:37:35.048819
+\d

# 2021-01-28 09:37:41.138162
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-28 09:37:47.300203
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-28 09:45:43.577282
+select * from public.user;

# 2021-01-28 10:33:14.815277
+select * from role_mapping;

# 2021-01-28 10:33:22.745725
+select * from scheme;

# 2021-01-28 10:41:21.381183
+select * from scheme left join role_mapping rm on rm.scheme_id = scheme.id;

# 2021-01-28 10:41:28.659099
+select * from scheme left join role_mapping rm on rm.scheme_id = scheme.id group by scheme.id;

# 2021-01-28 10:41:46.267621
+select id from scheme left join role_mapping rm on rm.scheme_id = scheme.id;

# 2021-01-28 10:41:50.663738
+select scheme.id from scheme left join role_mapping rm on rm.scheme_id = scheme.id;

# 2021-01-28 10:41:59.093407
+select scheme.id, count(1) from scheme left join role_mapping rm on rm.scheme_id = scheme.id;

# 2021-01-28 10:42:26.139934
+select scheme.id, COUNT(1) from scheme left join role_mapping rm on rm.scheme_id = scheme.id group by scheme.id;

# 2021-01-28 10:42:46.601113
+select scheme.id, COUNT(1), * from scheme left join role_mapping rm on rm.scheme_id = scheme.id group by scheme.id;

# 2021-01-28 10:42:54.562378
+select scheme.id, COUNT(1), scheme.name from scheme left join role_mapping rm on rm.scheme_id = scheme.id group by scheme.id;

# 2021-01-28 11:01:42.359854
+select * from organization;

# 2021-01-28 11:05:49.652910
+select * from public.user;

# 2021-01-28 11:16:02.035611
+select scheme.id, COUNT(1), scheme.name from scheme left join role_mapping rm on rm.scheme_id = scheme.id group by scheme.id;

# 2021-01-28 11:16:20.543228
+select scheme.id, COUNT(1), scheme.name from scheme left join role_mapping rm on rm.scheme_id = scheme.id where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;

# 2021-01-28 11:18:34.729751
+select scheme.id, COUNT(1), scheme.name from scheme left join role_mapping rm on rm.scheme_id = scheme.id where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; \e

# 2021-01-28 11:18:41.856786
+select scheme.id, COUNT(1) as useCount, scheme.name from scheme left join role_mapping rm on rm.scheme_id = scheme.id where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; 

# 2021-01-28 11:28:25.765450
+select scheme.id, COUNT(1) as useCount, scheme.name from scheme left join role_mapping rm on rm.scheme_id = scheme.id where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; \e

# 2021-01-28 11:28:58.539438
+select scheme.id, COUNT(1) as useCount, scheme.name 
+from scheme
+left join role_mapping rm using(rm.scheme_id)
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; 

# 2021-01-28 11:29:04.059828
+select scheme.id, COUNT(1) as useCount, scheme.name 
+from scheme
+left join role_mapping rm using(rm.scheme_id)
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; \e

# 2021-01-28 11:29:07.930641
+select scheme.id, COUNT(1) as useCount, scheme.name 
+from scheme
+left join role_mapping rm using(scheme_id)
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; 

# 2021-01-28 11:29:49.850066
+select scheme.id, COUNT(1) as useCount, scheme.name 
+from scheme
+left join role_mapping rm using(scheme_id)
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; \e

# 2021-01-28 11:30:20.620043
+select scheme.id, COUNT(1) as use_count, scheme.*
+from scheme
+left join role_mapping rm on rm.schem_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; 

# 2021-01-28 11:30:23.206845
+select scheme.id, COUNT(1) as use_count, scheme.*
+from scheme
+left join role_mapping rm on rm.schem_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; \e

# 2021-01-28 11:30:29.991988
+select scheme.id, COUNT(1) as use_count, scheme.*
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id; 

# 2021-01-28 11:30:49.375195
+select scheme.id, COUNT(1) as use_count, scheme.*
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;\e

# 2021-01-28 11:30:54.518816
+select COUNT(1) as use_count, scheme.*
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;

# 2021-01-28 11:30:59.713908
+select COUNT(1) as use_count, scheme.*
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;\e

# 2021-01-28 11:31:08.782909
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;

# 2021-01-28 11:31:15.217251
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;\e

# 2021-01-28 11:31:25.858241
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+group by scheme.id;

# 2021-01-28 11:31:36.773080
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;\e

# 2021-01-28 11:32:11.455337
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;

# 2021-01-28 11:32:17.441829
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;\e

# 2021-01-28 11:33:52.417003
+select fs.*, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:34:04.196755
+select * from fileserver;

# 2021-01-28 11:34:06.943121
+select fs.*, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:34:31.454751
+select fs.id, fs.*, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:37:18.296501
+select fs.id, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:37:29.191801
+select fs.id, fs.* COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:37:35.199842
+select fs.id, fs.*, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:37:40.294165
+select fs.id, fs.*, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.*;

# 2021-01-28 11:37:43.713256
+select fs.id, fs.*, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:37:55.492531
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;

# 2021-01-28 11:38:08.416729
+select fs.id, fs.*, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:40:12.945460
+select fs.id, fs.*, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id, fs.created_at;

# 2021-01-28 11:40:30.498846
+select fs.id, COUNT(1) as use_count, fs.*
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:40:37.258047
+select fs.id, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:42:18.551492
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id;

# 2021-01-28 11:43:43.481295
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+where scheme.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d' group by scheme.id ; \e

# 2021-01-28 11:43:51.266398
+select scheme.*, COUNT(1) as use_count
+from scheme
+left join role_mapping rm on rm.scheme_id = scheme.id
+group by scheme.id; 

# 2021-01-28 11:46:30.459173
+ALTER TABLE table_name
+  ADD CONSTRAINT constraint_name
+    PRIMARY KEY (id);\e

# 2021-01-28 11:46:50.124701
+ALTER TABLE fileserver ADD CONSTRAINT fileserver_pk  PRIMARY KEY (id);

# 2021-01-28 11:46:58.477457
+select fs.id, COUNT(1) as use_count
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:47:06.200495
+select fs.id, COUNT(1) as use_count, fs.*
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:47:25.181064
+select COUNT(1) as use_count, fs.*
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:48:02.532842
+ALTER TABLE fileserver ADD CONSTRAINT fileserver_pk  PRIMARY KEY (id); \e

# 2021-01-28 11:48:19.614271
+ALTER TABLE postgre ADD CONSTRAINT postgre_pk  PRIMARY KEY (id); 

# 2021-01-28 11:48:46.097487
+ALTER TABLE elastic ADD CONSTRAINT elastic_pk  PRIMARY KEY (id); 

# 2021-01-28 11:49:08.934621
+ALTER TABLE postgre ADD CONSTRAINT postgre_pk  PRIMARY KEY (id); 

# 2021-01-28 11:49:13.745467
+ALTER TABLE fileserver ADD CONSTRAINT fileserver_pk  PRIMARY KEY (id); \e

# 2021-01-28 11:49:16.109150
+ALTER TABLE fileserver ADD CONSTRAINT fileserver_pk  PRIMARY KEY (id); 

# 2021-01-28 11:49:47.737445
+select COUNT(1) as use_count, fs.*
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;

# 2021-01-28 11:49:56.269653
+select COUNT(1) as use_count, fs.*
+from fileserver as fs
+left join org_resource_mapping mm on mm.resource_id = fs.id
+where fs.id = '209a8a3c-6112-11eb-9d0d-3c6aa77d6e2d'
+group by fs.id;\e

# 2021-01-28 12:14:56.224807
+type;

# 2021-01-28 12:16:06.212075
+alter type public.org_init_state add value 'initialize_resource';

# 2021-01-28 15:37:29.911903
+with tmp as (
+select group_id from user_group_mapping )
+select * from public.user where public.user in tmp;

# 2021-01-28 15:43:38.500878
+\e

# 2021-01-28 15:45:04.194513
+select mm.group_id, usr.*
+from user_group_mapping as mm,
+public.user as usr
+where mm.group_id = '';

# 2021-01-28 15:45:28.622674
+select * from user_group_mapping;

# 2021-01-28 15:45:40.627643
+select mm.group_id, usr.*
+from user_group_mapping as mm,
+public.user as usr
+where mm.group_id = 'e2249590-6111-11eb-9d0d-3c6aa77d6e2d';

# 2021-01-28 15:46:07.770069
+select mm.group_id, usr.*
+from user_group_mapping as mm,
+public.user as usr
+where mm.group_id = 'e2249590-6111-11eb-9d0d-3c6aa77d6e2d';\e

# 2021-01-28 16:20:16.608934
+select mm.group_id, usr.*
+from user_group_mapping as mm,
+public.user as usr
+where mm.group_id = 'e2249590-6111-11eb-9d0d-3c6aa77d6e2d';

# 2021-01-29 09:11:26.359705
+select * from user_group_mapping;

# 2021-01-29 09:11:35.304690
+select * from public.user;

# 2021-01-30 08:51:18.614239
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-01-30 08:51:23.113616
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-01-30 08:52:40.858534
+select * from organization;

# 2021-01-30 08:58:35.781901
+select * from public.user;

# 2021-01-30 08:58:42.171337
+select * from organization;

# 2021-01-30 08:58:46.797970
+select * from public.user;

# 2021-01-30 19:50:45.427991
+select * from public.scheme;

# 2021-02-01 09:09:55.446016
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-01 09:09:58.697163
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-02-01 09:10:08.094163
+select * from public.scheme;

# 2021-02-01 09:10:11.957593
+select * from public.organization;

# 2021-02-01 09:10:18.673282
+select * from public.role;

# 2021-02-01 09:14:10.009908
+select * from public.fileserver;

# 2021-02-01 09:14:39.619624
+insert into public.fileserver (address_adm, address_public) values ( '    "addressPublic": "https://luklak00.com",
+    "addressAdm": "https://nguoidilam.com' \e

# 2021-02-01 09:15:05.710049
+insert into public.fileserver (address_adm, address_public) values ( 
+    'https://nguoidilam.com',
+    'https://luklak00.com');

# 2021-02-01 09:15:14.118444
+select * from public.fileserver;

# 2021-02-01 09:21:34.043731
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-01 09:21:37.385250
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-02-01 09:34:17.840633
+select * from public.user;

# 2021-02-01 09:35:40.977559
+\x

# 2021-02-01 09:35:42.727043
+select * from public.user;

# 2021-02-01 09:36:24.130977
+insert into public.user (username, email, display_name, status, whoru_id, organization_id) values
+('\e

# 2021-02-01 09:39:42.950150
+insert into public.user (username, email, display_name, status, whoru_id, organization_id) values
+('tommy', 'frank18@mailinator.com', 'Thomas Shelby', 'active', 'c8abc300-1d8b-11eb-8067-005056be277d', '46e300af-76cd-4694-a42a-fa52331a41e6'),
+('athur', 'frank19@mailinator.com', 'Arthur Shelby', 'active', '40090534-1d8c-11eb-b36d-005056be277d', '46e300af-76cd-4694-a42a-fa52331a41e6'),
+('poly', 'frank21@mailinator.com', 'Polly', 'active', '7122c90e-1da3-11eb-8067-005056be277d', '46e300af-76cd-4694-a42a-fa52331a41e6');

# 2021-02-01 09:39:48.160188
+select * from public.user;

# 2021-02-01 13:29:38.532408
+\d

# 2021-02-01 13:29:43.221175
+select * from land;

# 2021-02-01 13:30:00.408009
+delete from public.land;

# 2021-02-01 13:30:08.969738
+select * from organization;

# 2021-02-01 13:30:14.353982
+select * from user;

# 2021-02-01 13:30:17.603063
+select * from public.user;

# 2021-02-01 14:33:55.709336
+\d organization;

# 2021-02-01 14:34:02.083389
+\d public.user;

# 2021-02-01 15:54:16.747404
+\e

# 2021-02-01 15:54:27.625239
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org, public.user as usr  left join public.land land on land.id = org.land_id WHERE usr.whoru_id = 'xxx';

# 2021-02-01 15:54:59.748844
+\d organization;

# 2021-02-01 16:02:13.287523
+ \e

# 2021-02-01 16:02:46.028709
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.organization as org,
+     public.user as usr 
+left join public.land land on land.id = org.land_id
+WHERE usr.whoru_id = '';

# 2021-02-01 16:03:19.066144
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.organization as org,
+     public.user as usr 
+left join public.land land on land.id = org.land_id
+WHERE usr.whoru_id = '';\e

# 2021-02-01 16:03:53.485867
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.user as usr 
+left join public.land land on land.id = org.land_id,
+left join public.organization org on org.whoru_id = usr.id
+WHERE usr.whoru_id = '';

# 2021-02-01 16:04:02.678760
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.user as usr 
+left join public.land land on land.id = org.land_id,
+left join public.organization org on org.whoru_id = usr.id
+WHERE usr.whoru_id = '';\e

# 2021-02-01 16:04:09.684669
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.user as usr 
+left join public.land land on land.id = org.land_id,
+public.organization org on org.whoru_id = usr.id
+WHERE usr.whoru_id = '';

# 2021-02-01 16:04:17.278582
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.user as usr 
+left join public.land land on land.id = org.land_id,
+public.organization org on org.whoru_id = usr.id
+WHERE usr.whoru_id = '';\e

# 2021-02-01 16:05:33.779117
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id, 
+WHERE org.whoru_id = '';

# 2021-02-01 16:05:42.491818
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id, 
+WHERE org.whoru_id = '';\e

# 2021-02-01 16:05:47.215537
+SELECT org.*,
+      land.id as land_id,
+      land.domain as land_domain,
+      land.adm_domain as land_adm_domain,
+      land.capacity as land_capacity,
+      land.current_org_number as land_current_org_number,
+      land.created_at as land_created_at,
+      land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id
+WHERE org.whoru_id = '';

# 2021-02-01 20:06:43.609514
+select * from public.organization;

# 2021-02-02 09:28:22.646733
+\d

# 2021-02-02 09:28:33.212879
+\i ~/ndl/buzzin/repo/pg/src/main/resources/init.sql

# 2021-02-02 09:29:49.203091
+\i ~/ndl/buzzin/repo/pg/src/test/resources/database-buzzin.sql

# 2021-02-02 09:33:05.870573
+\d

# 2021-02-02 09:33:13.388028
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-02 09:33:27.151078
+\i ~/ndl/buzzin/repo/pg/src/test/resources/database-buzzin.sql

# 2021-02-02 09:33:49.663051
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-02 09:34:03.016797
+\i ~/ndl/buzzin/repo/pg/src/test/resources/database-buzzin.sql

# 2021-02-02 09:35:56.397640
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-02 09:35:59.721112
+\i ~/ndl/buzzin/repo/pg/src/test/resources/database-buzzin.sql

# 2021-02-02 09:37:02.365205
+\dx

# 2021-02-02 09:38:45.357174
+CREATE EXTENSION IF NOT EXISTS timescaledb;

# 2021-02-02 09:38:54.014297
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-02 09:38:59.707329
+CREATE EXTENSION IF NOT EXISTS timescaledb;

# 2021-02-02 09:39:01.956164
+\dx

# 2021-02-02 09:39:14.669816
+\i ~/ndl/buzzin/repo/pg/src/test/resources/database-buzzin.sql

# 2021-02-02 09:39:38.819668
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-02 09:39:42.315687
+\dx

# 2021-02-02 09:39:47.806579
+CREATE EXTENSION IF NOT EXISTS timescaledb;

# 2021-02-02 09:39:54.470121
+\dx

# 2021-02-02 09:40:10.416163
+\i ~/ndl/buzzin/repo/pg/src/test/resources/database-buzzin.sql

# 2021-02-02 09:41:05.209784
+CREATE EXTENSION IF NOT EXISTS timescaledb;

# 2021-02-02 09:41:09.013967
+\dx

# 2021-02-02 09:41:14.652298
+\i ~/ndl/buzzin/repo/pg/src/test/resources/database-buzzin.sql

# 2021-02-02 09:41:22.256878
+\d

# 2021-02-02 09:41:34.936616
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-02 09:41:36.851306
+\d

# 2021-02-02 09:41:47.366975
+CREATE EXTENSION IF NOT EXISTS timescaledb;

# 2021-02-02 09:41:50.010964
+\dx

# 2021-02-02 09:41:54.706142
+\i ~/ndl/buzzin/repo/pg/src/test/resources/database-buzzin.sql

# 2021-02-02 09:42:16.085228
+\d

# 2021-02-02 09:47:04.761224
+\d notification;

# 2021-02-02 09:47:38.695978
+\d user_marker;

# 2021-02-03 11:25:44.400346
+select * from scope where workspace_id = 'bce3b36e-5eba-11eb-821e-005056be277d';

# 2021-02-03 11:34:43.791600
+select * from organization;

# 2021-02-04 15:29:43.290475
+select * from scheme left join scope sc on sc.id = scheme.scope_id where scheme.id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:30:13.902739
+select * from role_mapping where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:31:10.553205
+select * from role_mapping join role r on r.id = role_mapping.scheme_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:31:18.316909
+select * from role_mapping left join role r on r.id = role_mapping.scheme_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:31:50.667411
+select * from role;

# 2021-02-04 15:31:57.700116
+select * from role where id = ' 983d6398-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:32:03.530765
+select * from role where id = '983d6398-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:32:09.804375
+select * from role_mapping left join role r on r.id = role_mapping.scheme_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:32:29.522988
+select role_mapping.*, r.* from role_mapping left join role r on r.id = role_mapping.scheme_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:32:42.919023
+select role_mapping.*, r.* from role_mapping left join role r on r.id = role_mapping.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:34:10.733745
+select * from role_mapping left join role r on r.id = role_mapping.scheme_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:34:14.879010
+select role_mapping.*, r.* from role_mapping left join role r on r.id = role_mapping.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:35:38.062427
+select * from role_mapping left join role r on r.id = role_mapping.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:35:48.590423
+select * from role where role_id = '18b054d8-6436-11eb-8f03-005056be277d';

# 2021-02-04 15:35:53.588566
+select * from role where id = '18b054d8-6436-11eb-8f03-005056be277d';

# 2021-02-04 15:36:08.051938
+select * from role where id = '983d4da4-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:36:24.674185
+select * from group where id = '18b054d8-6436-11eb-8f03-005056be277d';

# 2021-02-04 15:36:28.956302
+select * from public.group where id = '18b054d8-6436-11eb-8f03-005056be277d';

# 2021-02-04 15:37:49.979619
+select * from public.role_mapping where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:38:18.181149
+select * from public.role_mapping where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d' and role_id = '983d4da4-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:38:40.949785
+select * from public.role_mapping left join role on role.id = role_mapping.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d' and role_id = '983d4da4-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:39:33.417684
+select  from public.role_mapping as rm left join role r on r.id = rm.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d' and role_id = '983d4da4-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:40:10.668803
+select rm.id, r.* from public.role_mapping as rm left join role r on r.id = rm.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d' and role_id = '983d4da4-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:45:05.862144
+delete from role_mapping where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d' and role_id = '983d4da4-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:45:37.869623
+select rm.id, r.* from public.role_mapping as rm left join role r on r.id = rm.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d' and role_id = '983d4da4-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:52:43.527172
+\d public.role_mapping;

# 2021-02-04 15:54:59.569293
+\d+ public.role_mapping;

# 2021-02-04 15:55:09.736775
+\d+ public.mapping_group;

# 2021-02-04 15:55:51.463391
+select rm.id, r.* from public.mapping_group as rm left join role r on r.id = rm.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d' and role_id = '983d4da4-6432-11eb-aa11-005056be277d';

# 2021-02-04 15:56:01.431012
+select rm.id, r.* from public.mapping_group as rm left join role r on r.id = rm.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-04 15:56:16.099277
+select * from public.mapping_group as rm left join role r on r.id = rm.role_id where scheme_id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-05 10:30:12.316866
+select * from scheme where id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-05 10:31:16.069183
+\x

# 2021-02-05 10:31:17.599867
+select * from scheme where id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-05 10:35:00.636325
+select * from scheme where id = '';

# 2021-02-05 10:35:18.124976
+select * from scheme where id = '4d48386e-6436-11eb-8f03-005056be277d';

# 2021-02-05 10:45:06.565359
+select * from scheme where id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-05 10:49:47.799215
+select * from role;

# 2021-02-05 10:52:08.124635
+select * from scheme where id = '298881b0-65fb-11eb-af6b-005056be277d';

# 2021-02-05 10:56:00.648970
+select * from scheme where id = '4f6ba228-6505-11eb-8a92-005056be277d';

# 2021-02-05 10:56:20.726516
+select * from role where scope_id = '4d47dd6a-6436-11eb-9867-005056be277d';

# 2021-02-05 11:05:16.708225
+select * from role where scope_id = '4d47dd6a-6436-11eb-9867-005056be277d';\e

# 2021-02-05 11:06:49.722499
+
+select s.id, s.name, s.description, s.parent_id, s.scope_id, 
+ rule.action, 
+ role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id 
+ from   public.perm_scheme  as s 
+ left join rule on rule.perm_scheme_id = s.id 
+ left join role on rule.role_id = role.id 
+ where s.id = '4d47dd6a-6436-11eb-9867-005056be277d';

# 2021-02-05 11:06:59.797786
+
+select s.id, s.name, s.description, s.parent_id, s.scope_id, 
+ rule.action, 
+ role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id 
+ from   public.perm_scheme  as s 
+ left join rule on rule.perm_scheme_id = s.id 
+ left join role on rule.role_id = role.id 
+ where s.id = '4d47dd6a-6436-11eb-9867-005056be277d';\e

# 2021-02-05 11:07:34.073172
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+from public.perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '4d47dd6a-6436-11eb-9867-005056be277d';

# 2021-02-05 11:07:38.884383
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+from public.perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '4d47dd6a-6436-11eb-9867-005056be277d';\e

# 2021-02-05 11:08:30.802325
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+from public.perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '4d47dd6a-6436-11eb-9867-005056be277d';

# 2021-02-05 11:12:33.147842
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+from public.perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '4f6ba228-6505-11eb-8a92-005056be277d';

# 2021-02-05 11:12:42.871692
+\x

# 2021-02-05 11:12:45.204578
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+from public.perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '4f6ba228-6505-11eb-8a92-005056be277d';

# 2021-02-05 11:17:32.907375
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+from public.perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '4f6ba228-6505-11eb-8a92-005056be277d';\e

# 2021-02-05 11:18:45.255866
+delete from public.rule where action in ( 'att.delete-own', 'att.delete-all', 'vw.view-voters-watchers' ) and perm_scheme_id = '4f6ba228-6505-11eb-8a92-005056be277d';

# 2021-02-05 11:18:48.495722
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+from public.perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '4f6ba228-6505-11eb-8a92-005056be277d';\e

# 2021-02-05 11:18:51.903989
+select s.id, s.name, s.description, s.parent_id, s.scope_id, rule.action,
+role.id as rid, role.name as rname, role.description as rdescription, role.scope_id as rscope_id
+from public.perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '4f6ba228-6505-11eb-8a92-005056be277d';

# 2021-02-05 11:19:39.253718
+\e

# 2021-02-05 11:19:55.887403
+ALTER TABLE public.rule ADD CONSTRAINT role_fk FOREIGN KEY (role_id)
+REFERENCES public.role (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE CASCADE;

# 2021-02-05 11:20:04.818214
+ALTER TABLE public.rule ADD CONSTRAINT role_fk FOREIGN KEY (role_id)
+REFERENCES public.role (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE CASCADE; \e

# 2021-02-05 11:20:57.363910
+ALTER TABLE public.rule DROP CONSTRAINT role_fk;

# 2021-02-05 11:21:01.762346
+ALTER TABLE public.rule ADD CONSTRAINT role_fk FOREIGN KEY (role_id)
+REFERENCES public.role (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE CASCADE; 

# 2021-02-05 15:38:36.386880
+select * from organization;

# 2021-02-05 15:39:36.599862
+\x

# 2021-02-05 15:39:38.787211
+select * from organization;

# 2021-02-05 15:43:58.498227
+ALTER TABLE public."group" ADD CONSTRAINT organization_fk FOREIGN KEY (organization_id)
+REFERENCES public.organization (id) MATCH FULL
+ON DELETE SET NULL ON UPDATE CASCADE;\e

# 2021-02-05 15:48:00.975344
+\d public.group;

# 2021-02-05 15:48:34.051068
+ALTER TABLE public.group DROP CONSTRAINT name_uq;

# 2021-02-05 15:48:41.194063
+ALTER TABLE public."group" ADD CONSTRAINT group_name_uq UNIQUE (organization_id,name);

# 2021-02-07 22:04:07.588314
+\d

# 2021-02-07 22:04:13.472768
+\d group;

# 2021-02-07 22:04:23.319088
+\d organization;

# 2021-02-07 22:11:19.029156
+\i ~/a.sql

# 2021-02-14 09:55:20.364952
+\d group;

# 2021-02-14 09:56:03.147354
+\d role;

# 2021-02-17 14:34:42.413717
+select * from scope;

# 2021-02-17 14:34:54.879581
+select * from scope where workspace_id = 'bce3b36e-5eba-11eb-821e-005056be277d';

# 2021-02-17 14:57:40.681481
+select * from scheme where id = '8213dfe2-6500-11eb-8a92-005056be277d';

# 2021-02-17 14:57:47.150059
+select * from scheme;

# 2021-02-17 14:58:03.453079
+select * from scheme where scope_id = '8213dfe2-6500-11eb-8a92-005056be277d';

# 2021-02-19 15:09:25.389555
+select * from role_mapping limit 1;

# 2021-02-19 15:09:49.328631
+select * from role_mapping where role_id = '601049c8-725a-11eb-8e20-005056be277d';

# 2021-02-19 15:10:05.178120
+select * from role where id = '601049c8-725a-11eb-8e20-005056be277d';

# 2021-02-19 15:10:32.936784
+select * from role left join scope where scope.id = role.scope_id where id = '601049c8-725a-11eb-8e20-005056be277d';

# 2021-02-19 15:10:39.226344
+select * from role left join scope on scope.id = role.scope_id where id = '601049c8-725a-11eb-8e20-005056be277d';

# 2021-02-19 15:10:46.961556
+select * from role left join scope on scope.id = role.scope_id where role.id = '601049c8-725a-11eb-8e20-005056be277d';

# 2021-02-19 15:17:49.487680
+select * from scope where project_id = 'b3872088-710e-11eb-ad65-005056be277d';

# 2021-02-19 15:20:01.803787
+select * from scope;

# 2021-02-19 15:20:32.123821
+select * from scheme where id = '34d97e74-728b-11eb-bbe3-005056be277d';

# 2021-02-19 15:21:14.348560
+select * from scheme left join on scope where scope.id = scheme.scope_id where scheme.id = '34d97e74-728b-11eb-bbe3-005056be277d';

# 2021-02-19 15:21:19.356756
+select * from scheme left join on scope on scope.id = scheme.scope_id where scheme.id = '34d97e74-728b-11eb-bbe3-005056be277d';

# 2021-02-19 15:21:39.150569
+select * from scheme left join scope on scope.id = scheme.scope_id where scheme.id = '34d97e74-728b-11eb-bbe3-005056be277d';

# 2021-02-20 14:46:04.331050
+\d

# 2021-02-20 14:46:21.862663
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-20 14:46:50.444200
+create table a(
+id serial primary key,
+name varchar);

# 2021-02-20 14:47:14.064653
+create table b(
+b int)
+inherits (a);

# 2021-02-20 14:47:18.059135
+\d b;

# 2021-02-20 14:47:34.300391
+create table c(
+c int)
+inherits (a);

# 2021-02-20 14:48:21.094392
+insert into b (name, b) values
+('a', 1)\e

# 2021-02-20 14:48:33.689438
+insert into b (name, b) values
+('a', 1),
+('b', 1),
+('c', 1);

# 2021-02-20 14:48:39.783538
+select * from a;

# 2021-02-20 14:48:44.523961
+select * from b
+;

# 2021-02-20 14:48:48.873739
+select * from only b;

# 2021-02-20 14:49:07.227315
+insert into b (name, b) values
+('a', 1),
+('b', 1),
+('c', 1);\e

# 2021-02-20 14:49:26.934310
+insert into c (name, b) values
+('x', 2),
+('y', 3),
+('z', 4);

# 2021-02-20 14:49:30.544767
+insert into c (name, b) values
+('x', 2),
+('y', 3),
+('z', 4);\e

# 2021-02-20 14:49:35.794211
+insert into c (name, c) values
+('x', 2),
+('y', 3),
+('z', 4);

# 2021-02-20 14:49:38.968866
+select * from only b;

# 2021-02-20 14:49:42.287064
+select * from b;

# 2021-02-20 14:49:44.005329
+select * from c;

# 2021-02-20 14:50:09.528980
+alter table a add constraint name_uq unique;

# 2021-02-20 14:54:36.690777
+alter table a add constraint name_uq unique(name);

# 2021-02-20 14:54:55.659936
+insert into c (name, c) values (a, 11);

# 2021-02-20 14:55:01.107557
+insert into c (name, c) values ('a', 11);

# 2021-02-20 14:55:09.433422
+select * from a;

# 2021-02-20 14:55:15.151169
+select * from b;

# 2021-02-20 14:55:17.303904
+select * from c;

# 2021-02-20 14:55:23.045125
+insert into c (name, c) values ('a', 12);

# 2021-02-20 14:55:33.773863
+select * from c;

# 2021-02-20 14:55:35.581442
+select * from a;

# 2021-02-20 14:55:50.713903
+insert into a (name) values ('a');

# 2021-02-20 14:55:55.765401
+\d a

# 2021-02-20 14:56:13.366087
+\d+

# 2021-02-20 14:56:30.457812
+insert into a (name) values ('a');

# 2021-02-20 14:59:10.965543
+create table d (
+id serial primary key,
+ff int,
+constraint ff_fk foreign key (ff) references a(id)
+);

# 2021-02-20 14:59:13.949255
+\d

# 2021-02-20 14:59:21.870291
+select * from a;

# 2021-02-20 14:59:38.459648
+insert into d (ff) values (10);

# 2021-02-20 14:59:44.579504
+insert into d (ff) values (8);

# 2021-02-20 14:59:51.633154
+insert into d (ff) values (7);

# 2021-02-20 14:59:54.198352
+insert into d (ff) values (9);

# 2021-02-20 15:01:38.615416
+select * from only a where id = 8;

# 2021-02-20 15:01:43.109870
+select * from only a where id = 9;

# 2021-02-20 15:01:48.066652
+select * from only a;

# 2021-02-20 15:01:52.453304
+select * from only b;

# 2021-02-20 15:02:00.057136
+select * from a;

# 2021-02-21 10:59:07.277731
+\d

# 2021-02-22 11:04:31.963026
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql

# 2021-02-22 11:06:15.602581
+\d

# 2021-02-22 11:06:26.910908
+\e

# 2021-02-22 11:06:35.404277
+GRANT ALL PRIVILEGES ON DATABASE fiw TO loplop;

# 2021-02-22 11:06:47.530856
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-02-22 11:06:55.836256
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-22 11:07:04.216921
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-02-22 11:07:43.750192
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-02-22 11:07:47.347441
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-02-22 11:08:05.147986
+select * from role;

# 2021-02-24 08:40:37.187782
+\d

# 2021-02-24 08:40:43.961354
+select * from scheme;

# 2021-02-24 08:40:55.658536
+\x

# 2021-02-24 08:40:57.235106
+select * from scheme;

# 2021-02-24 08:41:37.771515
+\d scheme;

# 2021-02-24 08:41:47.938874
+\d notify_scheme;

# 2021-02-24 09:29:37.517431
+select * from scheme;

# 2021-02-24 09:29:41.978825
+\x

# 2021-02-24 09:29:43.061904
+select * from scheme;

# 2021-02-24 09:31:25.008700
+\x

# 2021-02-24 09:31:26.236523
+select * from scheme;

# 2021-02-24 09:32:54.806881
+select * from notify_scheme where workspace_id = '458b53f8-7648-11eb-8fe3-0242ac110006';

# 2021-02-24 09:35:23.478028
+select * from notify_scheme where workspace_id = 'cc47441a-7648-11eb-905a-0242ac110003';

# 2021-02-24 09:36:23.744509
+\e

# 2021-02-24 09:37:09.353091
+select s.id, s.name, s.description, s.parent_id, s.organization_id, s.workspace_id, s.project_id, 
+rule.action, role.id as rid, role.name as rname, role.description as rdescription,
+role.organization_id as rorganization_id, role.workspace_id as rworkspace_id 
+from notify_scheme as s
+left join rule on rule.notify_scheme_id = s.id 
+left join role on rule.role_id = role.id 
+where s.workspace_id = 'cc47441a-7648-11eb-905a-0242ac110003';

# 2021-02-24 09:39:23.130905
+select * from scheme where workspace_id = '6064093a-7649-11eb-97d0-0242ac110003'

# 2021-02-24 09:39:25.541011
+select * from scheme where workspace_id = '6064093a-7649-11eb-97d0-0242ac110003';

# 2021-02-24 09:39:32.853646
+select * from notify_scheme where workspace_id = '6064093a-7649-11eb-97d0-0242ac110003';

# 2021-02-24 09:39:49.289622
+select * from notify_scheme;

# 2021-02-24 09:42:44.986401
+\x

# 2021-02-24 09:42:48.869311
+select * from notify_scheme;

# 2021-02-24 09:42:53.221163
+\x

# 2021-02-24 09:42:55.698102
+select * from notify_scheme;

# 2021-02-24 09:43:19.406163
+select id, name, organization_id, workspace_id from notify_scheme;

# 2021-02-24 15:18:50.307005
+select * from notify_scheme where id = 'cd88fce4-7678-11eb-aa16-0242ac110003';

# 2021-02-24 15:19:00.764380
+select * from notify_scheme ;

# 2021-02-24 15:20:15.660239
+select * from scheme where id = 'cd88fce4-7678-11eb-aa16-0242ac110003';

# 2021-02-24 15:21:12.826033
+select * from perm_scheme where id = 'cd88fce4-7678-11eb-aa16-0242ac110003';

# 2021-02-24 16:30:36.802654
+select * from issuefield where id = '0757889c-7034-4ad2-9ff0-292dfffe5cc6';

# 2021-02-24 16:31:07.591992
+select * from issuefield;

# 2021-02-25 11:32:29.907887
+select * from scheme;

# 2021-02-25 11:33:43.073216
+select * from notify_scheme ;

# 2021-02-25 11:33:53.322058
+select * from perm_scheme;

# 2021-02-25 11:34:30.460393
+\x

# 2021-02-25 11:34:31.598838
+select * from perm_scheme;

# 2021-02-25 11:34:33.283967
+\x

# 2021-02-25 11:34:37.245745
+select * from perm_scheme;

# 2021-03-01 09:04:33.415027
+select * from issuelink where (issue_id = $1 OR destination_issue = $1) AND is_active = true\e

# 2021-03-01 09:05:08.565854
+select * from issuelink where issue_id = '0c9c5d64-20d7-45fd-ab0e-b13b52f22d91' AND is_active = true;

# 2021-03-01 10:20:12.465345
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-01 10:20:22.027027
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-01 10:22:36.292594
+\d

# 2021-03-01 10:23:46.027150
+ALTER USER loplop WITH SUPERUSER;

# 2021-03-01 10:23:57.296446
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-01 10:24:02.606351
+\d;

# 2021-03-01 10:24:07.131587
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-01 10:25:22.101990
+\d organization;

# 2021-03-01 10:25:27.173265
+\d

# 2021-03-01 10:25:51.098769
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-01 10:25:54.572009
+\d

# 2021-03-01 10:26:11.155575
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-01 10:27:00.786023
+select * from organization;

# 2021-03-01 10:27:47.101354
+select * from workspace;

# 2021-03-01 11:20:45.236519
+select * from organization;

# 2021-03-01 11:21:01.246794
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-01 11:21:05.876978
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-01 11:24:57.192766
+select * from organization;

# 2021-03-01 11:25:30.114550
+select * from workspace;

# 2021-03-01 11:25:35.186295
+select * from project;

# 2021-03-01 11:33:33.800843
+select * from scheme;

# 2021-03-01 11:33:38.387484
+select * from perm_scheme;

# 2021-03-01 11:37:15.687229
+select * from perm_scheme where id = '1a1b3786-7a46-11eb-85aa-3c6aa77d6e2d';

# 2021-03-01 11:37:51.083694
+select * from perm_scheme where id = '18d35c78-7a46-11eb-bce5-3c6aa77d6e2d';

# 2021-03-01 11:38:42.919829
+select * from perm_scheme where workspace_id = '1a1b0644-7a46-11eb-85aa-3c6aa77d6e2d';

# 2021-03-01 11:45:26.999411
+select * from perm_scheme where id = '1aec8b6a-7a46-11eb-8971-3c6aa77d6e2d';

# 2021-03-01 11:45:38.192945
+select * from perm_scheme where parent_id = '1aec8b6a-7a46-11eb-8971-3c6aa77d6e2d';

# 2021-03-01 11:54:43.861880
+select * from perm_scheme where id = '1ae49b9e-7a46-11eb-a5f7-3c6aa77d6e2d';

# 2021-03-01 11:54:50.499471
+select * from perm_scheme where id = '1aec8b6a-7a46-11eb-8971-3c6aa77d6e2d';

# 2021-03-01 12:36:11.842465
+select * from perm_scheme where id = '1ae49b9e-7a46-11eb-a5f7-3c6aa77d6e2d';

# 2021-03-01 12:36:43.801181
+select * from perm_scheme where id = '1aec8b6a-7a46-11eb-8971-3c6aa77d6e2d ';

# 2021-03-01 12:36:45.977166
+select * from perm_scheme where id = '1aec8b6a-7a46-11eb-8971-3c6aa77d6e2d';

# 2021-03-01 13:25:58.403095
+select * from perm_scheme where id = '1ae49b9e-7a46-11eb-a5f7-3c6aa77d6e2d';

# 2021-03-01 13:26:25.032584
+update perm_scheme set parent_id = null where id = '1ae49b9e-7a46-11eb-a5f7-3c6aa77d6e2d';

# 2021-03-01 13:26:26.977621
+select * from perm_scheme where id = '1ae49b9e-7a46-11eb-a5f7-3c6aa77d6e2d';

# 2021-03-01 15:59:05.894788
+select * from role;

# 2021-03-01 15:59:15.760918
+select * from role limit 3;

# 2021-03-01 15:59:49.059755
+insert into role (id, name) values 
+('e4b31816-6532-11eb-a463-005056be277d', 'xxx')\e

# 2021-03-01 16:13:07.455316
+insert into role (id, name) values 
+('00000000-0000-0000-0000-000000000001', 'xxx'),
+('00000000-0000-0000-0000-000000000002', 'yyy');
+

# 2021-03-01 16:13:22.876803
+select * from role where name in ('xxx', 'yyy');

# 2021-03-01 16:23:42.021416
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-01 16:23:45.833039
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-01 16:23:49.589288
+\d

# 2021-03-01 16:24:03.788397
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-01 16:26:46.415776
+select * from organization;

# 2021-03-02 14:54:17.930905
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 14:54:26.208428
+\

# 2021-03-02 14:54:33.791038
+\i ~/ndl/landlord/repo/pg/src/main/resources/init.sql

# 2021-03-02 14:54:53.018319
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-02 14:55:37.180530
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 14:55:41.374034
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-02 14:56:55.355267
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 14:57:01.441375
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-02 14:58:46.146597
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 14:58:49.327755
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-02 15:02:20.157999
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 15:02:23.023894
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-02 15:25:06.816987
+select * from organization;

# 2021-03-02 15:33:08.140597
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 15:33:16.757176
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-02 15:36:31.191718
+select * from organization;

# 2021-03-02 15:55:09.823878
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 15:55:21.634198
+\d;

# 2021-03-02 15:55:54.084621
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 15:56:11.272771
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-02 15:56:18.595771
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-02 16:03:19.566312
+\?

# 2021-03-02 16:05:36.262936
+\dT public.org_init_state;

# 2021-03-02 16:05:57.750446
+\dT org_init_state;

# 2021-03-02 16:06:03.218968
+\T

# 2021-03-02 16:06:06.469636
+\dT

# 2021-03-02 16:06:12.871356
+\dT public

# 2021-03-02 16:06:20.645978
+select * from organization;

# 2021-03-02 16:06:24.955287
+select * from public.organization;

# 2021-03-02 16:06:26.652781
+\d

# 2021-03-02 16:07:16.501163
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-02 16:07:26.592774
+\dT field_literal;

# 2021-03-02 16:07:30.308069
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 16:07:36.832397
+select * from public.organization;

# 2021-03-02 16:07:47.293005
+\d

# 2021-03-02 16:07:55.235243
+\dT org_init_state;

# 2021-03-02 16:08:24.490200
+select * from public.organization;

# 2021-03-02 16:08:50.278270
+select * from public.fileserver;

# 2021-03-02 16:13:03.829994
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-02 16:13:06.571021
+\i ~/ndl/fiw/repo/src/main/resources/db/pg/db-init.sql;

# 2021-03-02 16:13:25.327411
+select * from public.organization;

# 2021-03-02 16:20:22.477302
+select * from public.organization;

# 2021-03-04 17:47:58.092249
+select * from public.mapping_group where group_id is null;

# 2021-03-04 17:48:24.969620
+select * from public.user_group_mapping where group_id is null;

# 2021-03-04 17:49:21.374243
+select * from public.user_group_mapping where group_id is null; \e

# 2021-03-04 17:49:28.814133
+delete from public.user_group_mapping where group_id is null; 

# 2021-03-04 17:51:36.359756
+alter table public.user_group_mapping drop constraint group_fk;

# 2021-03-04 18:00:05.267537
+\e

# 2021-03-04 18:00:17.456070
+ALTER TABLE public.user_group_mapping ADD CONSTRAINT group_fk FOREIGN KEY (group_id)
+REFERENCES public."group" (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE CASCADE;

# 2021-03-04 18:00:30.909185
+alter table public.user_group_mapping drop constraint user_fk;

# 2021-03-04 18:00:36.284818
+\e

# 2021-03-04 18:00:45.432809
+ALTER TABLE public.user_group_mapping ADD CONSTRAINT user_fk FOREIGN KEY (user_id)
+REFERENCES public."user" (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE CASCADE;

# 2021-03-04 23:16:29.445076
+select * from group;

# 2021-03-04 23:16:34.341961
+select * from public.group;

# 2021-03-04 23:17:03.643212
+select * from public.group where id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:17:29.778505
+select * from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:18:46.987114
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d') select * from public.group where id = '93136d8e-7c03-11eb-8918-005056be277d'\e

# 2021-03-04 23:19:15.058495
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group where id = '93136d8e-7c03-11eb-8918-005056be277d'
+union us;

# 2021-03-04 23:19:20.302590
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group where id = '93136d8e-7c03-11eb-8918-005056be277d'
+union all us;

# 2021-03-04 23:19:36.596287
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group where id = '93136d8e-7c03-11eb-8918-005056be277d'
+union all select * from us;

# 2021-03-04 23:20:28.449516
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group where id = '93136d8e-7c03-11eb-8918-005056be277d' join select * from us;

# 2021-03-04 23:21:14.864453
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group left join us where id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:21:30.628246
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group left join us where public.group.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:21:47.601471
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group where id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:22:49.410686
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group full outer join us where id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:23:09.113233
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg full outer join us where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:24:16.283833
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg full inner join us where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:24:26.071342
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:26:14.720075
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';\e

# 2021-03-04 23:26:29.663911
+with us as (select group_id as id, COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:26:33.956141
+with us as (select group_id as id, COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';\e

# 2021-03-04 23:26:53.578332
+with us as (select group_id, COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:27:07.711407
+with us as (select group_id, COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';\e

# 2021-03-04 23:27:23.082995
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:28:41.686519
+with us as (select COUNT(1) as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';\e

# 2021-03-04 23:29:25.116743
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:29:34.030394
+\x

# 2021-03-04 23:29:35.339484
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:30:01.740984
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-04 23:30:25.359752
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';\e

# 2021-03-04 23:30:29.656402
+explain with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-05 09:42:18.532487
+\e

# 2021-03-05 09:42:33.920705
+with us as (SELECT * FROM public.group WHERE organization_id=$1 AND name='admin') " +
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um" +
+ left join us on us.id = um.group_id where um.group_id=(select id from us)";

# 2021-03-05 09:42:38.456457
+select * from group;

# 2021-03-05 09:42:42.787699
+select * from public.group;

# 2021-03-05 09:43:08.067209
+with us as (SELECT * FROM public.group WHERE organization_id=$1 AND name='admin') " +
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um" +
+ left join us on us.id = um.group_id where um.group_id=(select id from us)";\e

# 2021-03-05 09:43:23.838042
+with us as (SELECT * FROM public.group WHERE organization_id='93136082-7c03-11eb-8918-005056be277d' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um
+ left join us on us.id = um.group_id where um.group_id=(select id from us);

# 2021-03-05 09:43:25.729643
+with us as (SELECT * FROM public.group WHERE organization_id='93136082-7c03-11eb-8918-005056be277d' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um
+ left join us on us.id = um.group_id where um.group_id=(select id from us);\e

# 2021-03-05 09:43:35.948872
+SELECT * FROM public.group WHERE organization_id='93136082-7c03-11eb-8918-005056be277d' AND name='admin';

# 2021-03-05 09:44:12.612762
+SELECT * FROM public.group WHERE organization_id='93136082-7c03-11eb-8918-005056be277d' AND name='admin';\e

# 2021-03-05 09:44:24.415132
+SELECT * FROM public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin';

# 2021-03-05 09:44:29.645300
+with us as (SELECT * FROM public.group WHERE organization_id='93136082-7c03-11eb-8918-005056be277d' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um
+ left join us on us.id = um.group_id where um.group_id=(select id from us);\e\e

# 2021-03-05 09:44:37.437201
+with us as (SELECT * FROM public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um
+ left join us on us.id = um.group_id where um.group_id=(select id from us);

# 2021-03-05 09:45:47.702111
+with us as (SELECT * FROM public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um
+ left join us on us.id = um.group_id;

# 2021-03-05 09:46:10.805286
+with us as (SELECT * FROM public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um
+ left join us on us.id = um.group_id where um.group_id = us.id;

# 2021-03-05 09:46:44.926841
+with us as (SELECT * FROM public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um, us where um.group_id = us.id;

# 2021-03-05 09:46:52.050816
+with us as (SELECT * FROM public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um, us;

# 2021-03-05 09:47:14.116014
+with us as (SELECT * FROM public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um, us;\e

# 2021-03-05 09:48:01.632807
+select *, COUNT(1) OVER() as user_count from public.user_group_mapping as um where um.group_id = '93136082-7c03-11eb-8918-005056be277d';

# 2021-03-05 09:48:29.068504
+select * from public.user_group_mapping as um where um.group_id = '93136082-7c03-11eb-8918-005056be277d';

# 2021-03-05 09:52:34.701209
+with us as (SELECT * FROM public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin')
+ select us.*, COUNT(1) OVER() as user_count from public.user_group_mapping as um, us;\e

# 2021-03-05 09:55:13.147328
+SELECT g.*, COUNT(1) OVER() as user_count
+FROM public.group as g
+LEFT JOIN public.user_group_mapping  um on um.group_id = g.id
+WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin';

# 2021-03-05 09:55:16.833597
+SELECT g.*, COUNT(1) OVER() as user_count
+FROM public.group as g
+LEFT JOIN public.user_group_mapping  um on um.group_id = g.id
+WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin';\e

# 2021-03-05 09:55:27.592255
+SELECT g.*, COUNT(1) OVER() as user_count
+FROM public.group as g
+LEFT JOIN public.user_group_mapping  um on um.group_id = g.id
+WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin';

# 2021-03-05 09:55:39.037767
+SELECT g.*, COUNT(1) OVER() as user_count
+FROM public.group as g
+LEFT JOIN public.user_group_mapping  um on um.group_id = g.id
+WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'; \e

# 2021-03-05 09:55:48.305216
+SELECT g.*, COUNT(1) OVER() as user_count
+FROM public.group as g
+LEFT JOIN public.user_group_mapping  um on um.group_id = g.id
+WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'; 

# 2021-03-05 09:55:59.713867
+select * from public.user_group_mapping as um where um.group_id = '93136082-7c03-11eb-8918-005056be277d';

# 2021-03-05 09:56:07.529274
+SELECT g.*, COUNT(1) OVER() as user_count
+FROM public.group as g
+LEFT JOIN public.user_group_mapping  um on um.group_id = g.id
+WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'; \e

# 2021-03-05 09:57:15.882479
+explain with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-05 09:57:20.225064
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d')
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-05 09:57:37.683278
+SELECT g.*, COUNT(1) OVER() as user_count
+FROM public.group as g
+LEFT JOIN public.user_group_mapping  um on um.group_id = g.id
+WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'; \e

# 2021-03-05 09:59:27.753530
+with tmpid as (select id from group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = (select id from tmpid);
+
+SELECT g.*, COUNT(1) OVER() as user_count
+FROM public.group as g
+LEFT JOIN public.user_group_mapping  um on um.group_id = g.id
+\e

# 2021-03-05 09:59:31.382466
+with tmpid as (select id from group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = (select id from tmpid);

# 2021-03-05 09:59:34.188199
+with tmpid as (select id from group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = (select id from tmpid);\e

# 2021-03-05 09:59:40.112438
+with tmpid as (select id from public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = (select id from tmpid);

# 2021-03-05 09:59:47.474105
+with tmpid as (select id from public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = (select id from tmpid);\e

# 2021-03-05 10:00:12.756760
+with tmpid as (select id from public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin')
+select * from public.group as gg where gg.id = (select id from tmpid);

# 2021-03-05 10:00:31.334087
+with tmpid as (select id from public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg inner join us on us.group_id = gg.id where gg.id = (select id from tmpid);\e

# 2021-03-05 10:00:38.086314
+with tmpid as (select id from public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='admin'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg left join us on us.group_id = gg.id where gg.id = (select id from tmpid);

# 2021-03-05 10:01:05.308089
+select * from public.user_group_mapping;

# 2021-03-05 10:01:26.190426
+select * from public.group where id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-05 10:01:38.851453
+with tmpid as (select id from public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='member'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg left join us on us.group_id = gg.id where gg.id = (select id from tmpid);

# 2021-03-05 10:01:46.549532
+with tmpid as (select id from public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='member'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg left join us on us.group_id = gg.id where gg.id = (select id from tmpid);\e

# 2021-03-05 10:01:52.517743
+with tmpid as (select id from public.group WHERE organization_id='ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name='member'),
+    us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id = (select id from tmpid))
+select * from public.group as gg left join us on us.group_id = gg.id where gg.id = (select id from tmpid);

# 2021-03-05 10:02:06.395126
+SELECT gr.*, count(1) FROM "group" gr
+LEFT JOIN user_group_mapping ugm on gr.id = ugm.group_id
+WHERE gr.organization_id = 'ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name = 'owner'
+GROUP BY gr.id;

# 2021-03-05 10:02:17.516731
+SELECT gr.*, count(1) FROM "group" gr
+LEFT JOIN user_group_mapping ugm on gr.id = ugm.group_id
+WHERE gr.organization_id = 'ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name = 'member'
+GROUP BY gr.id;

# 2021-03-05 10:02:45.794749
+select * from public.user_group_mapping where group_id = '93136d8e-7c03-11eb-8918-005056be277d';

# 2021-03-05 10:02:57.878081
+select * from public.user_group_mapping;

# 2021-03-05 10:03:40.167163
+SELECT gr.*, (select count(1) from user_group_mapping as u where u.group_id = gr.id) as user_count FROM "group" gr
+WHERE gr.organization_id = 'ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name = 'owner'
+GROUP BY gr.id;

# 2021-03-05 10:03:48.435582
+SELECT gr.*, (select count(1) from user_group_mapping as u where u.group_id = gr.id) as user_count FROM "group" gr
+WHERE gr.organization_id = 'ae60b75a-07e9-47dd-98de-4dbb67c5eb22' AND name = 'owner';

# 2021-03-05 10:12:59.025075
+\e

# 2021-03-05 10:13:27.737269
+SELECT gr.*, (select count(1) from public.user_group_mapping as u where u.group_id = gr.id) as user_count  
+FROM public.group as gr  WHERE gr.organization_id = '5eface85-1b9b-44f7-8a24-53a7a81d9bdd' AND gr.name = 'owner';

# 2021-03-05 10:15:24.592220
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id=$1)  select * from public.group as gg inner join us on us.group_id=gg.id where gg.id=$1 and organization_id=\e

# 2021-03-05 10:15:52.466870
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id=$1)
+select * from public.group as gg inner join us on us.group_id=gg.id where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';

# 2021-03-05 10:16:04.480425
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id='017347d2-7d61-11eb-af03-0242ac110003')
+select * from public.group as gg inner join us on us.group_id=gg.id where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';

# 2021-03-05 10:16:09.343865
+with us as (select group_id, COUNT(1) OVER() as user_count from public.user_group_mapping where group_id='017347d2-7d61-11eb-af03-0242ac110003')
+select * from public.group as gg inner join us on us.group_id=gg.id where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';\e

# 2021-03-05 10:16:12.243677
+select * from public.group as gg inner join us on us.group_id=gg.id where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';

# 2021-03-05 10:16:15.542594
+select * from public.group as gg inner join us on us.group_id=gg.id where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';\e

# 2021-03-05 10:16:28.259617
+select * from public.group as gg  where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';

# 2021-03-05 10:16:33.307146
+select * from public.group as gg  where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';\e

# 2021-03-05 10:17:20.945155
+select *, (select count(1) from public.user_group_mapping as um where um.group_id = '017347d2-7d61-11eb-af03-0242ac110003') as user_count from public.group as gg  where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';

# 2021-03-05 10:17:38.355325
+select *, (select count(1) from public.user_group_mapping as um where um.group_id = '017347d2-7d61-11eb-af03-0242ac110003') as user_count from public.group as gg  where gg.id='017347d2-7d61-11eb-af03-0242ac110003' and organization_id='0d2a94a0-0176-4bdf-8ddc-2519e24eeeaa';\e

# 2021-03-05 10:45:41.837268
+select * from public.group;

# 2021-03-05 11:27:31.532038
+select * from public.perm_scheme where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-05 11:27:55.188977
+\x

# 2021-03-05 11:27:56.924550
+select * from public.perm_scheme where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-05 11:28:13.009043
+\x

# 2021-03-05 11:28:14.306037
+select * from public.perm_scheme where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-05 11:28:32.003944
+select id from public.perm_scheme where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' limit 1;

# 2021-03-05 11:31:45.010240
+select * from mapping_group where scheme_id = '7947ed2e-7b38-11eb-988c-005056be277d';

# 2021-03-05 11:34:09.544112
+select * from public.group;

# 2021-03-05 11:36:36.470598
+insert into public.group (name, description, organization_id) value ('owner', 'Owners', '46e300af-76cd-4694-a42a-fa52331a41e6');

# 2021-03-05 11:36:42.533865
+insert into public.group (name, description, organization_id) values ('owner', 'Owners', '46e300af-76cd-4694-a42a-fa52331a41e6');

# 2021-03-05 11:36:44.557290
+select * from public.group;

# 2021-03-05 11:37:05.092392
+select id from public.perm_scheme where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' limit 1;

# 2021-03-05 11:37:19.129203
+select * from public.perm_scheme where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-05 11:37:26.014539
+select * from mapping_group where scheme_id = '7947ed2e-7b38-11eb-988c-005056be277d';

# 2021-03-05 11:38:21.984985
+update perm_scheme set group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d' where scheme_id = '7947ed2e-7b38-11eb-988c-005056be277d' and group_id is null;

# 2021-03-05 11:38:57.760569
+update public.perm_scheme set group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d' where scheme_id = '7947ed2e-7b38-11eb-988c-005056be277d' and group_id is null;

# 2021-03-05 11:39:28.442295
+select id from perm_scheme where scheme_id = '7947ed2e-7b38-11eb-988c-005056be277d' and group_id is null;

# 2021-03-05 11:39:38.205607
+update public.mapping_group set group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d' where scheme_id = '7947ed2e-7b38-11eb-988c-005056be277d' and group_id is null;

# 2021-03-05 11:44:02.668251
+select * from public.user_group_mapping where group_id is null;

# 2021-03-05 11:44:15.593168
+select * from public.organization;

# 2021-03-05 11:44:41.730396
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-05 11:44:47.074277
+select id from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-05 11:45:03.331533
+select * from public.user_group_mapping where user_id = 'c52669c8-7b38-11eb-94de-005056be277d';

# 2021-03-05 11:45:34.684053
+select * from public.group;

# 2021-03-05 11:46:14.375683
+insert into public.user_group_mapping (group_id, user_id) value ('6265c6cc-7d6c-11eb-9adf-005056be277d', 'c52669c8-7b38-11eb-94de-005056be277d');

# 2021-03-05 11:46:18.538075
+insert into public.user_group_mapping (group_id, user_id) values ('6265c6cc-7d6c-11eb-9adf-005056be277d', 'c52669c8-7b38-11eb-94de-005056be277d');

# 2021-03-05 13:17:48.323689
+select * from public.group;

# 2021-03-05 13:17:59.674175
+select id from public.group limit 1;

# 2021-03-05 13:18:48.415468
+select * from public.user_group_mapping as um join public.user us on um.user_id = us.id where um.group_id = '5ae92516-7d7a-11eb-b998-0242ac110003';

# 2021-03-05 13:42:47.013111
+select * from public.group;

# 2021-03-05 13:43:35.131753
+select * from public.user where whoru_id = '005648d5-8915-4662-9e40-ec0bf71c9f9a';

# 2021-03-05 13:49:53.182383
+select * from public.user where whoru_id = 'bbc21df5-5318-4798-b25b-fde258be102a';

# 2021-03-05 14:41:53.250059
+select * from public.user;

# 2021-03-06 10:40:22.678987
+\d

# 2021-03-06 10:41:25.666277
+\?

# 2021-03-06 10:41:37.196273
+\l

# 2021-03-06 10:44:42.083071
+\c template0

# 2021-03-06 10:45:57.439631
+\?

# 2021-03-06 10:46:13.144880
+create new database pagila;

# 2021-03-06 10:46:17.652414
+create database pagila;

# 2021-03-06 10:46:20.817020
+\c pagila

# 2021-03-06 10:46:22.426217
+\l

# 2021-03-06 10:48:03.058250
+\i ~/github/pagila/pagila-insert-data.sql

# 2021-03-06 10:49:09.332979
+\d

# 2021-03-06 10:49:15.564083
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-06 10:49:25.564244
+\i ~/github/pagila/pagila-schema.sql

# 2021-03-06 10:49:37.949153
+\i ~/github/pagila/pagila-data.sql

# 2021-03-07 10:06:39.127967
+\d

# 2021-03-07 10:06:40.713969
+\c

# 2021-03-07 10:06:42.164696
+\l

# 2021-03-07 10:06:45.429986
+\c pagila

# 2021-03-07 10:06:49.632454
+\d

# 2021-03-07 10:06:57.310519
+select count(1) from film;

# 2021-03-07 10:07:02.505457
+select count(1) from actor;

# 2021-03-07 10:10:36.755545
+\i ~/github/pagila/pagila-data.sql

# 2021-03-07 10:26:27.527567
+\d

# 2021-03-07 10:26:44.918590
+\?

# 2021-03-07 10:26:55.326289
+\c test

# 2021-03-07 10:27:14.442563
+drop database pagila;

# 2021-03-07 16:36:04.291226
+\l

# 2021-03-07 16:36:08.390538
+create database pagila;

# 2021-03-07 16:36:12.100644
+\c pagila

# 2021-03-07 16:36:23.238724
+\i ~/github/pagila/pagila-schema.sql

# 2021-03-07 16:36:32.762220
+\i ~/github/pagila/pagila-data.sql

# 2021-03-07 16:38:24.860907
+\d

# 2021-03-07 16:38:32.825101
+select count(1) from actor;

# 2021-03-07 16:38:38.797098
+select count(1) from film;

# 2021-03-07 16:38:42.394026
+select count(1) from staff;

# 2021-03-07 16:38:44.789685
+\d

# 2021-03-07 16:38:48.135846
+\dl

# 2021-03-07 16:38:50.390504
+\dt

# 2021-03-07 16:38:59.452600
+select count(1) from store;

# 2021-03-07 16:39:08.209905
+\?

# 2021-03-07 16:39:56.319413
+SELECT table_name FROM information_schema.tables
+                      WHERE table_schema='public' ;

# 2021-03-07 16:40:18.600024
+SELECT table_name FROM information_schema.tables
+                      WHERE table_schema='public';

# 2021-03-07 16:41:09.212285
+select count(1) from address, cotegory;

# 2021-03-07 16:41:13.813217
+select count(1) from address, category;

# 2021-03-07 16:41:20.725176
+select count(1) from category;

# 2021-03-07 16:41:25.188565
+select count(1) from address;

# 2021-03-07 16:41:31.926308
+\d

# 2021-03-07 16:41:34.048053
+\dt

# 2021-03-07 16:41:55.471783
+select count(1) from rental;

# 2021-03-07 16:42:03.218675
+select count(1) from payment;

# 2021-03-07 16:42:16.884543
+select count(1) from customer;

# 2021-03-07 16:42:22.752308
+\d rental;

# 2021-03-07 17:10:30.787731
+\d

# 2021-03-07 17:10:34.380229
+\d actor;

# 2021-03-07 17:10:47.165463
+\dt;

# 2021-03-07 17:10:58.268147
+\d address;

# 2021-03-07 17:11:13.531282
+\d film;

# 2021-03-07 17:56:11.451326
+select * from film limit 10;

# 2021-03-07 17:56:32.992141
+select count(1) from pg_catalog.english;

# 2021-03-07 17:56:36.872180
+select count(1) from pg_catalog;

# 2021-03-07 17:56:50.461633
+select count(1) from pg_catalog.english;

# 2021-03-07 17:58:50.021953
+select to_tsvector('hom nay troi@gmail'
+);

# 2021-03-07 17:58:58.172671
+select to_tsvector('hom nay troi@gmail');

# 2021-03-10 15:42:51.349320
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org left join public.land land on land.id = org.land_id WHERE org.id IN (select id from public.org_user where whoru_id = $1)\e

# 2021-03-10 15:43:09.588892
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org left join public.land land on land.id = org.land_id WHERE org.id IN (select id from public.org_user where whoru_id = '415e38ca-10b7-47a5-999d-8b339da792af\';

# 2021-03-10 15:43:11.788541
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org left join public.land land on land.id = org.land_id WHERE org.id IN (select id from public.org_user where whoru_id = '415e38ca-10b7-47a5-999d-8b339da792af';

# 2021-03-10 15:43:17.118237
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org left join public.land land on land.id = org.land_id WHERE org.id IN (select id from public.org_user where whoru_id = '415e38ca-10b7-47a5-999d-8b339da792af');

# 2021-03-10 15:44:33.104322
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org left join public.land land on land.id = org.land_id WHERE org.id IN (select id from public.org_user as ou where ou.whoru_id = '415e38ca-10b7-47a5-999d-8b339da792af';

# 2021-03-10 15:44:36.557381
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org left join public.land land on land.id = org.land_id WHERE org.id IN (select id from public.org_user as ou where ou.whoru_id = '415e38ca-10b7-47a5-999d-8b339da792af');

# 2021-03-10 15:44:47.575774
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org left join public.land land on land.id = org.land_id WHERE org.id IN (select ou.id from public.org_user as ou where ou.whoru_id = '415be38ca-10b7-47a5-999d-8b339da792af');

# 2021-03-10 15:45:00.991096
+SELECT org.*,      land.id as land_id,      land.domain as land_domain,      land.adm_domain as land_adm_domain,      land.capacity as land_capacity,      land.current_org_number as land_current_org_number,      land.created_at as land_created_at,      land.updated_at as land_updated_at FROM public.organization as org left join public.land land on land.id = org.land_id WHERE org.id IN (select ou.id from public.org_user as ou where ou.whoru_id = '415be38ca-10b7-47a5-999d-8b339da792af');\e

# 2021-03-10 15:45:52.758696
+SELECT org.*, land.id as land_id,
+land.domain as land_domain,
+land.adm_domain as land_adm_domain,
+land.capacity as land_capacity,
+land.current_org_number as land_current_org_number,
+land.created_at as land_created_at,
+land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id 
+WHERE org.id IN (
+    select ou.id from public.org_user as ou
+    where ou.whoru_id = '415be38ca-10b7-47a5-999d-8b339da792af'
+);

# 2021-03-10 15:45:54.714665
+SELECT org.*, land.id as land_id,
+land.domain as land_domain,
+land.adm_domain as land_adm_domain,
+land.capacity as land_capacity,
+land.current_org_number as land_current_org_number,
+land.created_at as land_created_at,
+land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id 
+WHERE org.id IN (
+    select ou.id from public.org_user as ou
+    where ou.whoru_id = '415be38ca-10b7-47a5-999d-8b339da792af'
+);\e

# 2021-03-10 15:46:05.056928
+select ou.id from public.org_user as ou
+where ou.whoru_id = '415be38ca-10b7-47a5-999d-8b339da792af';

# 2021-03-10 15:46:23.211018
+SELECT org.*, land.id as land_id,
+land.domain as land_domain,
+land.adm_domain as land_adm_domain,
+land.capacity as land_capacity,
+land.current_org_number as land_current_org_number,
+land.created_at as land_created_at,
+land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id 
+WHERE org.id IN (
+    select ou.id from public.org_user as ou
+    where ou.whoru_id = '415be38ca-10b7-47a5-999d-8b339da792af'
+);\e

# 2021-03-10 15:46:36.907151
+SELECT org.*, land.id as land_id,
+land.domain as land_domain,
+land.adm_domain as land_adm_domain,
+land.capacity as land_capacity,
+land.current_org_number as land_current_org_number,
+land.created_at as land_created_at,
+land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id 
+WHERE org.id IN (
+    select ou.organization_id from public.org_user as ou
+    where ou.whoru_id = '415be38ca-10b7-47a5-999d-8b339da792af'
+);

# 2021-03-10 15:46:46.565194
+SELECT org.*, land.id as land_id,
+land.domain as land_domain,
+land.adm_domain as land_adm_domain,
+land.capacity as land_capacity,
+land.current_org_number as land_current_org_number,
+land.created_at as land_created_at,
+land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id 
+WHERE org.id IN (
+    select ou.organization_id from public.org_user as ou
+    where ou.whoru_id = '415be38ca-10b7-47a5-999d-8b339da792af'
+);\e

# 2021-03-10 15:46:55.606878
+SELECT org.*, land.id as land_id,
+land.domain as land_domain,
+land.adm_domain as land_adm_domain,
+land.capacity as land_capacity,
+land.current_org_number as land_current_org_number,
+land.created_at as land_created_at,
+land.updated_at as land_updated_at
+FROM public.organization as org
+left join public.land land on land.id = org.land_id 
+WHERE org.id IN (
+    select ou.organization_id from public.org_user as ou
+    where ou.whoru_id = '415e38ca-10b7-47a5-999d-8b339da792af'
+);

# 2021-03-10 15:57:11.810971
+\d

# 2021-03-10 15:57:15.358868
+select * from m;

# 2021-03-10 15:57:20.493111
+delete * from m;

# 2021-03-10 15:57:27.734147
+delete from m;

# 2021-03-10 17:01:58.572424
+\d

# 2021-03-10 17:02:33.564403
+select * from organization;

# 2021-03-10 17:02:43.476113
+select * from land;

# 2021-03-10 17:02:55.424269
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-10 17:03:29.611382
+\i ~/ndl/orgpool/repo/pg/src/main/resources/init.sql

# 2021-03-10 17:04:10.042308
+\d

# 2021-03-10 17:18:43.073960
+\l

# 2021-03-10 17:18:54.268314
+\d

# 2021-03-10 17:19:01.966993
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-10 17:19:05.608654
+\i ~/ndl/orgpool/repo/pg/src/main/resources/init.sql

# 2021-03-10 17:20:02.111936
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-12 13:28:18.703198
+\d

# 2021-03-12 13:28:40.106314
+create table person(
+id serial primary key,
+name varchar);

# 2021-03-12 13:33:20.525840
+create table student(
+school varchar)
+inherits (person);

# 2021-03-12 13:35:09.510432
+create table home(
+id serial primary key,
+foreign key (st_id) references student(id)
+);

# 2021-03-12 13:35:37.288956
+create table home(
+id serial primary key,
+st_id int,
+foreign key (st_id) references student(id)
+);

# 2021-03-12 13:37:17.945150
+alter table public.student add primary key (id);

# 2021-03-12 13:37:21.704849
+create table home(
+id serial primary key,
+st_id int,
+foreign key (st_id) references student(id)
+);

# 2021-03-12 13:37:44.989309
+alter table public.home add column address varchar;

# 2021-03-12 13:37:49.441780
+\d

# 2021-03-12 13:37:51.647196
+\d home

# 2021-03-12 13:39:49.234563
+alter table public.home add constraint unique home_uq unique (id, address);

# 2021-03-12 13:40:03.220722
+alter table public.home add constraint home_uq unique (id, address);

# 2021-03-12 13:40:09.436234
+\d home;

# 2021-03-12 14:02:17.833503
+ INDEX IF EXISTS public.id CASCADE;

# 2021-03-12 14:02:17.969042
+CREATE INDEX id ON public.screen
+    USING hash
+        (
+              id
+                  );

# 2021-03-12 14:02:18.071976
+-- ddl-end --
+
+-- object: key_12 | type: INDEX --
+-- DROP INDEX IF EXISTS public.key_12 CASCADE;

# 2021-03-12 14:02:18.146130
+CREATE INDEX key_12 ON public.screen
+    USING btree
+        (
+              organization_id,
+                    key
+                        );

# 2021-03-12 14:02:18.244389
+-- ddl-end --
+
+-- object: public.status_category | type: TABLE --
+-- DROP TABLE IF EXISTS public.status_category CASCADE;

# 2021-03-12 14:02:18.412971
+CREATE TABLE public.status_category (
+    id uuid NOT NULL,
+        key varchar NOT NULL,
+            name varchar(126) NOT NULL,
+                description text,
+                    CONSTRAINT status_category_pk PRIMARY KEY (id),
+                        CONSTRAINT key CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text))
+                        
+                        );

# 2021-03-12 14:02:18.556509
+-- ddl-end --
+
+-- object: public.status | type: TABLE --
+-- DROP TABLE IF EXISTS public.status CASCADE;

# 2021-03-12 14:02:18.986710
+CREATE TABLE public.status (
+    id uuid NOT NULL,
+        key varchar NOT NULL,
+            name varchar(128) NOT NULL,
+                description text,
+                    created_at timestamptz DEFAULT CURRENT_TIMESTAMP,
+                        updated_at timestamptz DEFAULT CURRENT_TIMESTAMP,
+                            status_category_id uuid NOT NULL,
+                                CONSTRAINT status_pk PRIMARY KEY (id),
+                                    CONSTRAINT key CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text))
+                                    
+                                    );

# 2021-03-12 14:02:19.155127
+-- ddl-end --
+COMMENT ON CONSTRAINT key ON public.status  IS E'key constraint';

# 2021-03-12 14:02:19.274639
+-- ddl-end --
+
+-- object: status_category_fk | type: CONSTRAINT --
+-- ALTER TABLE public.status DROP CONSTRAINT IF EXISTS status_category_fk CASCADE;

# 2021-03-12 14:02:19.449650
+ALTER TABLE public.status ADD CONSTRAINT status_category_fk FOREIGN KEY (status_category_id)
+REFERENCES public.status_category (id) MATCH FULL
+ON DELETE RESTRICT ON UPDATE CASCADE;

# 2021-03-12 14:02:22.667693
+-- ddl-end --
+
+-- object: public.issuelinktype_config | type: TABLE --
+-- DROP TABLE IF EXISTS public.issuelinktype_config CASCADE;

# 2021-03-12 14:02:22.779861
+CREATE TABLE public.issuelinktype_config (
+    id uuid NOT NULL,
+        source_issuetype uuid,
+            destination_issuetype uuid,
+                issuelinktype_id uuid NOT NULL,
+                    CONSTRAINT issuelinktype_config_pk PRIMARY KEY (id)
+                    
+                    );

# 2021-03-12 14:02:22.881978
+-- ddl-end --
+
+-- object: issuelinktype_fk | type: CONSTRAINT --
+-- ALTER TABLE public.issuelinktype_config DROP CONSTRAINT IF EXISTS issuelinktype_fk CASCADE;

# 2021-03-12 14:08:10.677373
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-12 14:08:44.773988
+\i ~/a.sql

# 2021-03-12 14:09:04.219266
+CREATE EXTENSION "uuid-ossp"
+WITH SCHEMA public;
+

# 2021-03-12 14:09:07.475298
+\i ~/a.sql

# 2021-03-12 14:09:11.931342
+\d

# 2021-03-12 14:09:19.123795
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-12 14:09:26.073477
+CREATE EXTENSION "uuid-ossp"
+WITH SCHEMA public;
+

# 2021-03-12 14:09:29.986484
+\i ~/a.sql

# 2021-03-12 14:09:32.945678
+\d

# 2021-03-12 14:09:36.152222
+\d user;

# 2021-03-12 14:10:46.868521
+\d actor;

# 2021-03-12 14:15:56.856099
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-12 14:15:59.499160
+CREATE EXTENSION "uuid-ossp"
+WITH SCHEMA public;
+

# 2021-03-12 14:16:03.186977
+\i ~/a.sql

# 2021-03-12 14:16:09.272608
+\d

# 2021-03-12 14:16:10.737396
+CREATE EXTENSION "uuid-ossp"
+WITH SCHEMA public;
+

# 2021-03-12 14:16:22.075707
+\i ~/a.sql

# 2021-03-12 14:16:26.114241
+\d

# 2021-03-12 14:16:28.690938
+\d actor;

# 2021-03-12 14:16:42.956245
+\d user;

# 2021-03-12 15:11:58.894068
+\d

# 2021-03-12 15:12:05.684550
+\?

# 2021-03-12 15:12:48.460785
+select * from information_schema.triggers;

# 2021-03-12 15:49:56.189467
+\d worklogtype

# 2021-03-12 16:05:03.367136
+\i ~/a.sql

# 2021-03-12 16:06:18.428943
+\d attachment;

# 2021-03-12 16:06:30.253024
+\d avatar;

# 2021-03-12 16:07:06.763087
+select * from avatar;

# 2021-03-12 16:07:10.517844
+\dt

# 2021-03-12 16:07:36.561759
+\dT

# 2021-03-12 16:12:11.108708
+\d organization;

# 2021-03-12 16:13:18.695425
+select * from organization;

# 2021-03-12 16:13:44.166345
+update public.organization set zone_id = 'Asia/Ho_Chi_Minh';

# 2021-03-12 16:13:55.099200
+select * from organization;

# 2021-03-12 16:16:52.826524
+\dT

# 2021-03-12 16:16:58.440150
+\dT org_status;

# 2021-03-12 16:17:04.800496
+select * from org_status;

# 2021-03-12 16:17:29.434219
+\dT+ org_status;

# 2021-03-12 16:17:49.898729
+\d

# 2021-03-12 16:17:54.207511
+\d organization

# 2021-03-12 16:20:36.290264
+\i ~/a.sql

# 2021-03-12 17:09:40.662037
+\dT+ user_status;

# 2021-03-12 17:09:52.620358
+\i ~/a.sql

# 2021-03-15 08:55:39.771024
+\d

# 2021-03-15 08:55:44.127384
+\d organization;

# 2021-03-15 08:57:57.614814
+\i ~/a.sql

# 2021-03-15 14:09:06.392444
+\d scheme;

# 2021-03-15 14:09:12.816583
+select count(1) from scheme;

# 2021-03-15 14:09:24.313107
+select * from scheme;

# 2021-03-15 14:09:41.234057
+select * from scheme where workspace_id is null;

# 2021-03-15 14:09:58.627041
+select * from scheme where workspace_id is not null;

# 2021-03-15 14:10:07.425426
+select * from scheme where workspace_id is not null and project_id is null;

# 2021-03-15 14:11:31.567708
+\d scheme;

# 2021-03-15 14:11:58.073136
+\d role;

# 2021-03-15 14:12:30.699810
+\d role_mapping;

# 2021-03-15 14:22:14.060124
+select * from scheme where workspace_id is not null and project_id is null;

# 2021-03-15 14:22:37.042017
+select * from role_mapping;

# 2021-03-15 14:23:42.905894
+select * from role_mapping as r join scheme s on r.scheme_id = s.id where s.project_id is not null;

# 2021-03-15 14:23:54.850167
+select * from role_mapping as r join scheme s on r.scheme_id = s.id;

# 2021-03-15 14:24:07.763020
+select * from role_mapping;

# 2021-03-15 14:24:11.073382
+select * from scheme where workspace_id is not null and project_id is null;

# 2021-03-15 14:25:41.310539
+update scheme as s set s.id = s.workspace_id where s.workspace_id is not null and s.project_id is null;

# 2021-03-15 14:26:07.568108
+update scheme set id = workspace_id where workspace_id is not null and project_id is null;

# 2021-03-15 14:26:12.574500
+select * from scheme where workspace_id is not null and project_id is null;

# 2021-03-15 14:26:28.414651
+select * from scheme where workspace_id is not null and project_id is not null;

# 2021-03-15 14:26:38.055189
+select * from scheme where project_id is not null;

# 2021-03-15 14:27:04.515078
+update scheme set id = project_id where workspace_id is not null and project_id is not null;

# 2021-03-15 14:27:07.507712
+select * from scheme where project_id is not null;

# 2021-03-16 10:01:34.576352
+select * from mapping_user where user_id = 'f864446c-8304-11eb-8bcd-005056be277d';

# 2021-03-16 10:01:52.840998
+select * from user where id = 'f864446c-8304-11eb-8bcd-005056be277d';

# 2021-03-16 10:01:59.557232
+select * from public.user where id = 'f864446c-8304-11eb-8bcd-005056be277d';

# 2021-03-16 14:41:19.992407
+\d organization;

# 2021-03-16 14:41:26.776194
+\d workspace;

# 2021-03-16 14:43:44.175540
+select count(1)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-16 14:44:24.361520
+select * from project;

# 2021-03-16 14:44:55.345728
+select * from scheme where project_id = 'd4b4ef86-7bce-11eb-9a1c-005056be277d';

# 2021-03-16 14:45:43.067589
+\d scheme;

# 2021-03-16 14:46:12.053841
+select count(1)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-16 14:47:06.180905
+select * from scheme where workspace_id = 'a1cde68c-7b41-11eb-a136-005056be277d' and project_id = 'd4b4ef86-7bce-11eb-9a1c-005056be277d';

# 2021-03-16 14:49:52.059677
+select * from role_mapping;

# 2021-03-16 14:50:52.064162
+select * from perm_scheme where workspace_id = 'a1cde68c-7b41-11eb-a136-005056be277d' and project_id = 'd4b4ef86-7bce-11eb-9a1c-005056be277d';

# 2021-03-16 14:50:59.804691
+select id from perm_scheme where workspace_id = 'a1cde68c-7b41-11eb-a136-005056be277d' and project_id = 'd4b4ef86-7bce-11eb-9a1c-005056be277d';

# 2021-03-16 14:51:55.110351
+select * from perm_scheme where workspace_id = 'a1cde68c-7b41-11eb-a136-005056be277d' and project_id = 'd4b4ef86-7bce-11eb-9a1c-005056be277d';

# 2021-03-16 14:58:34.507691
+select * from organization where id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-16 15:02:35.838211
+Select * from organization where id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-16 15:15:53.670330
+select * from perm_scheme where workspace_id = 'a1cde68c-7b41-11eb-a136-005056be277d' and project_id = 'd4b4ef86-7bce-11eb-9a1c-005056be277d';

# 2021-03-16 15:16:33.322473
+select * from perm_scheme where id = 'a1ce299e-7b41-11eb-a136-005056be277d';

# 2021-03-16 15:17:04.229236
+select * from perm_scheme where parent_id is not null;

# 2021-03-16 15:17:37.091904
+select parent_id from perm_scheme where parent_id is not null;

# 2021-03-16 15:17:51.065410
+select distinct(parent_id) from perm_scheme where parent_id is not null;

# 2021-03-16 15:18:27.459275
+select * from perm_scheme where id in (select distinct(parent_id) from perm_scheme where parent_id is not null);

# 2021-03-16 15:19:14.993554
+select distinct(parent_id) from perm_scheme where parent_id is not null;

# 2021-03-16 15:19:16.691499
+select * from perm_scheme where id in (select distinct(parent_id) from perm_scheme where parent_id is not null);

# 2021-03-16 15:28:24.809141
+select count(1)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-16 15:28:28.902318
+select * from project;

# 2021-03-16 15:28:42.392163
+select * from perm_scheme where workspace_id = 'a1cde68c-7b41-11eb-a136-005056be277d' and project_id = 'd4b4ef86-7bce-11eb-9a1c-005056be277d';

# 2021-03-16 15:29:03.429829
+select * from perm_scheme where workspace_id = 'a1cde68c-7b41-11eb-a136-005056be277d';

# 2021-03-16 15:29:30.869740
+select * from perm_scheme where id = '7947ed2e-7b38-11eb-988c-005056be277d';

# 2021-03-16 16:06:37.842813
+select * from mapping_user;

# 2021-03-16 16:06:45.200783
+select * from project;

# 2021-03-16 16:08:23.070922
+select count(1)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-16 16:08:42.198600
+select pj.id, count(1)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-16 16:10:09.804952
+select pj.*
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-16 16:10:29.338028
+select pj.*, count(workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-16 16:10:44.369496
+select pj.*, count(workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id
+group by workspace_id;

# 2021-03-16 16:13:18.391864
+select count(workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id
+group by pj.id;

# 2021-03-16 16:13:37.786394
+select pj.*, count(pj.workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id
+group by pj.id;

# 2021-03-16 16:13:59.064708
+select pj.workspace_id, count(pj.workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id
+group by pj.id;

# 2021-03-16 16:34:57.528258
+select * from workspace;

# 2021-03-16 16:52:27.537905
+select pj.workspace_id, count(pj.workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id
+group by pj.id;

# 2021-03-16 16:53:18.133931
+select pj.workspace_id, count(pj.workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id
+group by pj.workspace_id;

# 2021-03-16 16:53:47.243485
+select pj.workspace_id, count(pj.workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id
+group by pj.workspace_id
+order by count;

# 2021-03-16 16:53:52.741866
+select pj.workspace_id, count(pj.workspace_id)
+from project as pj
+join mapping_user mu on mu.scheme_id = pj.id
+group by pj.workspace_id
+order by count desc;

# 2021-03-16 16:55:22.409255
+select ws.id, count(pj.workspace_id) as rank
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id
+group by pj.workspace_id
+order by rank desc;

# 2021-03-16 16:55:32.250096
+select ws.id, count(pj.workspace_id) as rank
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id
+group by ws.workspace_id
+order by rank desc;

# 2021-03-16 16:56:02.652964
+select ws.id, count(pj.workspace_id) as rank
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc;

# 2021-03-16 16:56:12.054594
+select ws.id, ws.name, count(pj.workspace_id) as rank
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc;

# 2021-03-16 16:57:42.505401
+select ws.id, ws.name, count(pj.workspace_id) as rank
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id where mu.user_id = ''
+group by ws.id
+order by rank desc;

# 2021-03-16 16:58:31.838191
+select ws.id, ws.name, count(pj.workspace_id) as rank
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id where mu.user_id = '1ebcf4ba-863e-11eb-b48b-0242ac110003'
+group by ws.id
+order by rank desc;

# 2021-03-16 17:35:18.921487
+select ws.id, ws.name, count(pj.workspace_id) as rank
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id where mu.user_id = '427d66e6-8643-11eb-8d8d-0242ac110003'
+group by ws.id
+order by rank desc;

# 2021-03-16 17:36:40.102689
+select ws.id, ws.name, count(pj.workspace_id), count(1) OVER() as full_count as rank
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id where mu.user_id = '427d66e6-8643-11eb-8d8d-0242ac110003'
+group by ws.id
+order by rank desc;

# 2021-03-16 17:37:31.538270
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id where mu.user_id = '427d66e6-8643-11eb-8d8d-0242ac110003'
+group by ws.id
+order by rank desc;

# 2021-03-16 17:37:50.628616
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc;

# 2021-03-16 17:40:27.805554
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc;

# 2021-03-16 17:43:00.866017
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id where mu.user_id = '427d66e6-8643-11eb-8d8d-0242ac110003'
+group by ws.id
+order by rank desc;

# 2021-03-16 17:57:34.042591
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id where mu.user_id = '4ab80458-8646-11eb-9d44-0242ac110003'
+group by ws.id
+order by rank desc;

# 2021-03-16 17:57:42.454399
+select * from workspace;

# 2021-03-16 17:58:00.931104
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc;

# 2021-03-16 17:59:17.933756
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = '4ab80458-8646-11eb-9d44-0242ac110003'
+group by ws.id
+order by rank desc;

# 2021-03-16 18:00:58.289390
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = '4ab80458-8646-11eb-9d44-0242ac110003' or mu.user_id is null
+group by ws.id
+order by rank desc;

# 2021-03-16 22:32:57.813631
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null
+group by ws.id
+order by rank desc;

# 2021-03-16 22:33:15.623071
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = '4ab80458-8646-11eb-9d44-0242ac110003' or mu.user_id is null
+group by ws.id
+order by rank desc limit 3;

# 2021-03-16 22:34:16.067752
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = '4ab80458-8646-11eb-9d44-0242ac110003'
+group by ws.id
+order by rank desc limit 3;

# 2021-03-16 22:34:21.149221
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = '4ab80458-8646-11eb-9d44-0242ac110003'
+group by ws.id
+order by rank;

# 2021-03-16 22:34:59.075237
+select * from mapping_user;

# 2021-03-16 22:35:10.540300
+select * from mapping_user where user_id = 'c467185e-866c-11eb-92e1-0242ac110003';

# 2021-03-16 22:35:47.456508
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003'
+group by ws.id
+order by rank desc limit 3;

# 2021-03-16 22:35:52.775328
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003'
+group by ws.id
+order by rank desc limit 10;

# 2021-03-16 22:36:07.643916
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-16 22:57:54.424149
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null;

# 2021-03-16 22:58:36.686669
+select ws.id, ws.name, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null;

# 2021-03-16 22:59:05.714405
+select ws.id, ws.name, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null;

# 2021-03-16 22:59:15.639651
+select * from workspace;

# 2021-03-16 22:59:26.251800
+select ws.id, ws.name, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null;

# 2021-03-16 23:00:03.461072
+select distinct(ws.id), ws.name, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null;

# 2021-03-17 08:26:34.912317
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-17 10:45:40.276280
+select * from land;

# 2021-03-17 10:49:11.106538
+\d land;

# 2021-03-17 10:54:51.775596
+select * from land;

# 2021-03-17 11:00:13.644853
+select * from organization;

# 2021-03-17 11:14:56.849044
+select * from land;

# 2021-03-17 11:15:45.913443
+update land set domain = 'http://idealer.luklak.com', adm_domain = 'http://idealer.default.10.10.100.101.xip.io' where id = '81f7c866-86d4-11eb-aa6c-005056be277d';

# 2021-03-17 11:15:47.642442
+select * from land;

# 2021-03-17 11:18:50.270493
+select * from organization;

# 2021-03-17 11:19:05.391052
+delete * from organization;

# 2021-03-17 11:19:09.260397
+delete  from organization;

# 2021-03-17 11:31:17.474297
+select * from organization;

# 2021-03-17 11:31:21.985788
+delete  from organization;

# 2021-03-17 12:02:26.383349
+select * from land;

# 2021-03-17 13:45:30.216660
+select * from land;

# 2021-03-17 13:45:38.203439
+select * from organization;

# 2021-03-17 14:14:03.899988
+\dT+ org_status

# 2021-03-17 14:51:46.290368
+\d land;

# 2021-03-17 15:46:06.679685
+\d organization;

# 2021-03-17 15:46:09.304161
+select * from organization;

# 2021-03-17 15:46:28.156446
+select * from organization order by created_at;

# 2021-03-17 16:00:17.128037
+select * from organization;

# 2021-03-17 16:00:19.793384
+select * from organization order by created_at;

# 2021-03-18 09:59:27.459680
+\d

# 2021-03-18 09:59:33.468896
+select * from key;

# 2021-03-18 09:59:40.511367
+select * from value;

# 2021-03-18 09:59:59.364399
+select * from config;

# 2021-03-18 10:00:11.088757
+\x

# 2021-03-18 10:00:12.373840
+select * from config;

# 2021-03-18 16:03:03.535538
+\i ~/a.sql

# 2021-03-18 16:03:28.872162
+select * from perm_scheme where name = 'Abc'
+;

# 2021-03-18 16:03:46.547587
+delete from perm_scheme where id = 'd59d008c-87c2-11eb-9a93-005056be277d';

# 2021-03-18 16:03:49.906823
+\i ~/a.sql

# 2021-03-18 16:04:31.663601
+select * from perm_scheme where name = 'Abc';

# 2021-03-18 16:05:36.437841
+select * from scheme where name = 'Abc';

# 2021-03-18 16:05:57.426345
+\d perm_scheme;

# 2021-03-18 16:06:04.513816
+\?

# 2021-03-18 16:06:32.134481
+\d perm_scheme;

# 2021-03-18 16:06:48.619946
+ALTER TABLE public.perm_scheme ADD CONSTRAINT perm_scheme_name_uq UNIQUE (organization_id,name);

# 2021-03-18 16:07:21.536472
+\d+ perm_scheme;

# 2021-03-18 16:07:43.003212
+\e

# 2021-03-18 16:08:23.452527
+       FROM pg_catalog.pg_constraint con
+            INNER JOIN pg_catalog.pg_class rel
+                       ON rel.oid = con.conrelid
+            INNER JOIN pg_catalog.pg_namespace nsp
+                       ON nsp.oid = connamespace
+       WHERE nsp.nspname = 'public';

# 2021-03-18 16:08:26.204150
+       FROM pg_catalog.pg_constraint con
+            INNER JOIN pg_catalog.pg_class rel
+                       ON rel.oid = con.conrelid
+            INNER JOIN pg_catalog.pg_namespace nsp
+                       ON nsp.oid = connamespace
+       WHERE nsp.nspname = 'public';\e

# 2021-03-18 16:08:49.203735
+select con.* FROM pg_catalog.pg_constraint con
+            INNER JOIN pg_catalog.pg_class rel
+                       ON rel.oid = con.conrelid
+            INNER JOIN pg_catalog.pg_namespace nsp
+                       ON nsp.oid = connamespace
+       WHERE nsp.nspname = 'public';

# 2021-03-18 16:09:28.692901
+select con.* FROM pg_catalog.pg_constraint con
+            INNER JOIN pg_catalog.pg_class rel
+                       ON rel.oid = con.conrelid
+            INNER JOIN pg_catalog.pg_namespace nsp
+                       ON nsp.oid = connamespace
+       WHERE nsp.nspname = 'public' and con.conname = 'perm_scheme_name_uq';

# 2021-03-18 16:09:47.598166
+ALTER TABLE public.perm_scheme ADD CONSTRAINT perm_scheme_name_uq UNIQUE (organization_id,name);

# 2021-03-18 16:10:05.275936
+select * from perm_scheme;

# 2021-03-18 16:10:17.428645
+ALTER TABLE public.perm_scheme ADD CONSTRAINT perm_scheme_name_uq UNIQUE (organization_id,name);

# 2021-03-18 16:10:56.858824
+select * from perm_scheme where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-18 16:12:03.860352
+select * from perm_scheme where name = '';

# 2021-03-18 16:19:16.121582
+select * from scheme where name = '';

# 2021-03-18 16:19:39.665510
+update scheme set name = null where name = '';

# 2021-03-18 16:20:22.908090
+\d scheme;

# 2021-03-18 16:24:38.151400
+ALTER TABLE public.scheme ALTER COLUMN name DROP NOT NULL;
+

# 2021-03-18 16:24:44.565617
+update scheme set name = null where name = '';

# 2021-03-18 16:24:49.275226
+\d scheme;

# 2021-03-18 16:24:58.590262
+\i ~/a.sql

# 2021-03-18 16:54:56.297205
+select * from workspace;

# 2021-03-18 16:56:14.014613
+SELECT w.id as workspace_id, w.key as workspace_key, w.name as workspace_name,  wc.id as config_id, wc.issuetype_id, wc.workflowtype_id, wc.screen_id, wc.is_default  FROM public.workspace w LEFT JOIN workspace_config wc ON w.id = wc.workspace_id WHERE w.organization_id = '555e56ec-5295-4790-99cb-6ab4ec4290a1' AND w.id = 'd9bbfd50-87cf-11eb-8d4e-0242ac110003';

# 2021-03-19 10:39:41.233597
+select con.* FROM pg_catalog.pg_constraint con
+            INNER JOIN pg_catalog.pg_class rel
+                       ON rel.oid = con.conrelid
+            INNER JOIN pg_catalog.pg_namespace nsp
+                       ON nsp.oid = connamespace
+       WHERE nsp.nspname = 'public';

# 2021-03-19 10:40:10.397358
+select con.* FROM pg_catalog.pg_constraint con
+            INNER JOIN pg_catalog.pg_class rel
+                       ON rel.oid = con.conrelid
+            INNER JOIN pg_catalog.pg_namespace nsp
+                       ON nsp.oid = connamespace
+       WHERE nsp.nspname = 'public' and con.conname = 'perm_scheme_name_uq';

# 2021-03-19 10:40:22.531075
+\x

# 2021-03-19 10:40:25.019313
+select con.* FROM pg_catalog.pg_constraint con
+            INNER JOIN pg_catalog.pg_class rel
+                       ON rel.oid = con.conrelid
+            INNER JOIN pg_catalog.pg_namespace nsp
+                       ON nsp.oid = connamespace
+       WHERE nsp.nspname = 'public' and con.conname = 'perm_scheme_name_uq';

# 2021-03-19 10:40:37.798491
+\d+ perm_scheme;

# 2021-03-19 10:40:41.566329
+\x

# 2021-03-19 10:40:42.793963
+\d+ perm_scheme;

# 2021-03-19 15:04:53.129230
+\d+ rule;

# 2021-03-20 10:53:08.323833
+select * from scheme;

# 2021-03-20 10:53:39.639595
+select * from organization;

# 2021-03-20 10:53:49.612469
+select * from scheme;

# 2021-03-20 10:53:54.506356
+select * from perm_scheme;

# 2021-03-20 10:54:32.444277
+select * from scheme;

# 2021-03-20 10:54:35.982892
+select * from organization;

# 2021-03-20 15:15:18.177576
+\d

# 2021-03-20 16:38:29.946399
+select * from organization;

# 2021-03-20 16:40:18.718157
+select * from resource;

# 2021-03-20 16:40:28.899349
+select * from fileserver;

# 2021-03-20 16:43:49.943580
+select * from organization;

# 2021-03-20 16:52:07.656726
+select * from fileserver;

# 2021-03-20 16:52:30.215806
+select * from organization;

# 2021-03-20 16:52:39.734928
+select * from fileserver;

# 2021-03-20 16:59:17.521829
+ select relation::regclass, * from pg_locks where not granted;

# 2021-03-20 16:59:26.743737
+  SELECT blocked_locks.pid     AS blocked_pid,
+         blocked_activity.usename  AS blocked_user,
+         blocking_locks.pid     AS blocking_pid,
+         blocking_activity.usename AS blocking_user,
+         blocked_activity.query    AS blocked_statement,
+         blocking_activity.query   AS current_statement_in_blocking_process
+   FROM  pg_catalog.pg_locks         blocked_locks
+    JOIN pg_catalog.pg_stat_activity blocked_activity  ON blocked_activity.pid = blocked_locks.pid
+    JOIN pg_catalog.pg_locks         blocking_locks 
+        ON blocking_locks.locktype = blocked_locks.locktype
+        AND blocking_locks.database IS NOT DISTINCT FROM blocked_locks.database
+        AND blocking_locks.relation IS NOT DISTINCT FROM blocked_locks.relation
+        AND blocking_locks.page IS NOT DISTINCT FROM blocked_locks.page
+        AND blocking_locks.tuple IS NOT DISTINCT FROM blocked_locks.tuple
+        AND blocking_locks.virtualxid IS NOT DISTINCT FROM blocked_locks.virtualxid
+        AND blocking_locks.transactionid IS NOT DISTINCT FROM blocked_locks.transactionid
+        AND blocking_locks.classid IS NOT DISTINCT FROM blocked_locks.classid
+        AND blocking_locks.objid IS NOT DISTINCT FROM blocked_locks.objid
+        AND blocking_locks.objsubid IS NOT DISTINCT FROM blocked_locks.objsubid
+        AND blocking_locks.pid != blocked_locks.pid
+
+    JOIN pg_catalog.pg_stat_activity blocking_activity ON blocking_activity.pid = blocking_locks.pid
+   WHERE NOT blocked_locks.granted;
+

# 2021-03-20 16:59:56.427285
+SELECT procpid, age(clock_timestamp(), query_start), usename, current_query 
+FROM pg_stat_activity 
+WHERE current_query != '<IDLE>' AND current_query NOT ILIKE '%pg_stat_activity%' 
+ORDER BY query_start desc;
+

# 2021-03-20 17:00:05.619275
+SELECT pid, age(clock_timestamp(), query_start), usename, query 
+FROM pg_stat_activity 
+WHERE query != '<IDLE>' AND query NOT ILIKE '%pg_stat_activity%' 
+ORDER BY query_start desc;

# 2021-03-20 17:00:21.010568
+SELECT pid, age(clock_timestamp(), query_start), usename, query 
+FROM pg_stat_activity 
+WHERE query != '<IDLE>' AND query NOT ILIKE '%pg_stat_activity%' 
+ORDER BY query_start desc;\e

# 2021-03-20 17:00:23.934680
+SELECT pid, age(clock_timestamp(), query_start), usename, query 
+FROM pg_stat_activity 
+ORDER BY query_start desc;

# 2021-03-20 17:01:11.563442
+SELECT pg_cancel_backend(procpid);

# 2021-03-20 17:01:53.185759
+SELECT pid, age(clock_timestamp(), query_start), usename, query 
+FROM pg_stat_activity 
+WHERE query != '<IDLE>' AND query NOT ILIKE '%pg_stat_activity%' 
+ORDER BY query_start desc;\e

# 2021-03-20 17:01:57.561051
+SELECT *
+FROM pg_stat_activity 
+WHERE query != '<IDLE>' AND query NOT ILIKE '%pg_stat_activity%' 
+ORDER BY query_start desc;

# 2021-03-20 17:07:11.126030
+select * from fileserver;

# 2021-03-20 17:07:16.073747
+select * from organization;

# 2021-03-20 17:07:21.188741
+select * from fileserver;

# 2021-03-20 17:10:17.396874
+SELECT *
+FROM pg_stat_activity 
+WHERE query != '<IDLE>' AND query NOT ILIKE '%pg_stat_activity%' 
+ORDER BY query_start desc;

# 2021-03-20 17:21:36.222862
+select * from organization;

# 2021-03-20 17:21:50.092777
+select * from fileserver;

# 2021-03-20 17:22:05.675422
+select * from perm_scheme;

# 2021-03-20 17:22:10.355172
+select * from fileserver;

# 2021-03-20 17:22:29.041564
+\d organization;

# 2021-03-20 17:22:48.158692
+select * from org_resource_mapping;

# 2021-03-20 17:47:13.795269
+explain \e

# 2021-03-20 17:48:36.699525
+explain with tmp1 as (select id from public.fileserver where address_public='xxxx')
+tmp2 as (insert into public.fileserver (address_public,address_adm) values ('xxx', 'yyy') on conflict do nothing returning id)
+select * from tmp1 union all select * from tmp2;

# 2021-03-20 17:48:49.117238
+explain with tmp1 as (select id from public.fileserver where address_public='xxxx')
+tmp2 as (insert into public.fileserver (address_public,address_adm) values ('xxx', 'yyy') on conflict do nothing returning id)
+select * from tmp1 union all select * from tmp2; \e

# 2021-03-20 17:48:53.757113
+explain with tmp1 as (select id from public.fileserver where address_public='xxxx'), 
+tmp2 as (insert into public.fileserver (address_public,address_adm) values ('xxx', 'yyy') on conflict do nothing returning id)
+select * from tmp1 union all select * from tmp2; 

# 2021-03-20 17:49:15.770663
+select * from fileserver;

# 2021-03-20 17:49:42.577579
+explain with tmp1 as (select id from public.fileserver where address_public='xxxx'), 
+tmp2 as (insert into public.fileserver (address_public,address_adm) values ('xxx', 'yyy') on conflict do nothing returning id)
+select * from tmp1 union all select * from tmp2; \e

# 2021-03-20 17:49:57.816168
+explain with tmp1 as (select id from public.fileserver where address_public='fs1.luklak.com'), 
+tmp2 as (insert into public.fileserver (address_public,address_adm) values ('fs1.luklak.com', 'yyy') on conflict do nothing returning id)
+select * from tmp1 union all select * from tmp2; 

# 2021-03-20 17:50:09.203755
+with tmp1 as (select id from public.fileserver where address_public='fs1.luklak.com'), 
+tmp2 as (insert into public.fileserver (address_public,address_adm) values ('fs1.luklak.com', 'yyy') on conflict do nothing returning id)
+select * from tmp1 union all select * from tmp2; 

# 2021-03-20 18:04:47.838752
+select * from fileserver;

# 2021-03-21 22:57:31.792142
+select * from organization;

# 2021-03-21 22:57:41.763996
+select * from fileserver;

# 2021-03-21 22:57:49.254398
+select * from org_resource_mapping;

# 2021-03-22 11:06:25.095102
+select * from organization;

# 2021-03-22 11:09:46.842287
+select * from organization where status = 'active'
+;

# 2021-03-22 11:10:03.625906
+select * from organization where status = 'active';

# 2021-03-22 11:10:13.470106
+select * from organization where status = 'active' order by id;

# 2021-03-22 11:10:20.365194
+select * from organization order by id;

# 2021-03-22 11:11:26.296633
+select * from organization where status != 'active' order by id;

# 2021-03-22 13:15:31.863911
+SELECT pid, age(clock_timestamp(), query_start), usename, query 
+FROM pg_stat_activity 
+WHERE query != '<IDLE>' AND query NOT ILIKE '%pg_stat_activity%' 
+ORDER BY query_start desc;\e

# 2021-03-22 13:15:34.012400
+SELECT pid, age(clock_timestamp(), query_start), usename, query 
+FROM pg_stat_activity 
+WHERE query != '<IDLE>' AND query NOT ILIKE '%pg_stat_activity%' 
+ORDER BY query_start desc;

# 2021-03-22 13:16:56.238072
+SELECT * FROM pg_stat_activity;

# 2021-03-22 13:17:17.394723
+notify a, 'hello';

# 2021-03-22 13:17:29.263127
+notify b, 'hello';

# 2021-03-22 13:17:56.882964
+pg_listening_channels()
+;

# 2021-03-22 13:18:03.553415
+select * from pg_listening_channels;

# 2021-03-22 13:18:21.387178
+select * 
+from pg_listening_channels() 
+;

# 2021-03-22 13:27:35.635435
+select * from pg_listening_channels;

# 2021-03-22 13:27:42.272642
+SELECT * FROM pg_stat_activity;

# 2021-03-22 16:21:07.358128
+select * from pg_listening_channels;

# 2021-03-22 16:21:12.512069
+SELECT * FROM pg_stat_activity;

# 2021-03-25 10:30:50.593015
+\d+ public.user;

# 2021-03-25 10:33:33.258297
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_username_uq
+	UNIQUE (organization_id,username);

# 2021-03-25 10:33:55.442140
+\d organization;

# 2021-03-25 10:34:11.192435
+\d public.user;

# 2021-03-25 10:37:15.646655
+select * from public.user;

# 2021-03-25 10:39:13.322065
+select * from public.user order by username;

# 2021-03-25 10:40:23.850452
+SELECT
+    fruit,
+    COUNT( fruit )
+FROM
+    basket
+GROUP BY
+    fruit
+HAVING
+    COUNT( fruit )> 1
+ORDER BY
+    fruit;

# 2021-03-25 10:40:41.347860
+SELECT
+    fruit,
+    COUNT( fruit )
+FROM
+    basket
+GROUP BY
+    fruit
+HAVING
+    COUNT( fruit )> 1
+ORDER BY
+    fruit;\e

# 2021-03-25 10:41:11.707382
+SELECT id, COUNT( id )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY username;

# 2021-03-25 10:41:14.164313
+SELECT id, COUNT( id )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY username;\e

# 2021-03-25 10:41:22.108288
+SELECT id, COUNT( id )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY id;

# 2021-03-25 10:41:24.447266
+SELECT id, COUNT( id )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY id;\e

# 2021-03-25 10:41:29.219120
+SELECT id, COUNT( id )
+FROM public.user
+GROUP BY id
+HAVING COUNT(id) > 1
+ORDER BY id;

# 2021-03-25 10:41:31.792989
+SELECT id, COUNT( id )
+FROM public.user
+GROUP BY id
+HAVING COUNT(id) > 1
+ORDER BY id;\e

# 2021-03-25 10:41:45.134543
+SELECT username, COUNT( username )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY id;

# 2021-03-25 10:41:50.711280
+SELECT username, COUNT( username )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY username;

# 2021-03-25 10:41:57.174024
+SELECT username, COUNT( username )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY username;\e

# 2021-03-25 10:42:11.924692
+SELECT username, COUNT( username )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY username;

# 2021-03-25 10:43:14.958926
+\e

# 2021-03-25 10:43:42.755258
+DELETE FROM
+    public.user a
+        USING public.user b
+WHERE
+    a.id < b.id
+    AND a.username = b.username;

# 2021-03-25 10:43:51.303560
+SELECT username, COUNT( username )
+FROM public.user
+GROUP BY username
+HAVING COUNT(id) > 1
+ORDER BY username;

# 2021-03-25 10:43:57.611703
+select * from public.user order by username;

# 2021-03-25 10:45:24.191154
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_username_uq
+	UNIQUE (organization_id,username);
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_email_uq
+	UNIQUE (organization_id,email);
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_whoru_id_uq
+	UNIQUE (organization_id,whoru_id);

# 2021-03-25 10:45:40.258755
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_username_uq
+	UNIQUE (organization_id,username);

# 2021-03-25 10:46:29.676491
+DELETE FROM
+    public.user a
+        USING public.user b
+WHERE
+    a.id < b.id
+    AND a.email= b.email;

# 2021-03-25 10:47:42.203628
+\d public.user;

# 2021-03-25 10:47:53.676760
+DELETE FROM
+    public.user a
+        USING public.user b
+WHERE
+    a.id < b.id
+    AND a.whoru_id = b.whoru_id;

# 2021-03-25 10:48:33.756656
+select * from public.user order by whoru_id;

# 2021-03-25 10:48:46.661178
+select whoru_id from public.user order by whoru_id;

# 2021-03-25 10:48:54.012527
+DELETE FROM
+    public.user a
+        USING public.user b
+WHERE
+    a.id < b.id
+    AND a.whoru_id = b.whoru_id;

# 2021-03-25 10:49:15.171354
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_username_uq
+	UNIQUE (organization_id,username);

# 2021-03-25 10:49:21.086769
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_email_uq
+	UNIQUE (organization_id,email);

# 2021-03-25 10:49:27.386862
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_whoru_id_uq
+	UNIQUE (organization_id,whoru_id);
+

# 2021-03-25 11:13:10.969203
+ALTER TYPE public.user_status ADD VALUE 'declined' AFTER 'deactivated';

# 2021-03-25 11:56:51.122770
+select * from public.project;

# 2021-03-25 11:57:33.892489
+select * from public.workspace;

# 2021-03-25 11:58:36.611494
+select p.name,w.name from public.project as p left join public.workspace w ON w.id = p.workspace_id;

# 2021-03-25 12:03:35.050361
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'c467185e-866c-11eb-92e1-0242ac110003' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 12:03:57.579892
+\e

# 2021-03-25 12:04:07.177902
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 12:05:17.251601
+select * from public.workspace;

# 2021-03-25 12:05:38.964739
+select * from scheme where id = 'a1cde68c-7b41-11eb-a136-005056be277d';

# 2021-03-25 12:07:10.224127
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+order by rank desc limit 10;

# 2021-03-25 12:07:16.111086
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 12:07:55.876849
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10; \e

# 2021-03-25 12:07:59.334673
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc limit 10; 

# 2021-03-25 13:39:59.800907
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 13:40:13.213721
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10; \e

# 2021-03-25 13:40:16.397349
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10; 

# 2021-03-25 13:40:27.367408
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;\e

# 2021-03-25 13:40:44.918506
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 13:41:25.344615
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;\e

# 2021-03-25 13:42:07.495963
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 13:42:10.290562
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id is null
+group by ws.id
+order by rank desc limit 10;\e

# 2021-03-25 13:42:17.451856
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 13:42:37.993131
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 13:42:46.663534
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;\e

# 2021-03-25 13:42:49.945758
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 13:43:01.299340
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 13:44:26.178223
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;\e

# 2021-03-25 13:44:33.308533
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+order by rank desc limit 10;

# 2021-03-25 13:44:36.843899
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+order by rank desc limit 10;\e

# 2021-03-25 13:44:52.080105
+select ws.id, ws.name from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+order by rank desc limit 10;

# 2021-03-25 13:44:56.779290
+select ws.id, ws.name from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+order by rank desc limit 10;\e

# 2021-03-25 13:45:02.034829
+select ws.id, ws.name from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+rank desc limit 10;

# 2021-03-25 13:45:04.980623
+select ws.id, ws.name from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+rank desc limit 10;\e

# 2021-03-25 13:45:14.946123
+select ws.id, ws.name from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+limit 10;

# 2021-03-25 13:45:19.718736
+select ws.id, ws.name from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+limit 10;\e

# 2021-03-25 13:45:30.041746
+select ws.*
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+limit 10;

# 2021-03-25 13:46:11.442419
+select ws.*
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+limit 10 \e

# 2021-03-25 13:46:33.081531
+select ws.*, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+limit 10;

# 2021-03-25 13:46:54.149178
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;\e

# 2021-03-25 13:47:07.836378
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 13:57:26.998037
+select * from workspace;

# 2021-03-25 13:57:46.406419
+select * from scheme where id = 'a1cde68c-7b41-11eb-a136-005056be277d';

# 2021-03-25 13:59:09.273820
+select * from scheme where id = '3a90f434-8891-11eb-abb4-005056be277d';

# 2021-03-25 13:59:19.358692
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 13:59:36.697513
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:00:57.774486
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join perm_scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:02:18.793847
+select * from workspace where id = 'f15d6d66-7bce-11eb-9a1c-005056be277d';

# 2021-03-25 14:03:18.918784
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:06:16.066384
+select * from mapping_user;

# 2021-03-25 14:08:26.809162
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:10:09.413397
+explain select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:12:14.781359
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:12:21.105982
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:14:25.950972
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id and sc.project_id is null
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:18:27.408071
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:19:02.739881
+select ws.id, ws.name, mu.scheme_id
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:19:09.123029
+select ws.id, ws.name, mu.scheme_id
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id;

# 2021-03-25 14:19:13.389369
+select ws.id, ws.name, mu.scheme_id
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null;

# 2021-03-25 14:19:40.178332
+select ws.id, ws.name
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id and sc.project_id is null
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null;
+

# 2021-03-25 14:19:59.492226
+select ws.id, ws.name, mu.scheme_id
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id and sc.project_id is null
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null;
+

# 2021-03-25 14:20:27.451742
+select ws.id, ws.name, mu.scheme_id
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id 
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null;
+

# 2021-03-25 14:20:55.456261
+select ws.id, ws.name, mu.scheme_id, sc.id
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id 
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null;
+

# 2021-03-25 14:21:32.413872
+select * from mapping_user;

# 2021-03-25 14:26:25.265771
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:26:37.437564
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id and sc.project_id is null
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:26:44.384870
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id and sc.project_id is null
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;\e

# 2021-03-25 14:27:24.629356
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:27:56.542910
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;\e

# 2021-03-25 14:28:09.917974
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id and sc.project_id is null
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;\e

# 2021-03-25 14:28:18.356266
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id and sc.project_id is null
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:28:45.009258
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id and sc.project_id is null
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:30:16.839876
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:30:46.012761
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:32:41.633005
+SELECT  id, workspace_id, project_id,  workspace_id != id, workspace_id = id, project_id != id, project_id = id from scheme where workspace_id != id and project_id != id;
+

# 2021-03-25 14:33:16.482611
+select * from scheme where id = 'd32ae10c-8560-11eb-8c6a-005056be277d';

# 2021-03-25 14:33:30.173199
+select * from perm_scheme where id = 'd32ae10c-8560-11eb-8c6a-005056be277d';

# 2021-03-25 14:33:54.808337
+\x

# 2021-03-25 14:33:56.464999
+select * from perm_scheme where id = 'd32ae10c-8560-11eb-8c6a-005056be277d';

# 2021-03-25 14:34:09.346945
+select * from project where id = 'd32a2154-8560-11eb-8c6a-005056be277d';

# 2021-03-25 14:35:12.425894
+select * from perm_scheme where id = 'd32ae10c-8560-11eb-8c6a-005056be277d';

# 2021-03-25 14:35:47.899020
+select * from scheme where project_id is not null;

# 2021-03-25 14:35:55.073019
+\x

# 2021-03-25 14:36:07.184856
+select * from scheme where project_id is not null;

# 2021-03-25 14:36:48.928683
+select * from scheme where project_id is not null \e

# 2021-03-25 14:37:11.611643
+select id from scheme where project_id is not null;

# 2021-03-25 14:37:35.796110
+select * from project where \e

# 2021-03-25 14:38:07.039406
+select * from project where id in (
+d4b4ef86-7bce-11eb-9a1c-005056be277d,
+02b79564-7bcf-11eb-87a9-005056be277d,
+2c7ca41c-7bd8-11eb-8865-005056be277d,
+d32ae10c-8560-11eb-8c6a-005056be277d,
+119034ba-8561-11eb-b320-005056be277d,
+e8bfbda2-8561-11eb-a283-005056be277d,
+314e292e-86d3-11eb-9ee7-005056be277d,
+67d79642-86d3-11eb-8e59-005056be277d,
+d4b4ef86-7bce-11eb-9a1c-005056be277d,
+02b79564-7bcf-11eb-87a9-005056be277d,
+2c7ca41c-7bd8-11eb-8865-005056be277d,
+d32afb7e-8560-11eb-8c6a-005056be277d,
+11905864-8561-11eb-b320-005056be277d,
+e8bfd6c0-8561-11eb-a283-005056be277d,
+314e292e-86d3-11eb-9ee7-005056be277d,
+67d79642-86d3-11eb-8e59-005056be277d
+);

# 2021-03-25 14:38:10.411247
+select * from project where id in (
+d4b4ef86-7bce-11eb-9a1c-005056be277d,
+02b79564-7bcf-11eb-87a9-005056be277d,
+2c7ca41c-7bd8-11eb-8865-005056be277d,
+d32ae10c-8560-11eb-8c6a-005056be277d,
+119034ba-8561-11eb-b320-005056be277d,
+e8bfbda2-8561-11eb-a283-005056be277d,
+314e292e-86d3-11eb-9ee7-005056be277d,
+67d79642-86d3-11eb-8e59-005056be277d,
+d4b4ef86-7bce-11eb-9a1c-005056be277d,
+02b79564-7bcf-11eb-87a9-005056be277d,
+2c7ca41c-7bd8-11eb-8865-005056be277d,
+d32afb7e-8560-11eb-8c6a-005056be277d,
+11905864-8561-11eb-b320-005056be277d,
+e8bfd6c0-8561-11eb-a283-005056be277d,
+314e292e-86d3-11eb-9ee7-005056be277d,
+67d79642-86d3-11eb-8e59-005056be277d
+);\e

# 2021-03-25 14:38:23.622719
+select * from project where id in (
+'d4b4ef86-7bce-11eb-9a1c-005056be277d',
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32ae10c-8560-11eb-8c6a-005056be277d',
+'119034ba-8561-11eb-b320-005056be277d',
+'e8bfbda2-8561-11eb-a283-005056be277d',
+'314e292e-86d3-11eb-9ee7-005056be277d',
+'67d79642-86d3-11eb-8e59-005056be277d',
+'d4b4ef86-7bce-11eb-9a1c-005056be277d',
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32afb7e-8560-11eb-8c6a-005056be277d',
+'11905864-8561-11eb-b320-005056be277d',
+'e8bfd6c0-8561-11eb-a283-005056be277d',
+'314e292e-86d3-11eb-9ee7-005056be277d',
+'67d79642-86d3-11eb-8e59-005056be277d'
+);

# 2021-03-25 14:38:44.882509
+select id from project where id in (
+'d4b4ef86-7bce-11eb-9a1c-005056be277d',
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32ae10c-8560-11eb-8c6a-005056be277d',
+'119034ba-8561-11eb-b320-005056be277d',
+'e8bfbda2-8561-11eb-a283-005056be277d',
+'314e292e-86d3-11eb-9ee7-005056be277d',
+'67d79642-86d3-11eb-8e59-005056be277d',
+'d4b4ef86-7bce-11eb-9a1c-005056be277d',
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32afb7e-8560-11eb-8c6a-005056be277d',
+'11905864-8561-11eb-b320-005056be277d',
+'e8bfd6c0-8561-11eb-a283-005056be277d',
+'314e292e-86d3-11eb-9ee7-005056be277d',
+'67d79642-86d3-11eb-8e59-005056be277d'
+);

# 2021-03-25 14:38:59.947248
+select id from project where id in (
+'d4b4ef86-7bce-11eb-9a1c-005056be277d',
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32ae10c-8560-11eb-8c6a-005056be277d',
+'119034ba-8561-11eb-b320-005056be277d',
+'e8bfbda2-8561-11eb-a283-005056be277d',
+'314e292e-86d3-11eb-9ee7-005056be277d',
+'67d79642-86d3-11eb-8e59-005056be277d',
+'d4b4ef86-7bce-11eb-9a1c-005056be277d',
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32afb7e-8560-11eb-8c6a-005056be277d',
+'11905864-8561-11eb-b320-005056be277d',
+'e8bfd6c0-8561-11eb-a283-005056be277d',
+'314e292e-86d3-11eb-9ee7-005056be277d',
+'67d79642-86d3-11eb-8e59-005056be277d'
+);\e

# 2021-03-25 14:39:58.591723
+select id from project where id in (
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32ae10c-8560-11eb-8c6a-005056be277d',
+'119034ba-8561-11eb-b320-005056be277d',
+'e8bfbda2-8561-11eb-a283-005056be277d',
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32afb7e-8560-11eb-8c6a-005056be277d',
+'11905864-8561-11eb-b320-005056be277d',
+'e8bfd6c0-8561-11eb-a283-005056be277d'
+);

# 2021-03-25 14:40:36.670379
+delete from scheme where project_id in (
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32ae10c-8560-11eb-8c6a-005056be277d',
+'119034ba-8561-11eb-b320-005056be277d',
+'e8bfbda2-8561-11eb-a283-005056be277d',
+'02b79564-7bcf-11eb-87a9-005056be277d',
+'2c7ca41c-7bd8-11eb-8865-005056be277d',
+'d32afb7e-8560-11eb-8c6a-005056be277d',
+'11905864-8561-11eb-b320-005056be277d',
+'e8bfd6c0-8561-11eb-a283-005056be277d'
+);

# 2021-03-25 14:40:49.989870
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:40:55.900880
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join scheme sc on sc.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = sc.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:47:27.257077
+select * from workspace where id = 'a1cde68c-7b41-11eb-a136-005056be277d'

# 2021-03-25 14:49:17.871750
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 14:49:23.142893
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;\e

# 2021-03-25 14:49:45.116278
+select ws.id, ws.name
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-25 14:49:59.636288
+select ws.id, ws.name
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id;

# 2021-03-25 14:50:08.628200
+select ws.id, ws.name
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id \e

# 2021-03-25 14:50:25.523517
+select ws.id, ws.name, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id;

# 2021-03-25 14:50:48.077615
+select ws.id, ws.name, mu.user_id
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id, mu.user_id;

# 2021-03-25 17:34:11.474028
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;

# 2021-03-25 17:34:34.217784
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+ from workspace as ws
+ left join project pj on pj.workspace_id = ws.id
+ left join mapping_user mu on mu.scheme_id = pj.id
+ where mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d' or mu.user_id is null
+ group by ws.id
+ order by rank desc limit 10;\e

# 2021-03-25 17:35:27.471486
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc limit 10;

# 2021-03-25 17:36:13.957710
+select ws.id, ws.name, count(pj.workspace_id) as rank, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+group by ws.id
+order by rank desc limit 10;\e

# 2021-03-25 17:37:00.355934
+select ws.id, ws.name, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id
+order by rank desc limit 10;

# 2021-03-25 17:37:05.438002
+select ws.id, ws.name, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-25 17:37:10.760609
+select ws.id, ws.name, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id\e

# 2021-03-25 17:38:35.518507
+select ws.id, ws.name, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-25 17:38:47.677252
+select ws.id, ws.name, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;\e

# 2021-03-25 17:39:06.582170
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-25 17:39:20.213539
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id; \e

# 2021-03-25 17:39:40.456483
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+join project pj on pj.workspace_id = ws.id
+join mapping_user mu on mu.scheme_id = pj.id; 

# 2021-03-25 17:39:48.821396
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id; 

# 2021-03-25 17:40:39.251103
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id; \e

# 2021-03-25 17:42:16.482477
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+inner join project pj on pj.workspace_id = ws.id
+inner join mapping_user mu on mu.scheme_id = pj.id; 

# 2021-03-25 17:45:47.901626
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+inner join project pj on pj.workspace_id = ws.id
+inner join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-25 17:45:58.196296
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+inner join project pj on pj.workspace_id = ws.id
+inner join mapping_user mu on mu.scheme_id = pj.id;\e

# 2021-03-25 17:47:06.469931
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-25 17:47:09.391244
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;\e

# 2021-03-25 17:47:58.077726
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;

# 2021-03-25 17:49:21.934660
+select ws.id, ws.name, mu.user_id, count(*) OVER() as full_count
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id
+left join mapping_user mu on mu.scheme_id = pj.id;\e

# 2021-03-25 17:50:27.108466
+select ws.id, ws.name, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id)
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id;

# 2021-03-25 17:50:34.947024
+select ws.id, ws.name, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id)
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id;\e

# 2021-03-25 17:50:48.227353
+select ws.id, ws.name, mu.user_id, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id)
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id;

# 2021-03-25 17:50:50.606955
+select ws.id, ws.name, mu.user_id, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id)
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id;\e

# 2021-03-25 17:51:23.909069
+select ws.id, ws.name, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id and mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d') as mpcount
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id;

# 2021-03-25 17:51:28.429499
+select ws.id, ws.name, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id and mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d') as mpcount
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id; \e

# 2021-03-25 17:51:46.457555
+select ws.id, ws.name, pj.id, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id and mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d') as mpcount
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id; 

# 2021-03-25 17:52:06.569656
+select * from mapping_user;

# 2021-03-25 17:52:21.543062
+select ws.id, ws.name, pj.id, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id and mu.user_id = 'ebb67184-8b85-11eb-a5bc-005056be277d') as mpcount
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id; \e

# 2021-03-25 17:52:32.029732
+select ws.id, ws.name, pj.id, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id and mu.user_id = 'f864446c-8304-11eb-8bcd-005056be277d') as mpcount
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id; 

# 2021-03-25 17:52:55.263457
+select ws.id, ws.name, pj.id, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id and mu.user_id = 'f864446c-8304-11eb-8bcd-005056be277d') as mpcount
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id order by mpcount;

# 2021-03-25 17:53:01.911200
+select ws.id, ws.name, pj.id, (select count(1) from mapping_user as mu where mu.scheme_id = pj.id and mu.user_id = 'f864446c-8304-11eb-8bcd-005056be277d') as mpcount
+from workspace as ws
+left join project pj on pj.workspace_id = ws.id order by mpcount desc;

# 2021-03-26 10:04:18.475285
+select * from fileserver;

# 2021-03-26 10:04:22.362676
+\d

# 2021-03-26 10:04:27.820528
+select * from land;

# 2021-03-26 10:04:56.427709
+update land set domain = 'http://idealer.luklak.com', adm_domain = 'http://idealer.default.10.10.100.101.xip.io' where id = '81f7c866-86d4-11eb-aa6c-005056be277d'; \e

# 2021-03-26 10:06:14.937404
+update land set domain = 'http://idealer.luklak.devel', adm_domain = 'http://idealer.vip.luklak.devel' where id = '81f7c866-86d4-11eb-aa6c-005056be277d'; 

# 2021-03-26 10:06:21.845655
+ls;

# 2021-03-26 13:34:49.035875
+\?

# 2021-03-26 13:35:07.158629
+\du+

# 2021-03-26 13:35:47.439553
+SELECT * FROM pg_stat_activity;

# 2021-03-26 14:34:43.849861
+create user landlord;

# 2021-03-26 14:34:46.851423
+\du+

# 2021-03-26 14:35:56.135559
+ALTER USER landlord WITH PASSWORD 'fb#b&gH9!%jiAa';

# 2021-03-26 14:46:03.704858
+create user orgpool password 'VM4hJhR43QPsNd#E';

# 2021-03-26 14:54:58.552248
+\?

# 2021-03-26 14:55:18.208157
+\l

# 2021-03-26 14:56:50.861125
+create database orgpool;

# 2021-03-26 14:57:48.990632
+drop database orgpool;

# 2021-03-26 14:57:56.064494
+\i ~/ndl/orgpool/repo/pg/src/main/resources/init.sql

# 2021-03-26 14:58:02.747124
+\l

# 2021-03-26 14:58:21.490652
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-26 14:58:41.853010
+\d

# 2021-03-26 14:58:52.699744
+\u

# 2021-03-26 14:58:54.419905
+\l

# 2021-03-26 15:01:48.138713
+ALTER USER orgpool WITH PASSWORD 'L5Xc3FRKQ2KuFrrS';

# 2021-03-26 15:02:18.904599
+\d

# 2021-03-26 15:02:27.759028
+\?

# 2021-03-26 15:02:34.688525
+\d

# 2021-03-26 15:02:45.726093
+drop table land;

# 2021-03-26 15:03:02.006531
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-26 15:03:06.965524
+\d

# 2021-03-26 15:03:17.078693
+\i ~/ndl/orgpool/repo/pg/src/main/resources/init.sql

# 2021-03-26 15:04:07.144726
+alter user orgpool createdb;

# 2021-03-26 15:04:17.111756
+l;

# 2021-03-26 15:04:32.658029
+\i ~/ndl/orgpool/repo/pg/src/main/resources/init.sql

# 2021-03-26 15:04:43.799107
+alter user orgpool create;

# 2021-03-26 15:07:25.897763
+\d

# 2021-03-26 15:07:27.494034
+\l

# 2021-03-26 15:07:37.213693
+\i ~/ndl/orgpool/repo/pg/src/main/resources/init.sql

# 2021-03-26 15:07:48.273711
+l;

# 2021-03-26 15:12:36.583247
+\d

# 2021-03-26 15:12:40.261760
+\d land;

# 2021-03-26 15:15:01.413095
+insert into land (domain, adm_domain, capacity) value ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-26 15:15:08.857958
+insert into land (domain, adm_domain, capacity) values ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-26 15:22:52.173676
+GRANT ALL PRIVILEGES ON DATABASE orgpool TO orgpool;

# 2021-03-26 15:23:14.113132
+insert into land (domain, adm_domain, capacity) values ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-26 15:24:08.542236
+ALTER DEFAULT PRIVILEGES
+FOR USER username
+IN SCHEMA schema_name
+GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO username;\e

# 2021-03-26 15:24:26.017434
+ALTER DEFAULT PRIVILEGES
+FOR USER orgpool
+IN SCHEMA orgpool
+GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO orgpool;

# 2021-03-26 15:24:31.282900
+ALTER DEFAULT PRIVILEGES
+FOR USER orgpool
+GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO orgpool;

# 2021-03-26 15:24:40.464160
+insert into land (domain, adm_domain, capacity) values ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-26 15:24:46.662334
+insert into public.land (domain, adm_domain, capacity) values ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-26 15:28:37.650727
+SELECT grantee, privilege_type 
+FROM information_schema.role_table_grants 
+WHERE table_name='land';

# 2021-03-26 15:28:52.250458
+\?

# 2021-03-26 15:31:29.287019
+ GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO orgpool;

# 2021-03-26 15:33:15.451072
+ GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO orgpool;

# 2021-03-26 15:33:24.587431
+insert into land (domain, adm_domain, capacity) values ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-26 15:33:52.552360
+
+ALTER DEFAULT PRIVILEGES
+FOR USER username
+IN SCHEMA schema_name
+GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO username\e

# 2021-03-26 15:34:09.631350
+ALTER DEFAULT PRIVILEGES
+FOR USER orgpool
+IN SCHEMA public
+GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO orgpool;

# 2021-03-26 15:34:31.585382
+insert into land (domain, adm_domain, capacity) values ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-26 15:34:59.326404
+ GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO orgpool;

# 2021-03-26 15:36:09.697418
+GRANT USAGE ON SCHEMA public TO orgpool;

# 2021-03-26 15:36:30.615735
+GRANT USAGE ON SCHEMA orgpool TO orgpool;

# 2021-03-26 15:37:04.526352
+GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO orgpool;

# 2021-03-26 15:37:19.296589
+GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO orgpool;

# 2021-03-26 15:37:24.518201
+insert into land (domain, adm_domain, capacity) values ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-26 15:37:44.101638
+GRANT ALL PRIVILEGES ON DATABASE orgpool TO username;

# 2021-03-26 15:37:49.548341
+GRANT ALL PRIVILEGES ON DATABASE orgpool TO orgpool;

# 2021-03-26 15:38:25.977299
+\du+

# 2021-03-26 15:38:31.230447
+\du+ orgpool;

# 2021-03-26 15:39:16.505564
+\c orgpool;

# 2021-03-26 15:39:23.249010
+select grantee, table_catalog, privilege_type, table_schema, table_name from information_schema.table_privileges order by grantee, table_schema, table_name;

# 2021-03-26 15:40:42.731909
+\dt

# 2021-03-26 15:40:46.073370
+\dt+

# 2021-03-26 15:45:36.943041
+select * from land;

# 2021-03-26 15:56:02.684558
+select 
+ * 
+from information_schema.role_table_grants 
+where grantee='orgpool';

# 2021-03-26 15:56:40.544721
+select * from land;

# 2021-03-26 16:08:32.378302
+select * from organization;

# 2021-03-26 16:08:44.462669
+select * from land;

# 2021-03-26 16:12:49.953650
+update land set domain = 'http://idealer.luklak.devel', adm_domain = 'idealer' where id = '81f7c866-86d4-11eb-aa6c-005056be277d'; 

# 2021-03-26 16:15:46.848911
+update land set domain = 'http://idealer.luklak.devel', adm_domain = 'http://idealer' where id = '81f7c866-86d4-11eb-aa6c-005056be277d'; 

# 2021-03-26 16:41:30.359347
+update land set domain = 'http://idealer.luklak.devel', adm_domain = 'http://idealer.default.10.10.100.101.xip.io' where id = '81f7c866-86d4-11eb-aa6c-005056be277d'; 

# 2021-03-26 16:47:12.823062
+\dt+

# 2021-03-26 16:58:48.427704
+\d

# 2021-03-26 16:58:50.565780
+\l

# 2021-03-26 16:58:56.179905
+\?

# 2021-03-26 16:59:03.877038
+drop database orgpool;

# 2021-03-26 17:17:34.533485
+\l;

# 2021-03-26 17:17:40.127097
+drop database orgpool;

# 2021-03-26 17:20:23.476974
+SELECT * FROM pg_stat_activity;

# 2021-03-26 17:20:55.395252
+SELECT * FROM pg_stat_activity where datname = 'orgpool';

# 2021-03-26 17:21:05.450583
+drop database orgpool;

# 2021-03-26 17:21:14.134119
+\l;

# 2021-03-26 17:21:23.169415
+drop database landlord;

# 2021-03-26 17:21:26.767851
+\u;

# 2021-03-26 17:21:30.255885
+\du+

# 2021-03-26 17:21:40.056466
+delete user orgpool;

# 2021-03-26 17:21:44.872778
+drop user orgpool;

# 2021-03-26 17:22:11.252173
+\l

# 2021-03-26 17:22:14.345338
+\?

# 2021-03-26 17:22:23.728000
+\dn

# 2021-03-26 17:22:37.375992
+\db

# 2021-03-26 17:22:44.315672
+\dt

# 2021-03-26 17:22:49.098107
+\dv

# 2021-03-26 17:22:54.543984
+\?

# 2021-03-26 17:23:13.222110
+\dt

# 2021-03-26 17:24:08.169965
+drop user orgpool;

# 2021-03-26 17:24:22.672244
+drop role orgpool;

# 2021-03-26 17:24:33.571400
+\?

# 2021-03-26 17:24:40.400713
+\du

# 2021-03-26 17:24:46.759705
+drop role orgpool;

# 2021-03-26 17:25:15.640182
+drop user orgpool cascade;

# 2021-03-26 17:25:41.267610
+drop role orgpool;

# 2021-03-26 17:25:57.747904
+\du

# 2021-03-26 17:35:08.967892
+GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO fiw;

# 2021-03-26 17:48:04.898383
+show search path;

# 2021-03-26 17:48:11.005535
+show search_path;

# 2021-03-27 11:25:37.383140
+\?

# 2021-03-27 11:25:50.560898
+\du

# 2021-03-27 11:28:14.033250
+\c landlord;

# 2021-03-27 11:28:24.088588
+\l

# 2021-03-27 11:28:29.202641
+\c ems

# 2021-03-27 11:28:35.164861
+\du

# 2021-03-27 11:39:17.204460
+\?

# 2021-03-27 11:39:26.115946
+\

# 2021-03-27 11:39:27.591287
+\d

# 2021-03-27 11:39:32.680020
+\dp key

# 2021-03-27 11:41:39.392209
+select * from pg_roles;

# 2021-03-27 14:21:57.821794
+\d

# 2021-03-27 14:28:32.172657
+SELECT 
+      r.rolname, 
+      ARRAY(SELECT b.rolname
+            FROM pg_catalog.pg_auth_members m
+            JOIN pg_catalog.pg_roles b ON (m.roleid = b.oid)
+            WHERE m.member = r.oid) as memberof
+FROM pg_catalog.pg_roles r
+WHERE r.rolname NOT IN ('pg_signal_backend','rds_iam',
+                        'rds_replication','rds_superuser',
+                        'rdsadmin','rdsrepladmin')
+ORDER BY 1;

# 2021-03-27 14:49:53.458606
+\dn+

# 2021-03-27 14:49:57.266003
+\?

# 2021-03-27 14:50:03.012486
+\dn+

# 2021-03-27 14:59:01.114837
+\c ems

# 2021-03-27 14:59:04.548468
+\dn+

# 2021-03-27 14:59:42.670616
+\d

# 2021-03-27 14:59:45.617054
+\l

# 2021-03-27 15:00:17.121002
+\dn

# 2021-03-27 15:00:19.484035
+\dn+

# 2021-03-27 15:52:47.089540
+\l

# 2021-03-27 15:54:17.002616
+\dp+

# 2021-03-27 16:05:11.035113
+\dp

# 2021-03-27 16:06:53.371301
+\l

# 2021-03-27 16:07:39.618540
+\i ~/ndl/orgpool/repo/pg/src/main/resources/init.sql

# 2021-03-27 16:07:44.876630
+\l

# 2021-03-27 16:07:49.254588
+\c orgpool;

# 2021-03-27 16:07:53.641335
+\dn+

# 2021-03-27 16:08:07.007886
+\du+

# 2021-03-27 16:08:18.044755
+drop user orgpool;

# 2021-03-27 16:08:47.022897
+drop role orgpool;

# 2021-03-27 16:09:18.677785
+\c postgres;

# 2021-03-27 16:18:00.034951
+\?

# 2021-03-27 16:18:06.884195
+\dv+

# 2021-03-27 16:18:10.551616
+\h

# 2021-03-27 16:18:13.393837
+\?

# 2021-03-27 16:18:24.492287
+\dt

# 2021-03-27 16:18:51.929714
+\l

# 2021-03-27 16:19:07.550033
+DROP SCHEMA public CASCADE;
+CREATE SCHEMA public;

# 2021-03-27 16:19:23.814449
+\du+

# 2021-03-27 16:19:32.581158
+drop user orgpool;

# 2021-03-27 16:19:36.579898
+\du+

# 2021-03-27 16:19:44.432482
+\l

# 2021-03-27 16:20:03.520817
+\c orgpool;

# 2021-03-27 16:20:09.451243
+\l;

# 2021-03-27 16:20:12.238779
+\d

# 2021-03-27 16:20:16.090914
+\t+

# 2021-03-27 16:20:20.815943
+\dT+

# 2021-03-27 16:20:42.228359
+\i ~/ndl/orgpool/repo/pg/src/main/resources/init.sql

# 2021-03-27 16:20:49.038306
+\dn+

# 2021-03-27 16:20:53.732848
+\dt+

# 2021-03-27 16:21:01.560421
+\c postgres;

# 2021-03-27 16:21:24.338996
+\dn+

# 2021-03-27 16:21:50.579186
+REVOKE CREATE ON SCHEMA public FROM PUBLIC;
+

# 2021-03-27 16:21:53.414431
+\dn+

# 2021-03-27 16:22:30.260170
+\dt+

# 2021-03-27 16:22:46.981620
+\c orgpool;

# 2021-03-27 16:22:50.298556
+\dn+

# 2021-03-27 16:22:53.187319
+\dt+

# 2021-03-27 16:23:18.041488
+\dp+

# 2021-03-27 16:23:21.429557
+\dp

# 2021-03-27 16:23:27.916501
+\dn+

# 2021-03-27 16:23:34.049802
+REVOKE CREATE ON SCHEMA public FROM PUBLIC;

# 2021-03-27 16:23:36.430366
+\dn+

# 2021-03-27 16:24:47.130193
+REVOKE ALL ON DATABASE orgpool FROM PUBLIC;

# 2021-03-27 16:24:51.046913
+\dn+

# 2021-03-27 16:25:37.746846
+create role readonly;

# 2021-03-27 16:26:37.592134
+\l

# 2021-03-27 16:27:45.913775
+create role orgpool;

# 2021-03-27 16:28:09.557701
+grant connect on database orgpool to orgpool;

# 2021-03-27 16:28:41.903903
+grant usage, on schema public to orgpool;

# 2021-03-27 16:28:46.212582
+grant usage on schema public to orgpool;

# 2021-03-27 16:29:27.986877
+GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO orgpool;

# 2021-03-27 16:29:31.118911
+\dn+

# 2021-03-27 16:30:06.296600
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO orgpool;

# 2021-03-27 16:30:49.077558
+GRANT USAGE ON ALL SEQUENCES IN SCHEMA public TO orgpool;

# 2021-03-27 16:30:51.170177
+\dn+

# 2021-03-27 16:31:08.218411
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO orgpool;

# 2021-03-27 16:31:28.702913
+ALTER USER orgpool WITH PASSWORD 'L5Xc3FRKQ2KuFrrS';

# 2021-03-27 16:32:15.235755
+grant connect on database orgpool to orgpool;

# 2021-03-27 16:32:18.464453
+\dn+

# 2021-03-27 16:32:44.207643
+\l

# 2021-03-27 16:34:15.382434
+alter role orgpool set login to on;

# 2021-03-27 16:35:13.506711
+alter role orgpool login;

# 2021-03-27 16:35:22.286394
+\d

# 2021-03-27 16:35:27.761192
+select * from land;

# 2021-03-27 16:35:39.280894
+insert into land (domain, adm_domain, capacity) values ('http://idealer.luklak.staging', 'http://idealer.vip.luklak.staging', 1000);

# 2021-03-27 16:35:43.590676
+select * from land;

# 2021-03-27 16:56:40.529428
+drop role orgpool;

# 2021-03-27 16:57:09.102374
+\c orgpool;

# 2021-03-27 16:57:11.463734
+drop role orgpool;

# 2021-03-27 16:57:17.867841
+drop role orgpool cascade;

# 2021-03-27 16:57:29.986858
+drop role orgpool;

# 2021-03-27 16:57:45.514328
+\dn+

# 2021-03-27 16:58:21.976177
+\du+ orgpool;

# 2021-03-27 16:58:29.274079
+\du orgpool;

# 2021-03-27 16:59:01.197942
+drop role orgpool;

# 2021-03-27 16:59:38.072322
+drop owned by orgpool;

# 2021-03-27 16:59:40.735836
+drop role orgpool;

# 2021-03-27 17:00:03.608418
+\dt

# 2021-03-27 17:00:05.714577
+\d

# 2021-03-27 17:00:11.493813
+\c orgpool;

# 2021-03-27 17:00:13.498728
+drop role orgpool;

# 2021-03-27 17:00:25.186841
+\dt+ land;

# 2021-03-27 17:02:54.901621
+drop owned by orgpool;

# 2021-03-27 17:03:10.475220
+drop role orgpool;

# 2021-03-27 17:04:55.219587
+REVOKE CREATE ON SCHEMA public FROM PUBLIC;
+REVOKE ALL ON DATABASE orgpool; FROM PUBLIC;
+
+-- Read-only role
+CREATE ROLE readonly;
+GRANT CONNECT ON DATABASE orgpool; TO readonly;
+GRANT USAGE ON SCHEMA public TO readonly;
+GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly;
+
+-- Read/write role
+CREATE ROLE readwrite;
+GRANT CONNECT ON DATABASE orgpool; TO readwrite;
+GRANT USAGE, CREATE ON SCHEMA public TO readwrite;
+GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO readwrite;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO readwrite;
+GRANT USAGE ON ALL SEQUENCES IN SCHEMA public TO readwrite;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO readwrite;

# 2021-03-27 17:05:41.482320
+-- Revoke privileges from 'public' role
+REVOKE CREATE ON SCHEMA public FROM PUBLIC;
+REVOKE ALL ON DATABASE orgpool FROM PUBLIC;
+
+-- Read-only role
+CREATE ROLE readonly;
+GRANT CONNECT ON DATABASE orgpool TO readonly;
+GRANT USAGE ON SCHEMA public TO readonly;
+GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly;
+
+-- Read/write role
+CREATE ROLE readwrite;
+GRANT CONNECT ON DATABASE orgpool TO readwrite;
+GRANT USAGE, CREATE ON SCHEMA public TO readwrite;
+GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO readwrite;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO readwrite;
+GRANT USAGE ON ALL SEQUENCES IN SCHEMA public TO readwrite;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO readwrite;
+

# 2021-03-27 17:06:03.029307
+drop owned by readonly;

# 2021-03-27 17:06:11.163828
+drop owned by readwrite;

# 2021-03-27 17:06:26.136586
+\du

# 2021-03-27 17:06:34.724607
+drop role readonly;

# 2021-03-27 17:06:41.797546
+drop owned by readwrite;

# 2021-03-27 17:06:52.914386
+REVOKE CREATE ON SCHEMA public FROM PUBLIC;
+REVOKE ALL ON DATABASE orgpool FROM PUBLIC;
+

# 2021-03-27 17:07:27.591780
+-- Read/write role
+CREATE ROLE orgpool_read_write;
+GRANT CONNECT ON DATABASE orgpool TO orgpool_read_write;
+GRANT USAGE, CREATE ON SCHEMA public TO orgpool_read_write;
+GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO orgpool_read_write;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO orgpool_read_write;
+GRANT USAGE ON ALL SEQUENCES IN SCHEMA public TO orgpool_read_write;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO orgpool_read_write;

# 2021-03-27 17:07:31.468142
+\du+

# 2021-03-27 17:08:07.572203
+ALTER USER orgpool WITH PASSWORD 'L5Xc3FRKQ2KuFrrS';

# 2021-03-27 17:08:13.452387
+\du+

# 2021-03-27 17:08:33.779976
+CREATE USER orgpool WITH PASSWORD 'L5Xc3FRKQ2KuFrrS';

# 2021-03-27 17:08:52.823544
+GRANT orgpool_read_write TO orgpool;

# 2021-03-27 17:09:05.506847
+-- Checking the granted roles
+SELECT 
+      r.rolname, 
+      ARRAY(SELECT b.rolname
+            FROM pg_catalog.pg_auth_members m
+            JOIN pg_catalog.pg_roles b ON (m.roleid = b.oid)
+            WHERE m.member = r.oid) as memberof
+FROM pg_catalog.pg_roles r
+WHERE r.rolname NOT IN ('pg_signal_backend','rds_iam',
+                        'rds_replication','rds_superuser',
+                        'rdsadmin','rdsrepladmin')
+ORDER BY 1;
+

# 2021-03-27 17:09:19.672465
+select * from land;

# 2021-03-27 17:09:43.161290
+update land set capacity = 2000;

# 2021-03-27 17:09:46.968949
+select * from land;

# 2021-03-27 17:10:45.120932
+\d

# 2021-03-27 17:40:37.605472
+create database landlord;

# 2021-03-27 17:40:39.222503
+\d

# 2021-03-27 17:40:44.471973
+\l

# 2021-03-27 17:40:47.665676
+\c landlord;

# 2021-03-27 17:40:56.461749
+\i ~/ndl/landlord/repo/src/main/resources/init.sql

# 2021-03-27 17:41:15.754019
+REVOKE CREATE ON SCHEMA public FROM PUBLIC;
+REVOKE ALL ON DATABASE landlord FROM PUBLIC;
+

# 2021-03-27 17:41:25.593312
+-- Read/write role
+CREATE ROLE landlord_read_write;
+GRANT CONNECT ON DATABASE landlord TO landlord_read_write;
+GRANT USAGE, CREATE ON SCHEMA public TO landlord_read_write;
+GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO landlord_read_write;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO landlord_read_write;
+GRANT USAGE ON ALL SEQUENCES IN SCHEMA public TO landlord_read_write;
+ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO landlord_read_write;
+

# 2021-03-27 17:45:09.797890
+create user landlord password '7RHu8r2mzsbz29YK';

# 2021-03-27 17:45:12.903806
+\du

# 2021-03-27 17:45:22.666358
+drop user landlord;

# 2021-03-27 17:45:27.092455
+create user landlord password '7RHu8r2mzsbz29YK';

# 2021-03-27 17:45:52.988127
+grant landlord_read_write to landlord;

# 2021-03-27 17:46:03.842725
+-- Checking the granted roles
+SELECT 
+      r.rolname, 
+      ARRAY(SELECT b.rolname
+            FROM pg_catalog.pg_auth_members m
+            JOIN pg_catalog.pg_roles b ON (m.roleid = b.oid)
+            WHERE m.member = r.oid) as memberof
+FROM pg_catalog.pg_roles r
+WHERE r.rolname NOT IN ('pg_signal_backend','rds_iam',
+                        'rds_replication','rds_superuser',
+                        'rdsadmin','rdsrepladmin')
+ORDER BY 1;
+

# 2021-03-27 17:47:31.187594
+\d

# 2021-03-27 17:47:40.085898
+select * from organization;

# 2021-03-30 11:12:49.200443
+select * from land;

# 2021-03-30 11:22:17.318902
+update land set domain = 'http://idealer.luklak.devel', adm_domain = 'http://idealer.vip.luklak.devel' where id = '81f7c866-86d4-11eb-aa6c-005056be277d'; 

# 2021-03-30 11:22:19.521162
+select * from land;

# 2021-03-30 14:21:42.453121
+select * from public.user limit 10;

# 2021-03-30 14:42:35.227322
+\l

# 2021-03-30 14:42:42.450633
+\c orgpool;

# 2021-03-30 14:42:46.963432
+select * from land;

# 2021-03-30 15:04:17.906145
+\l

# 2021-03-30 15:04:24.093518
+\c whoru;

# 2021-03-30 15:04:29.481895
+\d

# 2021-03-30 15:04:35.457346
+select * from totp;

# 2021-03-30 15:04:39.890088
+select * from otp;

# 2021-03-30 15:04:45.256896
+select * from user;

# 2021-03-30 15:04:49.048358
+select * from public.user;

# 2021-03-30 15:05:14.720562
+\d verifiable;

# 2021-03-30 15:05:21.303675
+select * from email_verification;

# 2021-03-30 17:41:50.500531
+select * from organization where key = 'test-600';

# 2021-03-30 17:45:30.405208
+select * from land;

# 2021-03-30 17:45:40.743797
+select * from organization;

# 2021-03-31 10:03:08.845838
+delete from organization where id = '3405b5ac-91cc-11eb-a96c-005056be277d';

# 2021-03-31 10:31:40.158662
+\c whoru;

# 2021-03-31 10:31:42.698971
+\d

# 2021-03-31 10:31:54.188686
+select * from email_verification;

# 2021-03-31 10:32:33.946074
+select * from user;

# 2021-03-31 10:32:39.436849
+select * from public.user;

# 2021-03-31 10:32:59.876314
+\c fiw;

# 2021-03-31 10:33:05.730207
+select * from public.user;

# 2021-03-31 10:33:16.729931
+select * from public.group_mapping;

# 2021-03-31 10:33:22.974142
+select * from public.user_group_mapping;

# 2021-03-31 10:33:43.617856
+update public.user set id = 'a8d46706-912d-11eb-bf2b-005056be2b54';

# 2021-03-31 10:33:45.542517
+select * from public.user_group_mapping;

# 2021-03-31 10:34:32.954923
+update public.user set id = '6d73afb0-91d1-11eb-ab23-005056be2b54';

# 2021-03-31 10:34:43.247326
+select * from public.user_group_mapping;

# 2021-03-31 10:35:06.504197
+update public.user set id = '6d737824-91d1-11eb-ab23-005056be2b54';

# 2021-03-31 10:35:25.875323
+select * from public.user;

# 2021-03-31 10:35:29.394243
+\x

# 2021-03-31 10:35:30.645426
+select * from public.user;

# 2021-03-31 10:35:41.476174
+\c whoru;

# 2021-03-31 10:35:44.223442
+select * from public.user;

# 2021-03-31 10:35:48.913317
+\c fiw;

# 2021-03-31 10:36:05.546740
+update public.user set whoru_id = 'a8d46706-912d-11eb-bf2b-005056be2b54';

# 2021-03-31 10:38:23.114381
+\c orgpool;

# 2021-03-31 10:38:27.319933
+\d

# 2021-03-31 10:38:35.050720
+select * from public.organization;

# 2021-03-31 10:59:43.682493
+\l

# 2021-03-31 10:59:50.769882
+\c ems

# 2021-03-31 10:59:53.379711
+\d

# 2021-03-31 10:59:59.175405
+select * from key;

# 2021-03-31 11:00:04.067093
+\l

# 2021-03-31 13:25:09.665292
+\c landlord;

# 2021-03-31 13:25:12.972295
+\d

# 2021-03-31 13:25:16.474101
+select * from organization;

# 2021-03-31 13:25:53.554735
+select * from fileserver;

# 2021-03-31 13:26:40.473988
+\l

# 2021-03-31 13:26:51.477466
+\c orgpool;

# 2021-03-31 13:26:53.196885
+\d 

# 2021-03-31 13:26:57.430563
+select * from land;

# 2021-03-31 13:27:16.578824
+select * from organization;

# 2021-03-31 13:27:31.133797
+\c landlord;

# 2021-03-31 13:27:40.633112
+select * from organization;

# 2021-03-31 13:27:47.212379
+\c orgpool;

# 2021-03-31 13:27:55.314793
+select * from land;

# 2021-03-31 13:30:04.004990
+insert into organization (id, key, name, status, created_at, updated_at, land_id) value (\e

# 2021-03-31 13:31:23.194092
+select * from organization;

# 2021-03-31 13:31:48.763473
+insert into organization (id, key, name, status, created_at, updated_at, land_id) value (
+'46e300af-76cd-4694-a42a-fa52331a41e6', 'ndl', 'Nguoi di lam', 'active', '2021-03-30 23:30:18.556309-04', '2021-03-30 23:30:23.591974-04', 'ca9c0fba-8edf-11eb-8571-005056be2b54');

# 2021-03-31 13:31:54.533028
+insert into organization (id, key, name, status, created_at, updated_at, land_id) values (
+'46e300af-76cd-4694-a42a-fa52331a41e6', 'ndl', 'Nguoi di lam', 'active', '2021-03-30 23:30:18.556309-04', '2021-03-30 23:30:23.591974-04', 'ca9c0fba-8edf-11eb-8571-005056be2b54');

# 2021-03-31 13:32:05.272079
+select * from land;

# 2021-03-31 13:32:12.765314
+update land set current_org_number = 1;

# 2021-03-31 13:32:14.362110
+select * from land;

# 2021-03-31 13:32:19.706087
+select * from organization;

# 2021-03-31 13:32:29.018653
+\d

# 2021-03-31 13:32:33.158714
+\d org_user;

# 2021-03-31 13:33:18.677154
+\c fiw;

# 2021-03-31 13:33:27.781417
+select * from public.user;

# 2021-03-31 13:33:39.625095
+\c orgpoo;

# 2021-03-31 13:33:42.572603
+\c orgpool

# 2021-03-31 13:34:31.039240
+\c fiw;

# 2021-03-31 13:34:38.283653
+\x

# 2021-03-31 13:34:41.345558
+select * from public.user;

# 2021-03-31 13:34:44.527128
+\x

# 2021-03-31 13:34:48.745851
+\c whoru

# 2021-03-31 13:34:51.100613
+select * from public.user;

# 2021-03-31 13:35:00.435743
+\c fiw;

# 2021-03-31 13:35:07.703828
+\c orgpool

# 2021-03-31 13:36:02.048778
+insert into org_user (organization_id, whoru_id, last_login) values ('46e300af-76cd-4694-a42a-fa52331a41e6', 'a8d46706-912d-11eb-bf2b-005056be2b54', now());

# 2021-03-31 13:36:08.211342
+select * from land;

# 2021-03-31 13:36:11.665225
+select * from organization;

# 2021-03-31 13:36:16.873315
+select * from org_user;

# 2021-03-31 13:36:23.948189
+\c landlord;

# 2021-03-31 13:36:30.597080
+\d

# 2021-03-31 13:48:43.238370
+\c landlord;

# 2021-03-31 13:48:46.948138
+\d land;

# 2021-03-31 13:48:51.763092
+\d fileserver;

# 2021-03-31 13:49:56.680312
+insert into fileserver (address_public, address_adm) values ('static01.luklak.staging', 'static01.vip.luklak.staging');

# 2021-03-31 13:58:30.198701
+select * from organization;

# 2021-03-31 13:58:36.124220
+\c orgpool

# 2021-03-31 13:58:44.653898
+select * from organization;

# 2021-03-31 14:26:25.874756
+\l

# 2021-03-31 14:26:36.698164
+\c whoru

# 2021-03-31 14:26:44.587744
+select * from public.user;

# 2021-03-31 14:26:51.618427
+select * from email;

# 2021-03-31 14:27:23.887007
+select * from email join public.user uu on uu.email_id = email.id where email = 'demo2k@mailinator.com'
+;

# 2021-03-31 14:27:31.667284
+\c fiw;

# 2021-03-31 14:28:09.449335
+select * from public.user where whoru_id = 'a3c450de-232b-11eb-9114-005056be277d';

# 2021-03-31 14:28:28.360224
+select * from organization where key = 'ndl';

# 2021-03-31 14:29:14.164126
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-31 14:30:37.155373
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by created_at;

# 2021-03-31 14:31:37.292570
+\d group;

# 2021-03-31 14:32:10.231748
+\d user;

# 2021-03-31 14:32:30.953569
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by created_at;

# 2021-03-31 14:33:52.020809
+update public.user set whoru_id = 'a3c450de-232b-11eb-9114-005056be277d' where id = 'bde03b72-910d-11eb-b729-005056be277d';

# 2021-03-31 14:34:46.697477
+\c whoru;

# 2021-03-31 14:35:00.326998
+select * from email join public.user uu on uu.email_id = email.id where email = 'demo2k@mailinator.com'
+;

# 2021-03-31 14:35:14.338497
+select * from session;

# 2021-03-31 14:35:28.372590
+select * from session where id = '3d92e57c-9032-11eb-9553-005056be277d';

# 2021-03-31 14:35:41.429249
+\c fiw;

# 2021-03-31 14:36:02.029895
+select * from public.user where whoru_id = 'a3c4af16-232b-11eb-816b-005056be277d';

# 2021-03-31 14:36:40.158875
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by created_at;

# 2021-03-31 14:36:45.659285
+select * from organization where key = 'ndl';

# 2021-03-31 14:37:13.249443
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by created_at;

# 2021-03-31 14:37:39.112508
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and username = 'chaien' order by created_at;

# 2021-03-31 14:37:49.900470
+update public.user set whoru_id = 'a3c450de-232b-11eb-9114-005056be277d' where id = 'bde03b72-910d-11eb-b729-005056be277d';

# 2021-03-31 14:38:29.296070
+update public.user set whoru_id = 'a3c450de-232b-11eb-9114-005056be277d' where id = 'bde03b72-910d-11eb-b729-005056be277d';\e

# 2021-03-31 14:38:50.068369
+update public.user set whoru_id = 'a3c4af16-232b-11eb-816b-005056be277d' where id = 'bde03b72-910d-11eb-b729-005056be277d';

# 2021-03-31 14:45:30.724617
+update public.user set statuc = active where id = 'f864446c-8304-11eb-8bcd-005056be277d';

# 2021-03-31 14:45:38.586876
+update public.user set statuc = 'active' where id = 'f864446c-8304-11eb-8bcd-005056be277d';

# 2021-03-31 14:45:43.054599
+update public.user set status = 'active' where id = 'f864446c-8304-11eb-8bcd-005056be277d';

# 2021-03-31 14:46:34.570844
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and username = 'chaien' order by created_at;

# 2021-03-31 14:46:45.439442
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and username = 'Mr.D' order by created_at;

# 2021-03-31 14:46:48.763857
+\x

# 2021-03-31 14:46:50.153548
+select * from public.user where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and username = 'Mr.D' order by created_at;

# 2021-03-31 14:47:02.995594
+\c whoru;

# 2021-03-31 14:47:11.358700
+select * from public.user where id = 'a3c4af16-232b-11eb-816b-005056be277d';

# 2021-03-31 14:47:40.902683
+select * from public.user join email where "user".email_id = email.id where id = 'a3c4af16-232b-11eb-816b-005056be277d';

# 2021-03-31 14:47:48.924720
+select * from public.user join email on "user".email_id = email.id where id = 'a3c4af16-232b-11eb-816b-005056be277d';

# 2021-03-31 14:48:01.299393
+select * from public.user join email on "user".email_id = email.id where "user".id = 'a3c4af16-232b-11eb-816b-005056be277d';

# 2021-03-31 14:48:11.362480
+\c fiw;

# 2021-03-31 14:48:27.611734
+select * from public.user where whoru_id = 'a3c4af16-232b-11eb-816b-005056be277d';

# 2021-03-31 14:50:16.882234
+\x

# 2021-03-31 14:50:18.313959
+select * from public.user where whoru_id = 'a3c4af16-232b-11eb-816b-005056be277d';

# 2021-03-31 14:50:32.466773
+select * from organization where key = 'ndl';

# 2021-03-31 14:51:57.126929
+select * from public.user where whoru_id = 'a3c4af16-232b-11eb-816b-005056be277d';

# 2021-03-31 14:53:56.703594
+select * from public.group;

# 2021-03-31 14:54:01.384642
+select * from organization where key = 'ndl';

# 2021-03-31 14:54:16.713957
+\d group;

# 2021-03-31 14:54:31.409684
+select * from public.group where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-03-31 14:54:54.945614
+select * from user_group_mapping where group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d';

# 2021-03-31 14:55:37.720993
+select * from user_group_mapping join public.user uu on uu.user_id = user_group_mapping.group_id where user_group_mapping.group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d';

# 2021-03-31 14:55:57.915479
+select * from user_group_mapping join public.user uu on uu.userr_id = user_group_mapping.user_id where user_group_mapping.group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d';

# 2021-03-31 14:56:07.331351
+select * from user_group_mapping join public.user uu on uu.user_id = user_group_mapping.user_id where user_group_mapping.group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d';

# 2021-03-31 14:56:40.608220
+select * from user_group_mapping join public.user uu on uu.id = user_group_mapping.user_id where user_group_mapping.group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d';

# 2021-03-31 14:56:43.887902
+\x

# 2021-03-31 14:56:45.166212
+select * from user_group_mapping join public.user uu on uu.id = user_group_mapping.user_id where user_group_mapping.group_id = '6265c6cc-7d6c-11eb-9adf-005056be277d';

# 2021-03-31 14:57:59.949485
+\c whoru;

# 2021-03-31 14:58:10.067982
+select * from public.user where id = 'f0215f3e-8add-11eb-ba87-005056be277d';

# 2021-03-31 14:58:22.960282
+select * from public.email where id = 'f0213c0c-8add-11eb-9d20-005056be277d';

# 2021-03-31 16:51:21.073681
+select * from public.user where id = 'f0215f3e-8add-11eb-ba87-005056be277d';

# 2021-03-31 16:51:25.302137
+select * from public.user where id != 'f0215f3e-8add-11eb-ba87-005056be277d';

# 2021-03-31 17:22:45.235799
+\l

# 2021-03-31 17:22:57.337465
+\c control_panel

# 2021-03-31 17:23:14.198677
+\c ems

# 2021-03-31 17:23:18.158328
+\d

# 2021-03-31 17:23:25.079189
+select * value;

# 2021-03-31 17:23:30.429104
+select * public.value;

# 2021-03-31 17:23:35.017854
+select * from public.value;

# 2021-03-31 17:23:40.730113
+\x

# 2021-03-31 17:23:42.532831
+select * from public.value;

# 2021-03-31 17:24:41.171905
+\d value;

# 2021-03-31 17:28:31.065201
+select * from public.value;

# 2021-03-31 17:34:50.547678
+\c ems;

# 2021-03-31 17:34:53.297657
+select * from public.value;

# 2021-03-31 17:36:56.376192
+update public.value set body = '{"type": "HTML", "content": "\""}';

# 2021-03-31 17:37:10.893311
+update public.value set body = '{"type": "HTML", "content": "\""}' where id = '122b1898-9143-11eb-90e4-005056be2b54';

# 2021-03-31 17:37:23.556558
+update public.value set body = '{"type": "HTML", "content": "\""}' where id = '122b1898-9143-11eb-90e4-005056be2b54';\e

# 2021-03-31 17:37:38.507988
+select * from public.value;

# 2021-03-31 17:37:47.270203
+update public.value set body = '{"type": "HTML", "content": """}' where id = '122b1898-9143-11eb-90e4-005056be2b54';\e

# 2021-03-31 17:37:50.360916
+update public.value set body = '{"type": "HTML", "content": """}' where id = '122b1898-9143-11eb-90e4-005056be2b54';

# 2021-03-31 17:40:40.761953
+select * from public.value;

# 2021-03-31 17:41:01.608052
+\x

# 2021-03-31 17:41:04.443925
+select * from public.value;

# 2021-03-31 17:46:22.124869
+update public.value set body = '{"type": "HTML", "content": "<div style=\"font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;\">\r\n      <p style=\"text-align: center;\">\r\n        <svg\r\n          width=\"169\"\r\n          height=\"67\"\r\n          viewBox=\"0 0 169 67\"\r\n          fill=\"none\"\r\n          xmlns=\"http:\/\/www.w3.org\/2000\/svg\"\r\n        >\r\n          <path\r\n            d=\"M8.83127 30.7142C8.83127 32.6421 9.46207 33.8305 10.7237 34.2795C11.3808 34.4643 12.2744 34.57 13.4835 34.6228C13.6937 34.6492 13.904 34.6492 14.1143 34.6492H15.3496V42.0966C14.7976 42.1231 14.088 42.1495 13.1943 42.1495C6.96514 42.1495 2.89119 39.9311 0.972491 35.5207C0.473104 34.2266 0.157701 32.9854 0.0525671 31.8234C0.0262835 31.4801 0 31.0311 0 30.4237V1.55816L8.83127 0V30.7142Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M18.0305 29.842V13.2305H26.9932V31.453C26.9932 33.2488 27.8606 34.358 29.569 34.7542C30.3049 34.8334 30.8832 34.8334 31.3037 34.807C32.6705 34.7278 33.9583 34.3052 35.1411 33.5657L35.1937 13.2305H44.1038V41.9639H36.7707L36.3239 41.1981C36.2713 41.0924 36.2187 40.9868 36.1924 40.9076C36.1136 40.6699 36.0347 40.4322 35.9559 40.1681L33.3538 41.3037C32.5653 41.5942 31.7768 41.8055 30.9883 41.9639C29.9895 42.1752 28.9908 42.3073 27.992 42.3337C25.9419 42.4393 24.3123 42.2544 23.077 41.7791C21.4999 41.1717 20.1595 40.0096 19.1081 38.293C18.3985 36.8141 18.0305 33.9883 18.0305 29.842Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M56.6937 25.9076H56.7462L64.7364 13.231H74.251L65.4986 27.1488L74.251 41.9645H64.7364L56.7462 28.6013H56.6937V41.9645H47.8887V1.61089L56.6937 0.0527344V25.9076Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M105.239 30.7415C105.239 32.6694 105.87 33.8578 107.132 34.3068C107.789 34.4917 108.682 34.5973 109.891 34.6501C110.102 34.6765 110.312 34.6765 110.522 34.6765H111.758V42.124C111.206 42.1504 110.496 42.1768 109.602 42.1768C103.373 42.1768 99.2992 39.9584 97.3805 35.548C96.8811 34.254 96.5657 33.0127 96.4605 31.8507C96.4342 31.5074 96.408 31.0584 96.408 30.451V1.5855L105.266 0.0273438V30.7415H105.239Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M138.33 24.3233V42.0176H131.023L130.945 41.7535C130.918 41.6215 130.892 41.5422 130.866 41.4894C130.787 41.3046 130.734 41.1197 130.682 40.882L130.603 40.2218C127.922 41.6215 125.294 42.3345 122.718 42.3345H121.956C119.327 42.3345 117.225 41.3046 115.674 39.271C114.649 37.6865 114.123 35.8906 114.123 33.9363V33.725C114.123 30.239 115.332 27.9414 117.776 26.8058C118.775 26.1455 121.298 25.8022 125.346 25.8022H129.473V24.8251C129.473 22.8179 129.184 21.6823 128.605 21.3654C127.974 20.8901 126.871 20.6524 125.267 20.6524H117.014L117.803 13.3105H126.66C132.311 13.3105 135.781 14.7102 137.147 17.5096C137.936 19.1734 138.33 21.4447 138.33 24.3233ZM126.529 31.6651C124.82 31.6651 123.769 31.85 123.401 32.1933C123.112 32.4838 122.981 33.012 122.981 33.725C122.981 35.3096 123.795 36.1019 125.399 36.1019C126.371 36.1019 127.712 35.7058 129.473 34.9135V31.6651H126.529Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M150.631 25.9603H150.684L158.674 13.2838H168.188L159.436 27.2016L168.188 42.0173H158.674L150.684 28.6541H150.631V42.0173H141.852V1.63722L150.631 0.105469V25.9603Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M83.0266 21.5707L76.7076 27.9199L83.0266 34.2691L89.3455 27.9199L83.0266 21.5707Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M33.1436 63.5921C32.4865 63.9355 31.698 64.1467 30.9358 64.1467C29.4902 64.1467 28.544 63.3281 28.8331 61.6907L29.4902 57.9933H28.36L28.6491 56.4088H29.7793L30.1735 54.2168H32.4602L32.066 56.4088H34.2475L33.9584 57.9933H31.7768L31.1986 61.2945C31.0935 61.9548 31.33 62.2189 31.8294 62.2189C32.1185 62.2189 32.5128 62.1132 32.9596 61.9284L33.1436 63.5921Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M43.3942 59.0223L42.5005 64.0401H40.1876L40.9761 59.6825C41.1601 58.679 40.6607 58.0451 39.6619 58.0451C38.5054 58.0715 37.6381 58.9166 37.4541 60.1051L36.7707 64.0401H34.4578L36.4027 53.0273H38.7157L37.9272 57.4641C38.6631 56.4606 39.7145 55.9852 40.9761 55.9588C42.7896 55.9588 43.7358 57.1472 43.3942 59.0223Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M52.4357 60.74H46.6533C46.7585 61.7436 47.4155 62.351 48.4669 62.351C49.2291 62.351 49.9913 62.0605 50.6484 61.5059L51.6472 62.7207C50.6747 63.6187 49.4131 64.1204 47.9412 64.1204C45.3654 64.1204 44.025 62.483 44.4455 60.0798C44.866 57.6237 46.8636 55.9863 49.308 55.9863C52.1466 55.9863 53.1191 57.835 52.4357 60.74ZM50.4907 59.3931C50.6484 58.3368 50.0702 57.6501 49.0188 57.6501C47.9938 57.6501 47.179 58.3368 46.811 59.3931H50.4907Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M60.3208 56.041L61.1093 61.7719L63.8691 56.041H66.1295L66.8917 61.7719L69.6778 56.041H71.9382L67.6014 64.0431H65.2884L64.4736 58.7612L61.819 64.0431H59.5323L57.9553 56.0674L60.3208 56.041Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M79.8758 60.0534C79.4553 62.483 77.4315 64.1468 74.8294 64.1468C72.2273 64.1468 70.7817 62.5095 71.2023 60.0534C71.6228 57.5973 73.6466 55.9863 76.2487 55.9863C78.8508 55.9863 80.2964 57.5973 79.8758 60.0534ZM73.5415 60.0798C73.3049 61.3739 73.9883 62.2718 75.1711 62.2718C76.3538 62.2718 77.3263 61.3739 77.5629 60.0798C77.7994 58.7857 77.1161 57.8878 75.9333 57.8878C74.7505 57.8878 73.7518 58.7593 73.5415 60.0798Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M87.0249 55.9609L86.6569 58.1001C85.0273 57.9416 83.8708 58.8396 83.6343 60.1864L82.9509 64.0422H80.6379L82.031 56.0666H84.3439L84.0811 57.5191C84.817 56.5155 85.8158 55.9873 87.0249 55.9609Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M90.7834 60.7917L89.5481 61.8745L89.1801 64.0401H86.8672L88.8122 53.0273H91.0988L90.0475 59.0751L93.5432 56.0644H96.1453L92.6496 59.1279L94.8837 64.0401H92.1502L90.7834 60.7917Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M99.7198 56.0396L98.3267 64.0153H96.0138L97.4068 56.0396H99.7198ZM100.088 53.7684C99.9826 54.4287 99.4307 54.904 98.7736 54.904C98.1165 54.904 97.7222 54.4022 97.8536 53.7684C97.9588 53.1082 98.5107 52.6328 99.1678 52.6328C99.8249 52.6328 100.193 53.1082 100.088 53.7684Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M109.392 59.0238L108.498 64.0416H106.186L106.948 59.6841C107.132 58.6805 106.632 58.0467 105.634 58.0467C104.477 58.0731 103.636 58.9182 103.426 60.1066L102.742 64.0416H100.429L101.822 56.066H104.135L103.899 57.4657C104.635 56.4621 105.686 55.9868 106.948 55.9868C108.761 55.9603 109.708 57.1488 109.392 59.0238Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M119.38 56.0383L118.118 63.2745C117.724 65.5457 115.753 66.9982 113.151 66.9982C111.784 66.9982 110.654 66.5757 109.813 65.9418L110.943 64.3309C111.574 64.8591 112.388 65.1231 113.308 65.1231C114.623 65.1231 115.595 64.4365 115.779 63.3537L115.937 62.4558C115.28 63.1953 114.36 63.6178 113.308 63.6178C111.232 63.6178 110.049 62.0861 110.47 59.762C110.864 57.5172 112.546 55.9855 114.596 55.9855C115.7 55.9591 116.462 56.408 116.883 57.1475L117.067 56.0647H119.38V56.0383ZM116.436 59.8148C116.646 58.5736 116.042 57.7285 114.912 57.7285C113.781 57.7285 112.862 58.6 112.651 59.8148C112.441 61.0297 113.046 61.8748 114.202 61.8748C115.306 61.8748 116.226 61.0297 116.436 59.8148Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M127.055 56.041L127.843 61.7719L130.577 56.041H132.837L133.626 61.7719L136.385 56.041H138.672L134.335 64.0431H132.022L131.208 58.7612L128.553 64.0431H126.24L124.689 56.0674L127.055 56.041Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M146.61 60.0534C146.189 62.483 144.165 64.1468 141.563 64.1468C138.961 64.1468 137.516 62.5095 137.936 60.0534C138.357 57.5973 140.38 55.9863 142.983 55.9863C145.585 55.9863 147.03 57.5973 146.61 60.0534ZM140.249 60.0798C140.013 61.3739 140.696 62.2718 141.879 62.2718C143.061 62.2718 144.034 61.3739 144.27 60.0798C144.507 58.7857 143.824 57.8878 142.641 57.8878C141.458 57.8878 140.486 58.7593 140.249 60.0798Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M153.759 55.9609L153.391 58.1001C151.761 57.9416 150.605 58.8396 150.368 60.1864L149.685 64.0422H147.372L148.765 56.0666H151.078L150.815 57.5191C151.551 56.5155 152.55 55.9873 153.759 55.9609Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M157.833 53.0273L155.888 64.0401H153.601L155.52 53.0273H157.833Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M168.031 53.0273L166.112 64.0401H163.825L164.036 62.8781C163.326 63.6968 162.38 64.1457 161.276 64.1457C158.989 64.1457 157.754 62.5083 158.201 60.0258C158.621 57.5962 160.408 55.9852 162.669 55.9852C163.799 55.9852 164.614 56.4342 165.061 57.2529L165.797 53.0538H168.031V53.0273ZM164.509 60.0787C164.745 58.7846 164.062 57.8603 162.879 57.8603C161.67 57.8603 160.698 58.7846 160.461 60.0787C160.251 61.3727 160.908 62.2971 162.117 62.2971C163.273 62.2706 164.272 61.3727 164.509 60.0787Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n        <\/svg>\r\n      <\/p>\r\n      <p style=\"text-align: center;\">\r\n        {{inviter}} from {{orgName}} has invited you to collaborate with them on\r\n        Luklak. Please use the button bellow to continue:\r\n      <\/p>\r\n      <p style=\"text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;\">\r\n        <a style=\"width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;\" href=\"{{acceptUrl}}\">ACCEPT INVITE<\/a>\r\n      <\/p>\r\n      <p style=\"text-align: center;\">\r\n        <p style=\"text-align: center;\">1. You will be asked to login or signup using personal email account.<\/p>\r\n        <p style=\"text-align: center;\">2. If you think this invitation is irrelevant to you, please <a href=\"{{declineUrl}}\">click here<\/a> to decline.<\/p>\r\n        <\/ol>\r\n      <\/p>\r\n      <hr\/>\r\n      <p>\r\n        If you cannot click the button above, please use this link to join {{orgName}}:\r\n        <a href=\"{{acceptUrl}}\">{{acceptUrl}}<\/a>\r\n      <\/p>\r\n    <\/div>"}' where id = 'bfc9ec02-920d-11eb-8e10-005056be2b54';

# 2021-04-01 10:17:24.151596
+\c ems;

# 2021-04-01 10:17:30.475334
+select * from public.value;

# 2021-04-01 14:46:25.767950
+select * from public.user;

# 2021-04-01 14:47:50.030230
+select * from public.group;

# 2021-04-01 14:48:51.772719
+select * from public.organization where id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-04-01 14:48:59.815055
+select * from public.user;

# 2021-04-01 14:49:01.985129
+\x

# 2021-04-01 14:49:09.062924
+select * from public.user;

# 2021-04-01 14:49:13.751832
+\x

# 2021-04-01 14:49:15.069969
+select * from public.user;

# 2021-04-01 14:50:13.547042
+insert into public.user (organization_id, username, email, display_name, status, whoru_id) values \e

# 2021-04-01 14:51:45.519310
+insert into public.user (organization_id, username, email, display_name, status, whoru_id) values
+('46e300af-76cd-4694-a42a-fa52331a41e6', "anhphan", "anh.phan@luklak.com" "anh.phan", 'active', "a3c4af16-232b-11eb-816b-005056be277d");

# 2021-04-01 14:51:51.745556
+insert into public.user (organization_id, username, email, display_name, status, whoru_id) values
+('46e300af-76cd-4694-a42a-fa52331a41e6', "anhphan", "anh.phan@luklak.com", "anh.phan", 'active', "a3c4af16-232b-11eb-816b-005056be277d");

# 2021-04-01 14:51:55.056484
+insert into public.user (organization_id, username, email, display_name, status, whoru_id) values
+('46e300af-76cd-4694-a42a-fa52331a41e6', "anhphan", "anh.phan@luklak.com", "anh.phan", 'active', "a3c4af16-232b-11eb-816b-005056be277d");\e

# 2021-04-01 14:52:22.689519
+insert into public.user (organization_id, username, email, display_name, status, whoru_id) values
+('46e300af-76cd-4694-a42a-fa52331a41e6', 'anhphan', 'anh.phan@luklak.com', 'anh.phan', 'active', 'a3c4af16-232b-11eb-816b-005056be277d');

# 2021-04-01 14:53:04.906460
+select * from public.group where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-04-01 14:53:20.706307
+select * from public.user;

# 2021-04-01 14:54:13.461668
+insert into public.user_group_mapping (group_id, user_id) values ('6265c6cc-7d6c-11eb-9adf-005056be277d', 'c52669c8-7b38-11eb-94de-005056be277d');

# 2021-04-01 14:55:00.897445
+insert into public.user_group_mapping (group_id, user_id) values ('6265c6cc-7d6c-11eb-9adf-005056be277d', '313c2920-92bf-11eb-9a03-005056be277d');

# 2021-04-01 15:52:15.599204
+select * from public.user;

# 2021-04-01 15:52:22.347828
+select * from public.user_group_mapping;

# 2021-04-01 15:53:11.259665
+select *, usr.name from public.user_group_mapping join public.user usr on usr.id = user_group_mapping.user_id;

# 2021-04-01 15:53:23.914848
+select public.user_group_mapping.*, usr.name from public.user_group_mapping join public.user usr on usr.id = user_group_mapping.user_id;

# 2021-04-01 15:53:39.204548
+select mm.*, usr.name from public.user_group_mapping as mm join public.user usr on usr.id = mm.user_id;

# 2021-04-01 15:53:49.588000
+select mm.*, usr.username from public.user_group_mapping as mm join public.user usr on usr.id = mm.user_id;

# 2021-04-01 15:54:23.927596
+select mm.*, usr.username from public.user_group_mapping as mm
+join public.user usr on usr.id = mm.user_id
+join public.group gr on gr.id = mm.group_id;

# 2021-04-01 15:54:39.824691
+select mm.*, usr.username, gr.name from public.user_group_mapping as mm
+left join public.user usr on usr.id = mm.user_id
+left join public.group gr on gr.id = mm.group_id;

# 2021-04-01 15:55:08.585302
+select * from public.group;

# 2021-04-01 15:55:18.688237
+select mm.*, usr.username, gr.name from public.user_group_mapping as mm
+left join public.user usr on usr.id = mm.user_id
+left join public.group gr on gr.id = mm.group_id;

# 2021-04-01 15:56:18.945799
+select * from public.group where organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-04-01 15:58:09.816826
+select * from public.user left join user_group_mapping mm where mm.group_id != '49c8848e-7b36-11eb-9b42-005056be277d';

# 2021-04-01 15:58:35.010461
+select * from public.user left join user_group_mapping mm on  where mm.group_id != '49c8848e-7b36-11eb-9b42-005056be277d';\e

# 2021-04-01 15:59:05.927644
+select * from public.user as usr left join user_group_mapping mm on mm.user_id = usr.id where mm.group_id != '49c8848e-7b36-11eb-9b42-005056be277d';

# 2021-04-01 15:59:13.238018
+select * from public.user as usr left join user_group_mapping mm on mm.user_id = usr.id where mm.group_id != '49c8848e-7b36-11eb-9b42-005056be277d';\e

# 2021-04-01 15:59:32.261651
+select * from public.user as usr, user_group_mapping as mm
+= usr.id where mm.group_id != '49c8848e-7b36-11eb-9b42-005056be277d';\e

# 2021-04-01 15:59:36.616078
+select * from public.user as usr, user_group_mapping as mm
+where mm.group_id != '49c8848e-7b36-11eb-9b42-005056be277d';

# 2021-04-01 16:09:40.696045
+\c ems;

# 2021-04-01 16:09:53.207304
+select * from public.email;

# 2021-04-01 16:10:03.578446
+select * from public.value;

# 2021-04-01 16:13:36.970836
+update public.value set body = '{"type": "HTML", "content": "<div style=\"font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;\">\r\n      <p style=\"text-align: center;\">\r\n        <svg\r\n          width=\"169\"\r\n          height=\"67\"\r\n          viewBox=\"0 0 169 67\"\r\n          fill=\"none\"\r\n          xmlns=\"http:\/\/www.w3.org\/2000\/svg\"\r\n        >\r\n          <path\r\n            d=\"M8.83127 30.7142C8.83127 32.6421 9.46207 33.8305 10.7237 34.2795C11.3808 34.4643 12.2744 34.57 13.4835 34.6228C13.6937 34.6492 13.904 34.6492 14.1143 34.6492H15.3496V42.0966C14.7976 42.1231 14.088 42.1495 13.1943 42.1495C6.96514 42.1495 2.89119 39.9311 0.972491 35.5207C0.473104 34.2266 0.157701 32.9854 0.0525671 31.8234C0.0262835 31.4801 0 31.0311 0 30.4237V1.55816L8.83127 0V30.7142Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M18.0305 29.842V13.2305H26.9932V31.453C26.9932 33.2488 27.8606 34.358 29.569 34.7542C30.3049 34.8334 30.8832 34.8334 31.3037 34.807C32.6705 34.7278 33.9583 34.3052 35.1411 33.5657L35.1937 13.2305H44.1038V41.9639H36.7707L36.3239 41.1981C36.2713 41.0924 36.2187 40.9868 36.1924 40.9076C36.1136 40.6699 36.0347 40.4322 35.9559 40.1681L33.3538 41.3037C32.5653 41.5942 31.7768 41.8055 30.9883 41.9639C29.9895 42.1752 28.9908 42.3073 27.992 42.3337C25.9419 42.4393 24.3123 42.2544 23.077 41.7791C21.4999 41.1717 20.1595 40.0096 19.1081 38.293C18.3985 36.8141 18.0305 33.9883 18.0305 29.842Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M56.6937 25.9076H56.7462L64.7364 13.231H74.251L65.4986 27.1488L74.251 41.9645H64.7364L56.7462 28.6013H56.6937V41.9645H47.8887V1.61089L56.6937 0.0527344V25.9076Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M105.239 30.7415C105.239 32.6694 105.87 33.8578 107.132 34.3068C107.789 34.4917 108.682 34.5973 109.891 34.6501C110.102 34.6765 110.312 34.6765 110.522 34.6765H111.758V42.124C111.206 42.1504 110.496 42.1768 109.602 42.1768C103.373 42.1768 99.2992 39.9584 97.3805 35.548C96.8811 34.254 96.5657 33.0127 96.4605 31.8507C96.4342 31.5074 96.408 31.0584 96.408 30.451V1.5855L105.266 0.0273438V30.7415H105.239Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M138.33 24.3233V42.0176H131.023L130.945 41.7535C130.918 41.6215 130.892 41.5422 130.866 41.4894C130.787 41.3046 130.734 41.1197 130.682 40.882L130.603 40.2218C127.922 41.6215 125.294 42.3345 122.718 42.3345H121.956C119.327 42.3345 117.225 41.3046 115.674 39.271C114.649 37.6865 114.123 35.8906 114.123 33.9363V33.725C114.123 30.239 115.332 27.9414 117.776 26.8058C118.775 26.1455 121.298 25.8022 125.346 25.8022H129.473V24.8251C129.473 22.8179 129.184 21.6823 128.605 21.3654C127.974 20.8901 126.871 20.6524 125.267 20.6524H117.014L117.803 13.3105H126.66C132.311 13.3105 135.781 14.7102 137.147 17.5096C137.936 19.1734 138.33 21.4447 138.33 24.3233ZM126.529 31.6651C124.82 31.6651 123.769 31.85 123.401 32.1933C123.112 32.4838 122.981 33.012 122.981 33.725C122.981 35.3096 123.795 36.1019 125.399 36.1019C126.371 36.1019 127.712 35.7058 129.473 34.9135V31.6651H126.529Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M150.631 25.9603H150.684L158.674 13.2838H168.188L159.436 27.2016L168.188 42.0173H158.674L150.684 28.6541H150.631V42.0173H141.852V1.63722L150.631 0.105469V25.9603Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M83.0266 21.5707L76.7076 27.9199L83.0266 34.2691L89.3455 27.9199L83.0266 21.5707Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M33.1436 63.5921C32.4865 63.9355 31.698 64.1467 30.9358 64.1467C29.4902 64.1467 28.544 63.3281 28.8331 61.6907L29.4902 57.9933H28.36L28.6491 56.4088H29.7793L30.1735 54.2168H32.4602L32.066 56.4088H34.2475L33.9584 57.9933H31.7768L31.1986 61.2945C31.0935 61.9548 31.33 62.2189 31.8294 62.2189C32.1185 62.2189 32.5128 62.1132 32.9596 61.9284L33.1436 63.5921Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M43.3942 59.0223L42.5005 64.0401H40.1876L40.9761 59.6825C41.1601 58.679 40.6607 58.0451 39.6619 58.0451C38.5054 58.0715 37.6381 58.9166 37.4541 60.1051L36.7707 64.0401H34.4578L36.4027 53.0273H38.7157L37.9272 57.4641C38.6631 56.4606 39.7145 55.9852 40.9761 55.9588C42.7896 55.9588 43.7358 57.1472 43.3942 59.0223Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M52.4357 60.74H46.6533C46.7585 61.7436 47.4155 62.351 48.4669 62.351C49.2291 62.351 49.9913 62.0605 50.6484 61.5059L51.6472 62.7207C50.6747 63.6187 49.4131 64.1204 47.9412 64.1204C45.3654 64.1204 44.025 62.483 44.4455 60.0798C44.866 57.6237 46.8636 55.9863 49.308 55.9863C52.1466 55.9863 53.1191 57.835 52.4357 60.74ZM50.4907 59.3931C50.6484 58.3368 50.0702 57.6501 49.0188 57.6501C47.9938 57.6501 47.179 58.3368 46.811 59.3931H50.4907Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M60.3208 56.041L61.1093 61.7719L63.8691 56.041H66.1295L66.8917 61.7719L69.6778 56.041H71.9382L67.6014 64.0431H65.2884L64.4736 58.7612L61.819 64.0431H59.5323L57.9553 56.0674L60.3208 56.041Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M79.8758 60.0534C79.4553 62.483 77.4315 64.1468 74.8294 64.1468C72.2273 64.1468 70.7817 62.5095 71.2023 60.0534C71.6228 57.5973 73.6466 55.9863 76.2487 55.9863C78.8508 55.9863 80.2964 57.5973 79.8758 60.0534ZM73.5415 60.0798C73.3049 61.3739 73.9883 62.2718 75.1711 62.2718C76.3538 62.2718 77.3263 61.3739 77.5629 60.0798C77.7994 58.7857 77.1161 57.8878 75.9333 57.8878C74.7505 57.8878 73.7518 58.7593 73.5415 60.0798Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M87.0249 55.9609L86.6569 58.1001C85.0273 57.9416 83.8708 58.8396 83.6343 60.1864L82.9509 64.0422H80.6379L82.031 56.0666H84.3439L84.0811 57.5191C84.817 56.5155 85.8158 55.9873 87.0249 55.9609Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M90.7834 60.7917L89.5481 61.8745L89.1801 64.0401H86.8672L88.8122 53.0273H91.0988L90.0475 59.0751L93.5432 56.0644H96.1453L92.6496 59.1279L94.8837 64.0401H92.1502L90.7834 60.7917Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M99.7198 56.0396L98.3267 64.0153H96.0138L97.4068 56.0396H99.7198ZM100.088 53.7684C99.9826 54.4287 99.4307 54.904 98.7736 54.904C98.1165 54.904 97.7222 54.4022 97.8536 53.7684C97.9588 53.1082 98.5107 52.6328 99.1678 52.6328C99.8249 52.6328 100.193 53.1082 100.088 53.7684Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M109.392 59.0238L108.498 64.0416H106.186L106.948 59.6841C107.132 58.6805 106.632 58.0467 105.634 58.0467C104.477 58.0731 103.636 58.9182 103.426 60.1066L102.742 64.0416H100.429L101.822 56.066H104.135L103.899 57.4657C104.635 56.4621 105.686 55.9868 106.948 55.9868C108.761 55.9603 109.708 57.1488 109.392 59.0238Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M119.38 56.0383L118.118 63.2745C117.724 65.5457 115.753 66.9982 113.151 66.9982C111.784 66.9982 110.654 66.5757 109.813 65.9418L110.943 64.3309C111.574 64.8591 112.388 65.1231 113.308 65.1231C114.623 65.1231 115.595 64.4365 115.779 63.3537L115.937 62.4558C115.28 63.1953 114.36 63.6178 113.308 63.6178C111.232 63.6178 110.049 62.0861 110.47 59.762C110.864 57.5172 112.546 55.9855 114.596 55.9855C115.7 55.9591 116.462 56.408 116.883 57.1475L117.067 56.0647H119.38V56.0383ZM116.436 59.8148C116.646 58.5736 116.042 57.7285 114.912 57.7285C113.781 57.7285 112.862 58.6 112.651 59.8148C112.441 61.0297 113.046 61.8748 114.202 61.8748C115.306 61.8748 116.226 61.0297 116.436 59.8148Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M127.055 56.041L127.843 61.7719L130.577 56.041H132.837L133.626 61.7719L136.385 56.041H138.672L134.335 64.0431H132.022L131.208 58.7612L128.553 64.0431H126.24L124.689 56.0674L127.055 56.041Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M146.61 60.0534C146.189 62.483 144.165 64.1468 141.563 64.1468C138.961 64.1468 137.516 62.5095 137.936 60.0534C138.357 57.5973 140.38 55.9863 142.983 55.9863C145.585 55.9863 147.03 57.5973 146.61 60.0534ZM140.249 60.0798C140.013 61.3739 140.696 62.2718 141.879 62.2718C143.061 62.2718 144.034 61.3739 144.27 60.0798C144.507 58.7857 143.824 57.8878 142.641 57.8878C141.458 57.8878 140.486 58.7593 140.249 60.0798Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M153.759 55.9609L153.391 58.1001C151.761 57.9416 150.605 58.8396 150.368 60.1864L149.685 64.0422H147.372L148.765 56.0666H151.078L150.815 57.5191C151.551 56.5155 152.55 55.9873 153.759 55.9609Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M157.833 53.0273L155.888 64.0401H153.601L155.52 53.0273H157.833Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M168.031 53.0273L166.112 64.0401H163.825L164.036 62.8781C163.326 63.6968 162.38 64.1457 161.276 64.1457C158.989 64.1457 157.754 62.5083 158.201 60.0258C158.621 57.5962 160.408 55.9852 162.669 55.9852C163.799 55.9852 164.614 56.4342 165.061 57.2529L165.797 53.0538H168.031V53.0273ZM164.509 60.0787C164.745 58.7846 164.062 57.8603 162.879 57.8603C161.67 57.8603 160.698 58.7846 160.461 60.0787C160.251 61.3727 160.908 62.2971 162.117 62.2971C163.273 62.2706 164.272 61.3727 164.509 60.0787Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n        <\/svg>\r\n      <\/p>\r\n      <p style=\"text-align: center;\">\r\n        {{inviter}} from {{orgName}} has invited you to collaborate with them on\r\n        Luklak. Please use the button bellow to continue:\r\n      <\/p>\r\n      <p style=\"text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;\">\r\n        <a style=\"width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;\" href=\"{{acceptUrl}}\">ACCEPT INVITE<\/a>\r\n      <\/p>\r\n      <p style=\"text-align: center;\">\r\n        <p style=\"text-align: center;\">1. You will be asked to login or signup using personal email account.<\/p>\r\n        <p style=\"text-align: center;\">2. If you think this invitation is irrelevant to you, please <a href=\"{{declineUrl}}\">click here<\/a> to decline.<\/p>\r\n        <\/ol>\r\n      <\/p>\r\n      <hr\/>\r\n      <p>\r\n        If you cannot click the button above, please use this link to join {{orgName}}:\r\n        <a href=\"{{acceptUrl}}\">{{acceptUrl}}<\/a>\r\n      <\/p>\r\n    <\/div>"}' where id = 'bfc9ec02-920d-11eb-8e10-005056be2b54'; \e

# 2021-04-01 16:14:12.615979
+update public.value set body = '{"type": "HTML", "content": "<div style=\"font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;\">\r\n      <p style=\"text-align: center;\">\r\n        <svg\r\n          width=\"169\"\r\n          height=\"67\"\r\n          viewBox=\"0 0 169 67\"\r\n          fill=\"none\"\r\n          xmlns=\"http:\/\/www.w3.org\/2000\/svg\"\r\n        >\r\n          <path\r\n            d=\"M8.83127 30.7142C8.83127 32.6421 9.46207 33.8305 10.7237 34.2795C11.3808 34.4643 12.2744 34.57 13.4835 34.6228C13.6937 34.6492 13.904 34.6492 14.1143 34.6492H15.3496V42.0966C14.7976 42.1231 14.088 42.1495 13.1943 42.1495C6.96514 42.1495 2.89119 39.9311 0.972491 35.5207C0.473104 34.2266 0.157701 32.9854 0.0525671 31.8234C0.0262835 31.4801 0 31.0311 0 30.4237V1.55816L8.83127 0V30.7142Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M18.0305 29.842V13.2305H26.9932V31.453C26.9932 33.2488 27.8606 34.358 29.569 34.7542C30.3049 34.8334 30.8832 34.8334 31.3037 34.807C32.6705 34.7278 33.9583 34.3052 35.1411 33.5657L35.1937 13.2305H44.1038V41.9639H36.7707L36.3239 41.1981C36.2713 41.0924 36.2187 40.9868 36.1924 40.9076C36.1136 40.6699 36.0347 40.4322 35.9559 40.1681L33.3538 41.3037C32.5653 41.5942 31.7768 41.8055 30.9883 41.9639C29.9895 42.1752 28.9908 42.3073 27.992 42.3337C25.9419 42.4393 24.3123 42.2544 23.077 41.7791C21.4999 41.1717 20.1595 40.0096 19.1081 38.293C18.3985 36.8141 18.0305 33.9883 18.0305 29.842Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M56.6937 25.9076H56.7462L64.7364 13.231H74.251L65.4986 27.1488L74.251 41.9645H64.7364L56.7462 28.6013H56.6937V41.9645H47.8887V1.61089L56.6937 0.0527344V25.9076Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M105.239 30.7415C105.239 32.6694 105.87 33.8578 107.132 34.3068C107.789 34.4917 108.682 34.5973 109.891 34.6501C110.102 34.6765 110.312 34.6765 110.522 34.6765H111.758V42.124C111.206 42.1504 110.496 42.1768 109.602 42.1768C103.373 42.1768 99.2992 39.9584 97.3805 35.548C96.8811 34.254 96.5657 33.0127 96.4605 31.8507C96.4342 31.5074 96.408 31.0584 96.408 30.451V1.5855L105.266 0.0273438V30.7415H105.239Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M138.33 24.3233V42.0176H131.023L130.945 41.7535C130.918 41.6215 130.892 41.5422 130.866 41.4894C130.787 41.3046 130.734 41.1197 130.682 40.882L130.603 40.2218C127.922 41.6215 125.294 42.3345 122.718 42.3345H121.956C119.327 42.3345 117.225 41.3046 115.674 39.271C114.649 37.6865 114.123 35.8906 114.123 33.9363V33.725C114.123 30.239 115.332 27.9414 117.776 26.8058C118.775 26.1455 121.298 25.8022 125.346 25.8022H129.473V24.8251C129.473 22.8179 129.184 21.6823 128.605 21.3654C127.974 20.8901 126.871 20.6524 125.267 20.6524H117.014L117.803 13.3105H126.66C132.311 13.3105 135.781 14.7102 137.147 17.5096C137.936 19.1734 138.33 21.4447 138.33 24.3233ZM126.529 31.6651C124.82 31.6651 123.769 31.85 123.401 32.1933C123.112 32.4838 122.981 33.012 122.981 33.725C122.981 35.3096 123.795 36.1019 125.399 36.1019C126.371 36.1019 127.712 35.7058 129.473 34.9135V31.6651H126.529Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M150.631 25.9603H150.684L158.674 13.2838H168.188L159.436 27.2016L168.188 42.0173H158.674L150.684 28.6541H150.631V42.0173H141.852V1.63722L150.631 0.105469V25.9603Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M83.0266 21.5707L76.7076 27.9199L83.0266 34.2691L89.3455 27.9199L83.0266 21.5707Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M33.1436 63.5921C32.4865 63.9355 31.698 64.1467 30.9358 64.1467C29.4902 64.1467 28.544 63.3281 28.8331 61.6907L29.4902 57.9933H28.36L28.6491 56.4088H29.7793L30.1735 54.2168H32.4602L32.066 56.4088H34.2475L33.9584 57.9933H31.7768L31.1986 61.2945C31.0935 61.9548 31.33 62.2189 31.8294 62.2189C32.1185 62.2189 32.5128 62.1132 32.9596 61.9284L33.1436 63.5921Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M43.3942 59.0223L42.5005 64.0401H40.1876L40.9761 59.6825C41.1601 58.679 40.6607 58.0451 39.6619 58.0451C38.5054 58.0715 37.6381 58.9166 37.4541 60.1051L36.7707 64.0401H34.4578L36.4027 53.0273H38.7157L37.9272 57.4641C38.6631 56.4606 39.7145 55.9852 40.9761 55.9588C42.7896 55.9588 43.7358 57.1472 43.3942 59.0223Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M52.4357 60.74H46.6533C46.7585 61.7436 47.4155 62.351 48.4669 62.351C49.2291 62.351 49.9913 62.0605 50.6484 61.5059L51.6472 62.7207C50.6747 63.6187 49.4131 64.1204 47.9412 64.1204C45.3654 64.1204 44.025 62.483 44.4455 60.0798C44.866 57.6237 46.8636 55.9863 49.308 55.9863C52.1466 55.9863 53.1191 57.835 52.4357 60.74ZM50.4907 59.3931C50.6484 58.3368 50.0702 57.6501 49.0188 57.6501C47.9938 57.6501 47.179 58.3368 46.811 59.3931H50.4907Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M60.3208 56.041L61.1093 61.7719L63.8691 56.041H66.1295L66.8917 61.7719L69.6778 56.041H71.9382L67.6014 64.0431H65.2884L64.4736 58.7612L61.819 64.0431H59.5323L57.9553 56.0674L60.3208 56.041Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M79.8758 60.0534C79.4553 62.483 77.4315 64.1468 74.8294 64.1468C72.2273 64.1468 70.7817 62.5095 71.2023 60.0534C71.6228 57.5973 73.6466 55.9863 76.2487 55.9863C78.8508 55.9863 80.2964 57.5973 79.8758 60.0534ZM73.5415 60.0798C73.3049 61.3739 73.9883 62.2718 75.1711 62.2718C76.3538 62.2718 77.3263 61.3739 77.5629 60.0798C77.7994 58.7857 77.1161 57.8878 75.9333 57.8878C74.7505 57.8878 73.7518 58.7593 73.5415 60.0798Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M87.0249 55.9609L86.6569 58.1001C85.0273 57.9416 83.8708 58.8396 83.6343 60.1864L82.9509 64.0422H80.6379L82.031 56.0666H84.3439L84.0811 57.5191C84.817 56.5155 85.8158 55.9873 87.0249 55.9609Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M90.7834 60.7917L89.5481 61.8745L89.1801 64.0401H86.8672L88.8122 53.0273H91.0988L90.0475 59.0751L93.5432 56.0644H96.1453L92.6496 59.1279L94.8837 64.0401H92.1502L90.7834 60.7917Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M99.7198 56.0396L98.3267 64.0153H96.0138L97.4068 56.0396H99.7198ZM100.088 53.7684C99.9826 54.4287 99.4307 54.904 98.7736 54.904C98.1165 54.904 97.7222 54.4022 97.8536 53.7684C97.9588 53.1082 98.5107 52.6328 99.1678 52.6328C99.8249 52.6328 100.193 53.1082 100.088 53.7684Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M109.392 59.0238L108.498 64.0416H106.186L106.948 59.6841C107.132 58.6805 106.632 58.0467 105.634 58.0467C104.477 58.0731 103.636 58.9182 103.426 60.1066L102.742 64.0416H100.429L101.822 56.066H104.135L103.899 57.4657C104.635 56.4621 105.686 55.9868 106.948 55.9868C108.761 55.9603 109.708 57.1488 109.392 59.0238Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M119.38 56.0383L118.118 63.2745C117.724 65.5457 115.753 66.9982 113.151 66.9982C111.784 66.9982 110.654 66.5757 109.813 65.9418L110.943 64.3309C111.574 64.8591 112.388 65.1231 113.308 65.1231C114.623 65.1231 115.595 64.4365 115.779 63.3537L115.937 62.4558C115.28 63.1953 114.36 63.6178 113.308 63.6178C111.232 63.6178 110.049 62.0861 110.47 59.762C110.864 57.5172 112.546 55.9855 114.596 55.9855C115.7 55.9591 116.462 56.408 116.883 57.1475L117.067 56.0647H119.38V56.0383ZM116.436 59.8148C116.646 58.5736 116.042 57.7285 114.912 57.7285C113.781 57.7285 112.862 58.6 112.651 59.8148C112.441 61.0297 113.046 61.8748 114.202 61.8748C115.306 61.8748 116.226 61.0297 116.436 59.8148Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M127.055 56.041L127.843 61.7719L130.577 56.041H132.837L133.626 61.7719L136.385 56.041H138.672L134.335 64.0431H132.022L131.208 58.7612L128.553 64.0431H126.24L124.689 56.0674L127.055 56.041Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M146.61 60.0534C146.189 62.483 144.165 64.1468 141.563 64.1468C138.961 64.1468 137.516 62.5095 137.936 60.0534C138.357 57.5973 140.38 55.9863 142.983 55.9863C145.585 55.9863 147.03 57.5973 146.61 60.0534ZM140.249 60.0798C140.013 61.3739 140.696 62.2718 141.879 62.2718C143.061 62.2718 144.034 61.3739 144.27 60.0798C144.507 58.7857 143.824 57.8878 142.641 57.8878C141.458 57.8878 140.486 58.7593 140.249 60.0798Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M153.759 55.9609L153.391 58.1001C151.761 57.9416 150.605 58.8396 150.368 60.1864L149.685 64.0422H147.372L148.765 56.0666H151.078L150.815 57.5191C151.551 56.5155 152.55 55.9873 153.759 55.9609Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M157.833 53.0273L155.888 64.0401H153.601L155.52 53.0273H157.833Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M168.031 53.0273L166.112 64.0401H163.825L164.036 62.8781C163.326 63.6968 162.38 64.1457 161.276 64.1457C158.989 64.1457 157.754 62.5083 158.201 60.0258C158.621 57.5962 160.408 55.9852 162.669 55.9852C163.799 55.9852 164.614 56.4342 165.061 57.2529L165.797 53.0538H168.031V53.0273ZM164.509 60.0787C164.745 58.7846 164.062 57.8603 162.879 57.8603C161.67 57.8603 160.698 58.7846 160.461 60.0787C160.251 61.3727 160.908 62.2971 162.117 62.2971C163.273 62.2706 164.272 61.3727 164.509 60.0787Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n        <\/svg>\r\n      <\/p>\r\n      <p style=\"text-align: center;\">\r\n        {{inviter}} from {{orgName}} has invited you to collaborate with them on\r\n        Luklak. Please use the button bellow to continue:\r\n      <\/p>\r\n      <p style=\"text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;\">\r\n        <a style=\"width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;\" href=\"{{invitationUrl}}\">ACCEPT INVITE<\/a>\r\n      <\/p>\r\n      <p style=\"text-align: center;\">\r\n        <p style=\"text-align: center;\">1. You will be asked to login or signup using personal email account.<\/p>\r\n        <p style=\"text-align: center;\">2. If you think this invitation is irrelevant to you, please <a href=\"{{declineUrl}}\">click here<\/a> to decline.<\/p>\r\n        <\/ol>\r\n      <\/p>\r\n      <hr\/>\r\n      <p>\r\n        If you cannot click the button above, please use this link to join {{orgName}}:\r\n        <a href=\"{{invitationUrl}}\">{{invitationUrl}}<\/a>\r\n      <\/p>\r\n    <\/div>\r\n"}' where id = 'bfc9ec02-920d-11eb-8e10-005056be2b54'; 

# 2021-04-01 16:17:58.294910
+\c whoru;

# 2021-04-01 16:18:03.709619
+select * from public.user;

# 2021-04-01 16:18:16.312811
+select * from public.user join email on "user".email_id = email.id;

# 2021-04-01 16:29:39.223516
+update public.value set body = '{"type": "HTML", "content": "<div style=\"font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;\">\r\n      <p style=\"text-align: center;\">\r\n        <svg\r\n          width=\"169\"\r\n          height=\"67\"\r\n          viewBox=\"0 0 169 67\"\r\n          fill=\"none\"\r\n          xmlns=\"http:\/\/www.w3.org\/2000\/svg\"\r\n        >\r\n          <path\r\n            d=\"M8.83127 30.7142C8.83127 32.6421 9.46207 33.8305 10.7237 34.2795C11.3808 34.4643 12.2744 34.57 13.4835 34.6228C13.6937 34.6492 13.904 34.6492 14.1143 34.6492H15.3496V42.0966C14.7976 42.1231 14.088 42.1495 13.1943 42.1495C6.96514 42.1495 2.89119 39.9311 0.972491 35.5207C0.473104 34.2266 0.157701 32.9854 0.0525671 31.8234C0.0262835 31.4801 0 31.0311 0 30.4237V1.55816L8.83127 0V30.7142Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M18.0305 29.842V13.2305H26.9932V31.453C26.9932 33.2488 27.8606 34.358 29.569 34.7542C30.3049 34.8334 30.8832 34.8334 31.3037 34.807C32.6705 34.7278 33.9583 34.3052 35.1411 33.5657L35.1937 13.2305H44.1038V41.9639H36.7707L36.3239 41.1981C36.2713 41.0924 36.2187 40.9868 36.1924 40.9076C36.1136 40.6699 36.0347 40.4322 35.9559 40.1681L33.3538 41.3037C32.5653 41.5942 31.7768 41.8055 30.9883 41.9639C29.9895 42.1752 28.9908 42.3073 27.992 42.3337C25.9419 42.4393 24.3123 42.2544 23.077 41.7791C21.4999 41.1717 20.1595 40.0096 19.1081 38.293C18.3985 36.8141 18.0305 33.9883 18.0305 29.842Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M56.6937 25.9076H56.7462L64.7364 13.231H74.251L65.4986 27.1488L74.251 41.9645H64.7364L56.7462 28.6013H56.6937V41.9645H47.8887V1.61089L56.6937 0.0527344V25.9076Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M105.239 30.7415C105.239 32.6694 105.87 33.8578 107.132 34.3068C107.789 34.4917 108.682 34.5973 109.891 34.6501C110.102 34.6765 110.312 34.6765 110.522 34.6765H111.758V42.124C111.206 42.1504 110.496 42.1768 109.602 42.1768C103.373 42.1768 99.2992 39.9584 97.3805 35.548C96.8811 34.254 96.5657 33.0127 96.4605 31.8507C96.4342 31.5074 96.408 31.0584 96.408 30.451V1.5855L105.266 0.0273438V30.7415H105.239Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M138.33 24.3233V42.0176H131.023L130.945 41.7535C130.918 41.6215 130.892 41.5422 130.866 41.4894C130.787 41.3046 130.734 41.1197 130.682 40.882L130.603 40.2218C127.922 41.6215 125.294 42.3345 122.718 42.3345H121.956C119.327 42.3345 117.225 41.3046 115.674 39.271C114.649 37.6865 114.123 35.8906 114.123 33.9363V33.725C114.123 30.239 115.332 27.9414 117.776 26.8058C118.775 26.1455 121.298 25.8022 125.346 25.8022H129.473V24.8251C129.473 22.8179 129.184 21.6823 128.605 21.3654C127.974 20.8901 126.871 20.6524 125.267 20.6524H117.014L117.803 13.3105H126.66C132.311 13.3105 135.781 14.7102 137.147 17.5096C137.936 19.1734 138.33 21.4447 138.33 24.3233ZM126.529 31.6651C124.82 31.6651 123.769 31.85 123.401 32.1933C123.112 32.4838 122.981 33.012 122.981 33.725C122.981 35.3096 123.795 36.1019 125.399 36.1019C126.371 36.1019 127.712 35.7058 129.473 34.9135V31.6651H126.529Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M150.631 25.9603H150.684L158.674 13.2838H168.188L159.436 27.2016L168.188 42.0173H158.674L150.684 28.6541H150.631V42.0173H141.852V1.63722L150.631 0.105469V25.9603Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M83.0266 21.5707L76.7076 27.9199L83.0266 34.2691L89.3455 27.9199L83.0266 21.5707Z\"\r\n            fill=\"#1976D2\"\r\n          \/>\r\n          <path\r\n            d=\"M33.1436 63.5921C32.4865 63.9355 31.698 64.1467 30.9358 64.1467C29.4902 64.1467 28.544 63.3281 28.8331 61.6907L29.4902 57.9933H28.36L28.6491 56.4088H29.7793L30.1735 54.2168H32.4602L32.066 56.4088H34.2475L33.9584 57.9933H31.7768L31.1986 61.2945C31.0935 61.9548 31.33 62.2189 31.8294 62.2189C32.1185 62.2189 32.5128 62.1132 32.9596 61.9284L33.1436 63.5921Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M43.3942 59.0223L42.5005 64.0401H40.1876L40.9761 59.6825C41.1601 58.679 40.6607 58.0451 39.6619 58.0451C38.5054 58.0715 37.6381 58.9166 37.4541 60.1051L36.7707 64.0401H34.4578L36.4027 53.0273H38.7157L37.9272 57.4641C38.6631 56.4606 39.7145 55.9852 40.9761 55.9588C42.7896 55.9588 43.7358 57.1472 43.3942 59.0223Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M52.4357 60.74H46.6533C46.7585 61.7436 47.4155 62.351 48.4669 62.351C49.2291 62.351 49.9913 62.0605 50.6484 61.5059L51.6472 62.7207C50.6747 63.6187 49.4131 64.1204 47.9412 64.1204C45.3654 64.1204 44.025 62.483 44.4455 60.0798C44.866 57.6237 46.8636 55.9863 49.308 55.9863C52.1466 55.9863 53.1191 57.835 52.4357 60.74ZM50.4907 59.3931C50.6484 58.3368 50.0702 57.6501 49.0188 57.6501C47.9938 57.6501 47.179 58.3368 46.811 59.3931H50.4907Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M60.3208 56.041L61.1093 61.7719L63.8691 56.041H66.1295L66.8917 61.7719L69.6778 56.041H71.9382L67.6014 64.0431H65.2884L64.4736 58.7612L61.819 64.0431H59.5323L57.9553 56.0674L60.3208 56.041Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M79.8758 60.0534C79.4553 62.483 77.4315 64.1468 74.8294 64.1468C72.2273 64.1468 70.7817 62.5095 71.2023 60.0534C71.6228 57.5973 73.6466 55.9863 76.2487 55.9863C78.8508 55.9863 80.2964 57.5973 79.8758 60.0534ZM73.5415 60.0798C73.3049 61.3739 73.9883 62.2718 75.1711 62.2718C76.3538 62.2718 77.3263 61.3739 77.5629 60.0798C77.7994 58.7857 77.1161 57.8878 75.9333 57.8878C74.7505 57.8878 73.7518 58.7593 73.5415 60.0798Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M87.0249 55.9609L86.6569 58.1001C85.0273 57.9416 83.8708 58.8396 83.6343 60.1864L82.9509 64.0422H80.6379L82.031 56.0666H84.3439L84.0811 57.5191C84.817 56.5155 85.8158 55.9873 87.0249 55.9609Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M90.7834 60.7917L89.5481 61.8745L89.1801 64.0401H86.8672L88.8122 53.0273H91.0988L90.0475 59.0751L93.5432 56.0644H96.1453L92.6496 59.1279L94.8837 64.0401H92.1502L90.7834 60.7917Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M99.7198 56.0396L98.3267 64.0153H96.0138L97.4068 56.0396H99.7198ZM100.088 53.7684C99.9826 54.4287 99.4307 54.904 98.7736 54.904C98.1165 54.904 97.7222 54.4022 97.8536 53.7684C97.9588 53.1082 98.5107 52.6328 99.1678 52.6328C99.8249 52.6328 100.193 53.1082 100.088 53.7684Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M109.392 59.0238L108.498 64.0416H106.186L106.948 59.6841C107.132 58.6805 106.632 58.0467 105.634 58.0467C104.477 58.0731 103.636 58.9182 103.426 60.1066L102.742 64.0416H100.429L101.822 56.066H104.135L103.899 57.4657C104.635 56.4621 105.686 55.9868 106.948 55.9868C108.761 55.9603 109.708 57.1488 109.392 59.0238Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M119.38 56.0383L118.118 63.2745C117.724 65.5457 115.753 66.9982 113.151 66.9982C111.784 66.9982 110.654 66.5757 109.813 65.9418L110.943 64.3309C111.574 64.8591 112.388 65.1231 113.308 65.1231C114.623 65.1231 115.595 64.4365 115.779 63.3537L115.937 62.4558C115.28 63.1953 114.36 63.6178 113.308 63.6178C111.232 63.6178 110.049 62.0861 110.47 59.762C110.864 57.5172 112.546 55.9855 114.596 55.9855C115.7 55.9591 116.462 56.408 116.883 57.1475L117.067 56.0647H119.38V56.0383ZM116.436 59.8148C116.646 58.5736 116.042 57.7285 114.912 57.7285C113.781 57.7285 112.862 58.6 112.651 59.8148C112.441 61.0297 113.046 61.8748 114.202 61.8748C115.306 61.8748 116.226 61.0297 116.436 59.8148Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M127.055 56.041L127.843 61.7719L130.577 56.041H132.837L133.626 61.7719L136.385 56.041H138.672L134.335 64.0431H132.022L131.208 58.7612L128.553 64.0431H126.24L124.689 56.0674L127.055 56.041Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M146.61 60.0534C146.189 62.483 144.165 64.1468 141.563 64.1468C138.961 64.1468 137.516 62.5095 137.936 60.0534C138.357 57.5973 140.38 55.9863 142.983 55.9863C145.585 55.9863 147.03 57.5973 146.61 60.0534ZM140.249 60.0798C140.013 61.3739 140.696 62.2718 141.879 62.2718C143.061 62.2718 144.034 61.3739 144.27 60.0798C144.507 58.7857 143.824 57.8878 142.641 57.8878C141.458 57.8878 140.486 58.7593 140.249 60.0798Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M153.759 55.9609L153.391 58.1001C151.761 57.9416 150.605 58.8396 150.368 60.1864L149.685 64.0422H147.372L148.765 56.0666H151.078L150.815 57.5191C151.551 56.5155 152.55 55.9873 153.759 55.9609Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M157.833 53.0273L155.888 64.0401H153.601L155.52 53.0273H157.833Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n          <path\r\n            d=\"M168.031 53.0273L166.112 64.0401H163.825L164.036 62.8781C163.326 63.6968 162.38 64.1457 161.276 64.1457C158.989 64.1457 157.754 62.5083 158.201 60.0258C158.621 57.5962 160.408 55.9852 162.669 55.9852C163.799 55.9852 164.614 56.4342 165.061 57.2529L165.797 53.0538H168.031V53.0273ZM164.509 60.0787C164.745 58.7846 164.062 57.8603 162.879 57.8603C161.67 57.8603 160.698 58.7846 160.461 60.0787C160.251 61.3727 160.908 62.2971 162.117 62.2971C163.273 62.2706 164.272 61.3727 164.509 60.0787Z\"\r\n            fill=\"#333333\"\r\n          \/>\r\n        <\/svg>\r\n      <\/p>\r\n      <p style=\"text-align: center;\">\r\n        {{inviter}} from {{orgName}} has invited you to collaborate with them on\r\n        Luklak. Please use the button bellow to continue:\r\n      <\/p>\r\n      <p style=\"text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;\">\r\n        <a style=\"width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;\" href=\"{{invitationUrl}}\">ACCEPT INVITE<\/a>\r\n      <\/p>\r\n      <p style=\"text-align: center;\">\r\n        <p style=\"text-align: center;\">1. You will be asked to login or signup using personal email account.<\/p>\r\n        <p style=\"text-align: center;\">2. If you think this invitation is irrelevant to you, please <a href=\"{{declineUrl}}\">click here<\/a> to decline.<\/p>\r\n        <\/ol>\r\n      <\/p>\r\n      <hr\/>\r\n      <p>\r\n        If you cannot click the button above, please use this link to join {{orgName}}:\r\n        <a href=\"{{invitationUrl}}\">{{invitationUrl}}<\/a>\r\n      <\/p>\r\n    <\/div>\r\n"}' where id = 'bfc9ec02-920d-11eb-8e10-005056be2b54';  \e

# 2021-04-01 16:30:00.125662
+update public.value set body = '{"type": "HTML", "content": "<div style=\"font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;\">\r\n    <p style=\"text-align: center;\">\r\n      <img src=\"data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKkAAABDCAYAAADnCiXLAAAABmJLR0QA\/wD\/AP+gvaeTAAAPWUlEQVR42u1dCZgUxRUGRI14cCjszLAgIorKERZYDgmKQVGD0SCu0RBREcn3xSAgOzO7JMEFAUUDkSBgSAyKBJB4JlEJREFQPpR12enehQXhQzExoNw3uEfe63klj2Zmqnq251qqvq++nq6u49Wrv9579aq6p149FpqN\/Owib4HRzeMPDfUGQjO8QWO512+sqJchwVdU3MgbMLv7\/OYwoH060u8JGi\/Uy6DQKlDi8+UbN3r9oVEwBvO9AaMYfvdNa6JHFJ+dFTQ6+YKhe4DmKR6\/+XfAzZOu1Y+V+QLGP6Hyz4EhNRFiWbryJis\/dL4nYD7uDZqvAjg3A62Vdvo9AeOtdB5fb7D0ZqBzri9orIXrwUhjgKBNJ5qbBosbA78LgfeLADsGxBOn0e03X3KPSZGBmREgbRkIZcvoT3uQBkJzZH1IN5C2LCy9UoobDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVIN0roHUgDDGuswRLToNz5RoGVBzDogwn59CzdBCodQHpa1CfED3K\/OFJD6Co2r4CzAElkMH2AJzfAFQkVwEOcRn7+sT5uibd9LBkghzwjrAFOsGAi9ZtHjFkgh31FJPVUKA7ZeRk\/2mNKWboHUOnEUMPbJ6zDHZpIkhcMfdyqMa+QYNPYDT170jC2\/JlEg9Y7dcCnkOSTtd8D4lauSNBNBCtL9TYXyITyKlkkg9QXMR+MG6cn4LRwRHJcIkILk\/oe8PGjevCVnpSFIjdJkgRQGYLBC36uyAqFemWaTevzGVBdAStEsdBOkYGb8TGWC+ApKc1y3Sd0AKUqtZIDUOtwdNP4jV33ms5m4cAIp9Ff3QGocb+E3L3cDpNljypvBsx3SMYNJlpCFUyaBFNThLIV+b78kUHFhRoI0YKx0EaQ4WSe7AVJ8S0LeXuhzPMyetiDFU96JBqknUNoDaZECI2jckakuKCiz1VWQBoyS2oIUNNd1kF4tK5flN29LmAvKJZvUTChIi1Y0VFmcoesjk\/2k6FqSuJ5eg3pXKZk84ViZPWbNefGCtN3Iz86FtA0K7SxMqJ\/UJZCWJRKkuFpVccFgvU7B5iksaY4urUxz5odfnlPQLOB7jRekMDEmKLib9kXl35kC0uyC8nZwf0SaH5zaTge6dYHRNOz0Nzdz+jJlxwna+EjOx7Ib4gEpuJvaK2CjxucPDU\/4jpMrIA0a5YkCKfxe5sg35xig37lsNjuRqGkC0oXyyWsOdA7SmvoA0vcVMLYK82YGSBXslnhAGv6OgEPfXFwA\/S5uUgVqmoD093LQhQY7BSltOUtdXLF2t84IkIZVmfmNY9+cJLQZvb4JlFsXo04loCYDpNZHM2Ar0jJ54OMf9gg24zz5ZA\/d5QikYc21R8EWnZi0AyaugNRvbEwASGvi8s3VDqAiVsiAmgiQthhnZuGhEaj7Q1wIusGjOECqspu1WeVAS7pJ0orUgNRc6hCgJQ7q34Ar\/2SBFDYqHor2JZS0A6nfeDmpR\/XSGKR7VBgW0YkcKcBhE8j\/hoPBWMZ9jIkEKZgsD7gNzrhBqibBq3Bz5YwHKS6c4Pq2gm20RUn1QOhQVH6OygkqPIcqMyPcAilu4aocO0waSEFKgob6WKHu4npFNQ1kwKiSzIhyRZAeqj1IrY+OuQ5S8pEeVVjBjlNVqwpAXaVi58IXAGfL6IJ+9lfg3X2JAmh8IIXVPXzhUGmjAL6CKAPXYYmE+UoRpDK1Wo3bkqkAadgHa05WGIzDuAp2AlSS1KcBtHlR+QWKfJsml\/Kh2+WHc0KLFQGHGybLTtkmVViwxgNS9UMlxk609WvjQK\/2FKxvo8Ds\/0klAnQuVSBFuxDutykMxmInK+nTgWquVgUoSdKRCvbdEwqSdLXCbtqtUUyOKYkCacvCjRfD\/a5aHYtU2m3AgZNJQYXdovAHbSPvLGT711+BMyrBe\/eD1VTbyS1AZaDih2MdApQWO9cr0LQrq8BoW8sJXh3tDYNEgpSk6SMqmynZ+WbnaCAdoqgmKnx+4zl83wdtCGBuni9Y3pr5OFeo1GO9OpBvDrIcyfAF43AHrFM5VSrla3tUD9LeUVosOnxlBE\/6OPG12rwFexVoOojvHkEMQnwQ+e8pMPvF62O2TZSpiQQpLoxwyznu7dHwV3vj86vBoYB72YHlvyTScHcLpCSxj8knk\/loso7rKdptEb0HToQEgPsV8dYrvnULwuanNGkrEwpS6ySUea3KeVI4I3B3NFX9RG1BCtJwdCaAlCbUUyp+vub+ck8yQAqAuQz3sGsDUgfvNVXHswtVW5DSkb15Cm19GVEjYaKKTRkLpHjeMFNAGv4DiKj\/EcC3S\/+cNGnqN8bXCqQFZbnp5oKKgLMWaqaNOSma4X21yktS0UCqfBwuDUAaVrHm3Upvi+aHeiYFpWi3WX9QER9InawLUgVSZW8GaJWoniCy18x4QYoAcvBKQkpBSpPqXVd2RFwD6oqG5NyvjgekeOQN0nanM0jxvK7KKzzoLZHspFivWex0ClLWgYo4GPEpMOJ+2bE6N0GqvIiS7Yi4\/UpHwLxJcTX8wen2dmkP3IBxwHe0Uf8FfJqZFJBa0rSsj+IiamDs0z6wj42EoV1GH204qgJSDOgrJBtrm+zrIDAgTyPRbAH2a9q9ihgvGbfBK\/LiMbhYea0I76DH9u9aO1F7JLHCqf\/TlQUVfJjC+vOu8He29qqA9ORhbPizuOgTHlfzpeF3j8yr2eItKSClcZ6vcp4CXXuObCar87BtiI5ljLgAkRVDIOHeM84Ky7cKUgI76axxHYS70OJ9fqgjXqWHqsEHiw5ywXvQkLdYh5wVxk0HHXTQQQcddNBBBx100EEHHXTQQQcddNBBBx100EGHTAs5OTnX5ObmXq85kQGhW7dub0CsgfhiHenPAOrPt\/369Yv4Xn+nTp2awvNDEKt79ux5UR0e22eJF+\/HygeT9UbIswfi5ykluHv37u8CEcUQf2LryBbqyNg6MjBjqT8bouVBYCIvgCd\/rMsCCPr3b+LFjFj5unbt6sd8cP0olQPXGKUGEgKz5lqR3rlz5\/MhrYo6MoCS8Sxn\/QwG6YvUnyVnsIKsT7zYSbwYLuHZS5gvZZMWbK\/rYIa8SsRiXIDEwLU1XHuIdMhzM828ExD3Q\/wDAVZ05HKICyHuJWBvhjIjojEJnn+BKgTy\/JzN7HtIrWB6Z5Y+mdLn0f2P4PlyuD9IbW2COEowv0OHDhfA\/W4qkwf5F8P1v0RnMfVpPN736NHjMvhdQm1Oxz7BdT6VnS14JOhCO5X4cBTiN\/D7aT5pqQ9Y33HsI9R1N+aj8gMiqNJcVncrJr1eoPSNNr59TLQ+AOZKQ+w3xPU0LsdR2qF6ZuMykOrZAbT1gbgG8iyCPjVnYy7edqiP9cL9pxCPQfwS7h+ke8w3MlWSZRojVkTLFoMOPUT3ldTRU\/LB81sZI46RNF4BHVvJwR2l3VX0fBIbAJOVu5NAdDHcH0AacDED1wmMhkMEBnGfTwPci6V9RddVeXl5Z8H1CNU\/iCbhDnr+FJMwm6h\/Abp\/lPJgW\/vsfBCgwPYF\/wioW4l3Vr4uXbq0icCHRizPDQTctmgzi7pQo1G\/BlHa1vbt218I1\/cYHXuFNsSywKvuVP9vKO0A8cuaoPC8P\/2uwklNeWew+nbTRKykCYD86JdKFTiXCHsjimFdTbacFwgdyoA0AhjfhDqEnbiXlV1AeWbGMtpRytkG4IQNcJPofi5KMTYQj6HUQwajdKC0TVTmYcbspQhGmHRZ8PsqNsECcD2MAwq\/fyHo6t2793kCNGwSCv5UQdoY5AOqSNbGcKg\/m4CF9OVhOZJ0H1Ke\/dHMJLSPudoF+p\/nvIA2O5KUXkc8Rek8kYHzB8IjQdoF02dRmcWMzt8hD\/r06XMhSWBM20Jl+7M+DmO2eQkrf0kqQbqWiJhoS3+PmLJIpOGKmA30HTjAdH8EzQQRhYogFRrJaL+P6lhHA\/MJDgqqT8FkspVxEI4gCJAOqnO5zbAfTWW+tkmEL9q1a3cu608e1xZ0NTl4oK5uTEK2IlrXEK0v2+x4wYfb2aCvtvFwBuVZE4P\/C6jsk9CmhyRYGcQ3BZ+Brluo7\/jv2g2YPfmYjRfLKX0h1V1up53S\/8QFE5pSdP+KLd94oZFSakSTKrBmqI3Ar6mDwxi4OorBIXtujgAIMsgeuXS12WIdhCRAk4Dafx7iD6nNdwWDhEkgGE6qmdM5i\/Kt5JML6njOlo+bCkcYyG5iee6n9H0EXs6fIYwPOTY+PBNhQYZgKpUtOpjHYQlJuxqaUFMEEIV5RBLPK9pGe9k2ltvo2W9xggqzATVVFME0gZs4uJKPMoGWpQyhaCcx9d0X7TYizsskSi6bqUOEjUNMEVLrS1QjbHBivrRF9qGwkXAgjwPDL4XoE\/VB3EWLjsZc3aFUAjV\/DtHTlyRPjViEicmFat\/G8NeFWQDAuhIXU\/YBYCBZzRZWgj98MTeUq3F49jjdH4Rng4FlXWgBViNbdKAtKlQvqWuU7g1YG6XU\/jvMj1vNQUZjIaTeMeLl9\/lEiiSYoI27uMmBwkFggKS3ML+mpdJX1p4xElfce2kGCqd3lTDcifCplP4hA4lg2Ha4f0vMZi6Bo\/jfPmJtz2GDtp+lj2Lpj7H07WQiVDLbtj6pSwGqXjYwbKX00dT+40ya5lCepZQ2m\/L8WCxGbKbDM5wP6A2hScUXVVtY\/f1iCIomjIccOD1ZXVUIfNb+2+xZCWurWnhVcNJygcK0WFvWVnvKO53Vt4l4WyXowlV+qn2HSxiB5bB4aMZU0JYITv9TQEX25XYOIKFuJCCdKRYIfOUrJCaC3VZHA1LZfIWNE2KUmP2ousVgMcl+is9XqHfSFsdpEOZTmpCuvyQaxwm+2Hh2CpgFUKHuIjQ\/0DPCFoOVCETJGGylvGXCtUfgrYm040dejyVM0iGY1nJvihAodnuYbGgsc1Twjdx2f2OeBvSKjIykTVMWsNMY+SoX1QofaLHiw3R8bq8DgNACAa7aJi7CsC771iMyjFRaoyjlcNXcGlfs9mdoBmDZCKBogOkYxcCIBRC11TgKeBrF4oPYWoV8XckUOpsAdgVzqb0u4wXWH4mvgmZh3tgD5kfJGGn7FicmlT3l9W+c+NH6jPXgghF5hFG0z33iOmRgILfVBuY22sFVPtrZmks6pDyAFL0NNzLInj5ALrigXYrVhfB\/qjXZvJDBx3oAAAAASUVORK5CYII=\"\/>\r\n    <\/p>\r\n    <p style=\"text-align: center;\">\r\n      {{inviter}} from {{orgName}} has invited you to collaborate with them on\r\n      Luklak. Please use the button bellow to continue:\r\n    <\/p>\r\n    <p style=\"text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;\">\r\n      <a style=\"width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;\" href=\"{{invitationUrl}}\">ACCEPT INVITE<\/a>\r\n    <\/p>\r\n    <p style=\"text-align: center;\">\r\n      <p style=\"text-align: center;\">1. You will be asked to login or signup using personal email account.<\/p>\r\n      <p style=\"text-align: center;\">2. If you think this invitation is irrelevant to you, please <a href=\"{{declineUrl}}\">click here<\/a> to decline.<\/p>\r\n      <\/ol>\r\n    <\/p>\r\n    <hr\/>\r\n    <p>\r\n      If you cannot click the button above, please use this link to join {{orgName}}:\r\n      <a href=\"{{invitationUrl}}\">{{invitationUrl}}<\/a>\r\n    <\/p>\r\n  <\/div>"}' where id = 'bfc9ec02-920d-11eb-8e10-005056be2b54';  

# 2021-04-01 16:30:08.168567
+\c ems

# 2021-04-01 16:30:10.385390
+update public.value set body = '{"type": "HTML", "content": "<div style=\"font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;\">\r\n    <p style=\"text-align: center;\">\r\n      <img src=\"data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKkAAABDCAYAAADnCiXLAAAABmJLR0QA\/wD\/AP+gvaeTAAAPWUlEQVR42u1dCZgUxRUGRI14cCjszLAgIorKERZYDgmKQVGD0SCu0RBREcn3xSAgOzO7JMEFAUUDkSBgSAyKBJB4JlEJREFQPpR12enehQXhQzExoNw3uEfe63klj2Zmqnq251qqvq++nq6u49Wrv9579aq6p149FpqN\/Owib4HRzeMPDfUGQjO8QWO512+sqJchwVdU3MgbMLv7\/OYwoH060u8JGi\/Uy6DQKlDi8+UbN3r9oVEwBvO9AaMYfvdNa6JHFJ+dFTQ6+YKhe4DmKR6\/+XfAzZOu1Y+V+QLGP6Hyz4EhNRFiWbryJis\/dL4nYD7uDZqvAjg3A62Vdvo9AeOtdB5fb7D0ZqBzri9orIXrwUhjgKBNJ5qbBosbA78LgfeLADsGxBOn0e03X3KPSZGBmREgbRkIZcvoT3uQBkJzZH1IN5C2LCy9UoobDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVIN0roHUgDDGuswRLToNz5RoGVBzDogwn59CzdBCodQHpa1CfED3K\/OFJD6Co2r4CzAElkMH2AJzfAFQkVwEOcRn7+sT5uibd9LBkghzwjrAFOsGAi9ZtHjFkgh31FJPVUKA7ZeRk\/2mNKWboHUOnEUMPbJ6zDHZpIkhcMfdyqMa+QYNPYDT170jC2\/JlEg9Y7dcCnkOSTtd8D4lauSNBNBCtL9TYXyITyKlkkg9QXMR+MG6cn4LRwRHJcIkILk\/oe8PGjevCVnpSFIjdJkgRQGYLBC36uyAqFemWaTevzGVBdAStEsdBOkYGb8TGWC+ApKc1y3Sd0AKUqtZIDUOtwdNP4jV33ms5m4cAIp9Ff3QGocb+E3L3cDpNljypvBsx3SMYNJlpCFUyaBFNThLIV+b78kUHFhRoI0YKx0EaQ4WSe7AVJ8S0LeXuhzPMyetiDFU96JBqknUNoDaZECI2jckakuKCiz1VWQBoyS2oIUNNd1kF4tK5flN29LmAvKJZvUTChIi1Y0VFmcoesjk\/2k6FqSuJ5eg3pXKZk84ViZPWbNefGCtN3Iz86FtA0K7SxMqJ\/UJZCWJRKkuFpVccFgvU7B5iksaY4urUxz5odfnlPQLOB7jRekMDEmKLib9kXl35kC0uyC8nZwf0SaH5zaTge6dYHRNOz0Nzdz+jJlxwna+EjOx7Ib4gEpuJvaK2CjxucPDU\/4jpMrIA0a5YkCKfxe5sg35xig37lsNjuRqGkC0oXyyWsOdA7SmvoA0vcVMLYK82YGSBXslnhAGv6OgEPfXFwA\/S5uUgVqmoD093LQhQY7BSltOUtdXLF2t84IkIZVmfmNY9+cJLQZvb4JlFsXo04loCYDpNZHM2Ar0jJ54OMf9gg24zz5ZA\/d5QikYc21R8EWnZi0AyaugNRvbEwASGvi8s3VDqAiVsiAmgiQthhnZuGhEaj7Q1wIusGjOECqspu1WeVAS7pJ0orUgNRc6hCgJQ7q34Ar\/2SBFDYqHor2JZS0A6nfeDmpR\/XSGKR7VBgW0YkcKcBhE8j\/hoPBWMZ9jIkEKZgsD7gNzrhBqibBq3Bz5YwHKS6c4Pq2gm20RUn1QOhQVH6OygkqPIcqMyPcAilu4aocO0waSEFKgob6WKHu4npFNQ1kwKiSzIhyRZAeqj1IrY+OuQ5S8pEeVVjBjlNVqwpAXaVi58IXAGfL6IJ+9lfg3X2JAmh8IIXVPXzhUGmjAL6CKAPXYYmE+UoRpDK1Wo3bkqkAadgHa05WGIzDuAp2AlSS1KcBtHlR+QWKfJsml\/Kh2+WHc0KLFQGHGybLTtkmVViwxgNS9UMlxk609WvjQK\/2FKxvo8Ds\/0klAnQuVSBFuxDutykMxmInK+nTgWquVgUoSdKRCvbdEwqSdLXCbtqtUUyOKYkCacvCjRfD\/a5aHYtU2m3AgZNJQYXdovAHbSPvLGT711+BMyrBe\/eD1VTbyS1AZaDih2MdApQWO9cr0LQrq8BoW8sJXh3tDYNEgpSk6SMqmynZ+WbnaCAdoqgmKnx+4zl83wdtCGBuni9Y3pr5OFeo1GO9OpBvDrIcyfAF43AHrFM5VSrla3tUD9LeUVosOnxlBE\/6OPG12rwFexVoOojvHkEMQnwQ+e8pMPvF62O2TZSpiQQpLoxwyznu7dHwV3vj86vBoYB72YHlvyTScHcLpCSxj8knk\/loso7rKdptEb0HToQEgPsV8dYrvnULwuanNGkrEwpS6ySUea3KeVI4I3B3NFX9RG1BCtJwdCaAlCbUUyp+vub+ck8yQAqAuQz3sGsDUgfvNVXHswtVW5DSkb15Cm19GVEjYaKKTRkLpHjeMFNAGv4DiKj\/EcC3S\/+cNGnqN8bXCqQFZbnp5oKKgLMWaqaNOSma4X21yktS0UCqfBwuDUAaVrHm3Upvi+aHeiYFpWi3WX9QER9InawLUgVSZW8GaJWoniCy18x4QYoAcvBKQkpBSpPqXVd2RFwD6oqG5NyvjgekeOQN0nanM0jxvK7KKzzoLZHspFivWex0ClLWgYo4GPEpMOJ+2bE6N0GqvIiS7Yi4\/UpHwLxJcTX8wen2dmkP3IBxwHe0Uf8FfJqZFJBa0rSsj+IiamDs0z6wj42EoV1GH204qgJSDOgrJBtrm+zrIDAgTyPRbAH2a9q9ihgvGbfBK\/LiMbhYea0I76DH9u9aO1F7JLHCqf\/TlQUVfJjC+vOu8He29qqA9ORhbPizuOgTHlfzpeF3j8yr2eItKSClcZ6vcp4CXXuObCar87BtiI5ljLgAkRVDIOHeM84Ky7cKUgI76axxHYS70OJ9fqgjXqWHqsEHiw5ywXvQkLdYh5wVxk0HHXTQQQcddNBBBx100EEHHXTQQQcddNBBBx100EGHTAs5OTnX5ObmXq85kQGhW7dub0CsgfhiHenPAOrPt\/369Yv4Xn+nTp2awvNDEKt79ux5UR0e22eJF+\/HygeT9UbIswfi5ykluHv37u8CEcUQf2LryBbqyNg6MjBjqT8bouVBYCIvgCd\/rMsCCPr3b+LFjFj5unbt6sd8cP0olQPXGKUGEgKz5lqR3rlz5\/MhrYo6MoCS8Sxn\/QwG6YvUnyVnsIKsT7zYSbwYLuHZS5gvZZMWbK\/rYIa8SsRiXIDEwLU1XHuIdMhzM828ExD3Q\/wDAVZ05HKICyHuJWBvhjIjojEJnn+BKgTy\/JzN7HtIrWB6Z5Y+mdLn0f2P4PlyuD9IbW2COEowv0OHDhfA\/W4qkwf5F8P1v0RnMfVpPN736NHjMvhdQm1Oxz7BdT6VnS14JOhCO5X4cBTiN\/D7aT5pqQ9Y33HsI9R1N+aj8gMiqNJcVncrJr1eoPSNNr59TLQ+AOZKQ+w3xPU0LsdR2qF6ZuMykOrZAbT1gbgG8iyCPjVnYy7edqiP9cL9pxCPQfwS7h+ke8w3MlWSZRojVkTLFoMOPUT3ldTRU\/LB81sZI46RNF4BHVvJwR2l3VX0fBIbAJOVu5NAdDHcH0AacDED1wmMhkMEBnGfTwPci6V9RddVeXl5Z8H1CNU\/iCbhDnr+FJMwm6h\/Abp\/lPJgW\/vsfBCgwPYF\/wioW4l3Vr4uXbq0icCHRizPDQTctmgzi7pQo1G\/BlHa1vbt218I1\/cYHXuFNsSywKvuVP9vKO0A8cuaoPC8P\/2uwklNeWew+nbTRKykCYD86JdKFTiXCHsjimFdTbacFwgdyoA0AhjfhDqEnbiXlV1AeWbGMtpRytkG4IQNcJPofi5KMTYQj6HUQwajdKC0TVTmYcbspQhGmHRZ8PsqNsECcD2MAwq\/fyHo6t2793kCNGwSCv5UQdoY5AOqSNbGcKg\/m4CF9OVhOZJ0H1Ke\/dHMJLSPudoF+p\/nvIA2O5KUXkc8Rek8kYHzB8IjQdoF02dRmcWMzt8hD\/r06XMhSWBM20Jl+7M+DmO2eQkrf0kqQbqWiJhoS3+PmLJIpOGKmA30HTjAdH8EzQQRhYogFRrJaL+P6lhHA\/MJDgqqT8FkspVxEI4gCJAOqnO5zbAfTWW+tkmEL9q1a3cu608e1xZ0NTl4oK5uTEK2IlrXEK0v2+x4wYfb2aCvtvFwBuVZE4P\/C6jsk9CmhyRYGcQ3BZ+Brluo7\/jv2g2YPfmYjRfLKX0h1V1up53S\/8QFE5pSdP+KLd94oZFSakSTKrBmqI3Ar6mDwxi4OorBIXtujgAIMsgeuXS12WIdhCRAk4Dafx7iD6nNdwWDhEkgGE6qmdM5i\/Kt5JML6njOlo+bCkcYyG5iee6n9H0EXs6fIYwPOTY+PBNhQYZgKpUtOpjHYQlJuxqaUFMEEIV5RBLPK9pGe9k2ltvo2W9xggqzATVVFME0gZs4uJKPMoGWpQyhaCcx9d0X7TYizsskSi6bqUOEjUNMEVLrS1QjbHBivrRF9qGwkXAgjwPDL4XoE\/VB3EWLjsZc3aFUAjV\/DtHTlyRPjViEicmFat\/G8NeFWQDAuhIXU\/YBYCBZzRZWgj98MTeUq3F49jjdH4Rng4FlXWgBViNbdKAtKlQvqWuU7g1YG6XU\/jvMj1vNQUZjIaTeMeLl9\/lEiiSYoI27uMmBwkFggKS3ML+mpdJX1p4xElfce2kGCqd3lTDcifCplP4hA4lg2Ha4f0vMZi6Bo\/jfPmJtz2GDtp+lj2Lpj7H07WQiVDLbtj6pSwGqXjYwbKX00dT+40ya5lCepZQ2m\/L8WCxGbKbDM5wP6A2hScUXVVtY\/f1iCIomjIccOD1ZXVUIfNb+2+xZCWurWnhVcNJygcK0WFvWVnvKO53Vt4l4WyXowlV+qn2HSxiB5bB4aMZU0JYITv9TQEX25XYOIKFuJCCdKRYIfOUrJCaC3VZHA1LZfIWNE2KUmP2ousVgMcl+is9XqHfSFsdpEOZTmpCuvyQaxwm+2Hh2CpgFUKHuIjQ\/0DPCFoOVCETJGGylvGXCtUfgrYm040dejyVM0iGY1nJvihAodnuYbGgsc1Twjdx2f2OeBvSKjIykTVMWsNMY+SoX1QofaLHiw3R8bq8DgNACAa7aJi7CsC771iMyjFRaoyjlcNXcGlfs9mdoBmDZCKBogOkYxcCIBRC11TgKeBrF4oPYWoV8XckUOpsAdgVzqb0u4wXWH4mvgmZh3tgD5kfJGGn7FicmlT3l9W+c+NH6jPXgghF5hFG0z33iOmRgILfVBuY22sFVPtrZmks6pDyAFL0NNzLInj5ALrigXYrVhfB\/qjXZvJDBx3oAAAAASUVORK5CYII=\"\/>\r\n    <\/p>\r\n    <p style=\"text-align: center;\">\r\n      {{inviter}} from {{orgName}} has invited you to collaborate with them on\r\n      Luklak. Please use the button bellow to continue:\r\n    <\/p>\r\n    <p style=\"text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;\">\r\n      <a style=\"width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;\" href=\"{{invitationUrl}}\">ACCEPT INVITE<\/a>\r\n    <\/p>\r\n    <p style=\"text-align: center;\">\r\n      <p style=\"text-align: center;\">1. You will be asked to login or signup using personal email account.<\/p>\r\n      <p style=\"text-align: center;\">2. If you think this invitation is irrelevant to you, please <a href=\"{{declineUrl}}\">click here<\/a> to decline.<\/p>\r\n      <\/ol>\r\n    <\/p>\r\n    <hr\/>\r\n    <p>\r\n      If you cannot click the button above, please use this link to join {{orgName}}:\r\n      <a href=\"{{invitationUrl}}\">{{invitationUrl}}<\/a>\r\n    <\/p>\r\n  <\/div>"}' where id = 'bfc9ec02-920d-11eb-8e10-005056be2b54';  

# 2021-04-01 16:43:01.715366
+select * from public.invite_info;

# 2021-04-01 16:43:13.526694
+\i ~/a.sql

# 2021-04-01 17:38:14.662818
+\d invite_info;

# 2021-04-01 21:21:32.727576
+select uu.*, COUNT(*) OVER() AS full_count from public.user as uu  left join user_group_mapping mm on mm.user_id = uu.id where uu.organization_id = $1 AND uu.id = mm.user_id AND mm.group_id != $2 order by uu.created_at DESC LIMIT 100 OFFSET 0
+\e

# 2021-04-01 21:22:30.186338
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d' order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-01 21:22:49.816453
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-01 21:24:14.680213
+select uu.name, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-01 21:24:48.402332
+select name, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-01 21:24:54.533004
+select name, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-01 21:25:18.942509
+select uu.username, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-01 21:25:58.294843
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id is null or mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d') order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:25:48.076498
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d') order by uu.created_at DESC LIMIT 100 OFFSET 0

# 2021-04-02 09:26:18.570609
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d') order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:26:31.450929
+select uu.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d') order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:26:43.437916
+select uu.username, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d') order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:26:55.524147
+select uu.username, mm.group_id COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d') order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:27:06.911536
+select uu.username, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d') order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:27:37.427849
+select uu.username, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:28:09.294195
+select uu.username, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:28:53.953212
+select uu.username, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:29:06.935702
+\e

# 2021-04-02 09:29:28.253766
+select uu.username, COUNT(*) OVER() AS full_count
+from public.user as uu
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:30:02.338817
+select uu.username, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' order by uu.created_at DESC LIMIT 100 OFFSET 0; \e

# 2021-04-02 09:30:24.883606
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0; 

# 2021-04-02 09:31:13.664394
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:31:16.227373
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 09:31:20.983793
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:32:12.892406
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:32:22.928005
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 09:32:38.085924
+select uu.username, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:34:59.148984
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id IS NULL OR mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:35:23.483452
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' AND (mm.group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:35:35.718532
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:35:39.344934
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 09:36:02.035068
+select uu.*, mm.group_id COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id, mm
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:36:10.595951
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id, mm
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:36:18.316208
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id, mm.*
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:36:20.848096
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id, mm.*
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 09:36:27.436316
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id, mm.group_id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:36:39.704711
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id, mm.group_id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 09:36:51.571992
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:43:04.783213
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:43:07.678798
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 09:43:20.913114
+select uu.username, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:43:25.870814
+select uu.username, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0; \e

# 2021-04-02 09:43:58.767282
+select uu.username, mm.group_id, gr.name COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+left join public.group gr on gr.group_id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0; 

# 2021-04-02 09:44:06.065999
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+left join public.group gr on gr.group_id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0; 

# 2021-04-02 09:44:21.755857
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+left join public.group gr on gr.group_id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:44:23.943670
+\d group;

# 2021-04-02 09:44:27.599774
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+left join public.group gr on gr.group_id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 09:44:49.636302
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+left join group gr on gr.id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:45:03.772472
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+left join public.group gr on gr.id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:51:49.014798
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id filter where mm.group_id = 'da4615ca-8d3e-11eb-8b1e-005056be277d'
+left join public.group gr on gr.id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:52:24.216646
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id filter where mm.group_id = 'da4615ca-8d3e-11eb-8b1e-005056be277d'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:55:15.044005
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id filter where mm.group_id = 'da4615ca-8d3e-11eb-8b1e-005056be277d'
+left join public.group gr on gr.id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:55:18.900451
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id filter where mm.group_id = 'da4615ca-8d3e-11eb-8b1e-005056be277d'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:55:28.497774
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+left join public.group gr on gr.id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 09:57:02.908495
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+group by uu.id filter where mm.group_id = 'da4615ca-8d3e-11eb-8b1e-005056be277d'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 10:05:15.222860
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and uu.id in (select user_id in user_group_mapping where group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 10:05:42.419795
+select uu.*, mm.group_id, COUNT(*) OVER() AS full_count
+from public.user as uu
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and uu.id in (select user_id from user_group_mapping where group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 10:05:49.530808
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and uu.id in (select user_id from user_group_mapping where group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 10:06:05.030539
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and
+    uu.id not in (select user_id from user_group_mapping where group_id != 'da4615ca-8d3e-11eb-8b1e-005056be277d')
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 10:09:10.548953
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and uu.id in (select user_id from user_group_mapping where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d')
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 10:09:29.882018
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and uu.id in (select user_id from user_group_mapping where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d')
+order by uu.created_at DESC LIMIT 100 OFFSET 0;\e

# 2021-04-02 10:09:36.203876
+select uu.*, COUNT(*) OVER() AS full_count
+from public.user as uu
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' and uu.id not in (select user_id from user_group_mapping where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d')
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 10:09:51.621925
+select user_id from user_group_mapping where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d';

# 2021-04-02 10:10:39.786273
+select user_id from user_group_mapping where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d'; \e

# 2021-04-02 10:10:49.285211
+select user_id from user_group_mapping where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d' group by user_id;

# 2021-04-02 10:11:10.325154
+select user_id from user_group_mapping join public.user uu on uu.id = user_id where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d' group by user_id;

# 2021-04-02 10:11:23.366237
+select user_id, uu.username from user_group_mapping join public.user uu on uu.id = user_id where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d' group by user_id;

# 2021-04-02 10:11:30.184344
+select user_id, uu.username from user_group_mapping join public.user uu on uu.id = user_id where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d' group by user_id, uu.username;

# 2021-04-02 10:11:46.824714
+select user_id, uu.username, uu.organization_id from user_group_mapping join public.user uu on uu.id = user_id where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d' group by user_id, uu.username, uu.organization_id;

# 2021-04-02 10:12:16.995293
+select * from public.group where id = '6265c6cc-7d6c-11eb-9adf-005056be277d';

# 2021-04-02 10:12:47.226600
+select user_id from user_group_mapping where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d' and organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' group by user_id;

# 2021-04-02 10:13:42.896489
+select user_id from user_group_mapping join group on group.id = user_group_mapping.group_id  where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d' and organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' group by user_id;

# 2021-04-02 10:14:03.959095
+select user_id from user_group_mapping join public.group gr on gr.id = user_group_mapping.group_id  where group_id != '6265c6cc-7d6c-11eb-9adf-005056be277d' and organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6' group by user_id;

# 2021-04-02 10:27:35.323112
+select uu.*, COUNT(*) OVER() AS full_count from public.user as uu  where uu.organization_id = $1 uu.id in (select mm.user_id from user_group_mapping as mm join public.group gr on gr.id = mm.group_id where mm.group_id = $2 group by mm.user_id) order by uu.created_at DESC LIMIT 100 OFFSET 0

# 2021-04-02 10:28:56.779301
+select uu.username, mm.group_id, gr.name, COUNT(*) OVER() AS full_count
+from public.user as uu
+left join user_group_mapping mm on mm.user_id = uu.id
+left join public.group gr on gr.id = mm.group_id
+where uu.organization_id = '46e300af-76cd-4694-a42a-fa52331a41e6'
+order by uu.created_at DESC LIMIT 100 OFFSET 0;

# 2021-04-02 14:21:15.713173
+ALTER TABLE public.scheme ALTER COLUMN name TYPE varchar(64);

# 2021-04-02 14:21:25.453143
+ALTER TABLE public.scheme ALTER COLUMN name TYPE varchar(64);
+

# 2021-04-02 14:31:30.926099
+\c fiw

# 2021-04-02 14:31:35.730053
+DROP TABLE IF EXISTS public.user_marker CASCADE;

# 2021-04-02 14:31:41.850218
+DROP TABLE IF EXISTS public.notification CASCADE;

# 2021-04-02 14:32:15.868644
+select * from public.invite_info;

# 2021-04-02 14:32:23.287297
+ALTER TABLE public.invite_info DROP COLUMN IF EXISTS start_issue_id CASCADE;
+

# 2021-04-02 14:32:32.342322
+ALTER TABLE public.invite_info ADD COLUMN issue_id uuid;
+

# 2021-04-02 14:33:00.577126
+\dT user_status;

# 2021-04-02 14:33:04.513879
+\dT+ user_status;

# 2021-04-02 14:34:06.993679
+ALTER TYPE public.user_status ADD VALUE 'decline' AFTER 'deactivated';
+

# 2021-04-02 14:34:11.018618
+\dT+ user_status;

# 2021-04-02 14:34:25.911208
+ALTER TABLE public.scheme ALTER COLUMN name TYPE character varying(64);
+-- ddl-end --
+ALTER TABLE public."user" ALTER COLUMN username TYPE character varying(64);
+

# 2021-04-02 14:34:35.740788
+ALTER TABLE public.issue ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+

# 2021-04-02 14:34:49.545005
+ALTER TABLE public.worklogfield ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+

# 2021-04-02 14:34:55.956703
+ALTER TABLE public.worklogfield ADD CONSTRAINT "worklogfield_key_organizationId_uq" UNIQUE (key,organization_id);
+

# 2021-04-02 14:35:27.745951
+-- ALTER TABLE public.worklogfield DROP CONSTRAINT IF EXISTS "worklogfield_name_organizationId_uq" CASCADE;
+ALTER TABLE public.worklogfield ADD CONSTRAINT "worklogfield_name_organizationId_uq" UNIQUE (name,organization_id);
+-- ddl-end --
+
+-- object: key_check | type: CONSTRAINT --
+-- ALTER TABLE public.issuefield DROP CONSTRAINT IF EXISTS key_check CASCADE;
+ALTER TABLE public.issuefield ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+-- ddl-end --
+
+-- object: "issuefield_key_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issuefield DROP CONSTRAINT IF EXISTS "issuefield_key_organizationId_uq" CASCADE;
+ALTER TABLE public.issuefield ADD CONSTRAINT "issuefield_key_organizationId_uq" UNIQUE (key,organization_id);
+-- ddl-end --
+
+-- object: "issuefield_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issuefield DROP CONSTRAINT IF EXISTS "issuefield_name_organizationId_uq" CASCADE;
+ALTER TABLE public.issuefield ADD CONSTRAINT "issuefield_name_organizationId_uq" UNIQUE (name,organization_id);
+-- ddl-end --
+
+-- object: "script_key_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.script DROP CONSTRAINT IF EXISTS "script_key_organizationId_uq" CASCADE;
+ALTER TABLE public.script ADD CONSTRAINT "script_key_organizationId_uq" UNIQUE (key,organization_id);
+-- ddl-end --
+
+-- object: key_check | type: CONSTRAINT --
+-- ALTER TABLE public.script DROP CONSTRAINT IF EXISTS key_check CASCADE;
+ALTER TABLE public.script ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+-- ddl-end --
+
+-- object: key_check | type: CONSTRAINT --
+-- ALTER TABLE public.screen DROP CONSTRAINT IF EXISTS key_check CASCADE;
+ALTER TABLE public.screen ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+-- ddl-end --
+
+-- object: key_check | type: CONSTRAINT --
+-- ALTER TABLE public.workspace DROP CONSTRAINT IF EXISTS key_check CASCADE;
+ALTER TABLE public.workspace ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+-- ddl-end --
+
+-- object: "project_key_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.project DROP CONSTRAINT IF EXISTS "project_key_organizationId_uq" CASCADE;
+ALTER TABLE public.project ADD CONSTRAINT "project_key_organizationId_uq" UNIQUE (key,organization_id);
+-- ddl-end --
+
+-- object: key_check | type: CONSTRAINT --
+-- ALTER TABLE public.project DROP CONSTRAINT IF EXISTS key_check CASCADE;
+ALTER TABLE public.project ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+-- ddl-end --
+
+-- object: key_check | type: CONSTRAINT --
+-- ALTER TABLE public.workflowtype DROP CONSTRAINT IF EXISTS key_check CASCADE;
+ALTER TABLE public.workflowtype ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+-- ddl-end --
+
+-- object: key_check | type: CONSTRAINT --
+-- ALTER TABLE public.issuetype DROP CONSTRAINT IF EXISTS key_check CASCADE;
+ALTER TABLE public.issuetype ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+-- ddl-end --
+
+-- object: key_check | type: CONSTRAINT --
+-- ALTER TABLE public.issuelinktype DROP CONSTRAINT IF EXISTS key_check CASCADE;
+ALTER TABLE public.issuelinktype ADD CONSTRAINT key_check CHECK (((key)::text ~ '^[a-zA-Z_][a-zA-Z0-9_]*$'::text));
+-- ddl-end --
+
+-- object: "issuelinktype_key_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issuelinktype DROP CONSTRAINT IF EXISTS "issuelinktype_key_organizationId_uq" CASCADE;
+ALTER TABLE public.issuelinktype ADD CONSTRAINT "issuelinktype_key_organizationId_uq" UNIQUE (organization_id,key);
+-- ddl-end --
+
+-- object: "issuelinktype-name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issuelinktype DROP CONSTRAINT IF EXISTS "issuelinktype-name_organizationId_uq" CASCADE;
+ALTER TABLE public.issuelinktype ADD CONSTRAINT "issuelinktype-name_organizationId_uq" UNIQUE (organization_id,name);
+-- ddl-end --
+
+-- object: "workspaceConfig_issuetypeId_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workspace_config DROP CONSTRAINT IF EXISTS "workspaceConfig_issuetypeId_workspaceId_uq" CASCADE;
+ALTER TABLE public.workspace_config ADD CONSTRAINT "workspaceConfig_issuetypeId_workspaceId_uq" UNIQUE (issuetype_id,workspace_id);
+-- ddl-end --
+
+-- object: name_check | type: CONSTRAINT --
+-- ALTER TABLE public.attachment DROP CONSTRAINT IF EXISTS name_check CASCADE;
+ALTER TABLE public.attachment ADD CONSTRAINT name_check CHECK ((COALESCE(btrim(name), ''::text) <> ''::text));
+-- ddl-end --
+
+-- object: "transition_key_workflowId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.transition DROP CONSTRAINT IF EXISTS "transition_key_workflowId_uq" CASCADE;
+ALTER TABLE public.transition ADD CONSTRAINT "transition_key_workflowId_uq" UNIQUE (key,workflow_id);
+-- ddl-end --
+
+-- object: "issueReference_issueId_issueVersion_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issue_reference DROP CONSTRAINT IF EXISTS "issueReference_issueId_issueVersion_uq" CASCADE;
+ALTER TABLE public.issue_reference ADD CONSTRAINT "issueReference_issueId_issueVersion_uq" UNIQUE (issue_version,issue_id);
+-- ddl-end --
+
+-- object: organization_key_uq | type: CONSTRAINT --
+-- ALTER TABLE public.organization DROP CONSTRAINT IF EXISTS organization_key_uq CASCADE;
+ALTER TABLE public.organization ADD CONSTRAINT organization_key_uq UNIQUE (key);
+-- ddl-end --
+
+-- object: application_name_uq | type: CONSTRAINT --
+-- ALTER TABLE public.application DROP CONSTRAINT IF EXISTS application_name_uq CASCADE;
+ALTER TABLE public.application ADD CONSTRAINT application_name_uq UNIQUE (name);
+-- ddl-end --
+
+-- object: fileserver_address_uq | type: CONSTRAINT --
+-- ALTER TABLE public.fileserver DROP CONSTRAINT IF EXISTS fileserver_address_uq CASCADE;
+ALTER TABLE public.fileserver ADD CONSTRAINT fileserver_address_uq UNIQUE (address_public);
+-- ddl-end --
+
+-- object: "fileserver_addressAdm_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.fileserver DROP CONSTRAINT IF EXISTS "fileserver_addressAdm_uq" CASCADE;
+ALTER TABLE public.fileserver ADD CONSTRAINT "fileserver_addressAdm_uq" UNIQUE (address_adm);
+-- ddl-end --
+
+-- object: "orgFields_key_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.org_fields DROP CONSTRAINT IF EXISTS "orgFields_key_uq" CASCADE;
+ALTER TABLE public.org_fields ADD CONSTRAINT "orgFields_key_uq" UNIQUE (key);
+-- ddl-end --
+
+-- object: username_check | type: CONSTRAINT --
+-- ALTER TABLE public."user" DROP CONSTRAINT IF EXISTS username_check CASCADE;
+ALTER TABLE public."user" ADD CONSTRAINT username_check CHECK (((username)::text ~ '^[a-zA-Z0-9_.]+$'::text));
+-- ddl-end --
+
+-- object: "role_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.role DROP CONSTRAINT IF EXISTS "role_name_organizationId_uq" CASCADE;
+ALTER TABLE public.role ADD CONSTRAINT "role_name_organizationId_uq" UNIQUE (organization_id,name);
+-- ddl-end --
+
+-- object: "rule_permSchemeId_action_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.rule DROP CONSTRAINT IF EXISTS "rule_permSchemeId_action_roleId_uq" CASCADE;
+ALTER TABLE public.rule ADD CONSTRAINT "rule_permSchemeId_action_roleId_uq" UNIQUE (perm_scheme_id,action,role_id);
+-- ddl-end --
+
+-- object: "rule_notifySchemeId_action_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.rule DROP CONSTRAINT IF EXISTS "rule_notifySchemeId_action_roleId_uq" CASCADE;
+ALTER TABLE public.rule ADD CONSTRAINT "rule_notifySchemeId_action_roleId_uq" UNIQUE (notify_scheme_id,action,role_id);
+-- ddl-end --
+
+-- object: "userGroupMapping_userId_groupId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.user_group_mapping DROP CONSTRAINT IF EXISTS "userGroupMapping_userId_groupId_uq" CASCADE;
+ALTER TABLE public.user_group_mapping ADD CONSTRAINT "userGroupMapping_userId_groupId_uq" UNIQUE (group_id,user_id);
+-- ddl-end --
+
+-- object: "mappingUser_schemeId_userId_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.mapping_user DROP CONSTRAINT IF EXISTS "mappingUser_schemeId_userId_roleId_uq" CASCADE;
+ALTER TABLE public.mapping_user ADD CONSTRAINT "mappingUser_schemeId_userId_roleId_uq" UNIQUE (scheme_id,role_id,user_id);
+-- ddl-end ---- object: "mappingGroup_schemeId_groupId_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.mapping_group DROP CONSTRAINT IF EXISTS "mappingGroup_schemeId_groupId_roleId_uq" CASCADE;
+ALTER TABLE public.mapping_group ADD CONSTRAINT "mappingGroup_schemeId_groupId_roleId_uq" UNIQUE (scheme_id,group_id,role_id);
+-- ddl-end --
+
+-- object: "group_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public."group" DROP CONSTRAINT IF EXISTS "group_name_organizationId_uq" CASCADE;
+ALTER TABLE public."group" ADD CONSTRAINT "group_name_organizationId_uq" UNIQUE (organization_id,name);
+-- ddl-end --
+
+-- object: "mappingField_schemeId_issuefieldId_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.mapping_field DROP CONSTRAINT IF EXISTS "mappingField_schemeId_issuefieldId_roleId_uq" CASCADE;
+ALTER TABLE public.mapping_field ADD CONSTRAINT "mappingField_schemeId_issuefieldId_roleId_uq" UNIQUE (scheme_id,role_id,issuefield_id);
+-- ddl-end --
+
+-- object: "attachment_id_issueId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.attachment DROP CONSTRAINT IF EXISTS "attachment_id_issueId_uq" CASCADE;
+ALTER TABLE public.attachment ADD CONSTRAINT "attachment_id_issueId_uq" UNIQUE (issue_id,id);
+-- ddl-end --
+
+-- object: "workflowtype_id_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workflowtype DROP CONSTRAINT IF EXISTS "workflowtype_id_workspaceId_uq" CASCADE;
+ALTER TABLE public.workflowtype ADD CONSTRAINT "workflowtype_id_workspaceId_uq" UNIQUE (id,workspace_id);
+-- ddl-end --
+
+-- object: "screen_id_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.screen DROP CONSTRAINT IF EXISTS "screen_id_workspaceId_uq" CASCADE;
+ALTER TABLE public.screen ADD CONSTRAINT "screen_id_workspaceId_uq" UNIQUE (id,workspace_id);
+-- ddl-end --
+
+-- object: "issuetype_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issuetype DROP CONSTRAINT IF EXISTS "issuetype_name_organizationId_uq" CASCADE;
+ALTER TABLE public.issuetype ADD CONSTRAINT "issuetype_name_organizationId_uq" UNIQUE (name,organization_id);
+-- ddl-end --
+
+-- object: "issuetype_key_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issuetype DROP CONSTRAINT IF EXISTS "issuetype_key_organizationId_uq" CASCADE;
+ALTER TABLE public.issuetype ADD CONSTRAINT "issuetype_key_organizationId_uq" UNIQUE (key,organization_id);
+-- ddl-end --
+
+-- object: "workspace_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workspace DROP CONSTRAINT IF EXISTS "workspace_name_organizationId_uq" CASCADE;
+ALTER TABLE public.workspace ADD CONSTRAINT "workspace_name_organizationId_uq" UNIQUE (name,organization_id);
+-- ddl-end --
+
+-- object: "workspace_key_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workspace DROP CONSTRAINT IF EXISTS "workspace_key_organizationId_uq" CASCADE;
+ALTER TABLE public.workspace ADD CONSTRAINT "workspace_key_organizationId_uq" UNIQUE (key,organization_id);
+-- ddl-end --
+
+-- object: "screen_name_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.screen DROP CONSTRAINT IF EXISTS "screen_name_workspaceId_uq" CASCADE;
+ALTER TABLE public.screen ADD CONSTRAINT "screen_name_workspaceId_uq" UNIQUE (name,workspace_id,organization_id);
+-- ddl-end --
+
+-- object: "screen_key_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.screen DROP CONSTRAINT IF EXISTS "screen_key_workspaceId_uq" CASCADE;
+ALTER TABLE public.screen ADD CONSTRAINT "screen_key_workspaceId_uq" UNIQUE (key,workspace_id,organization_id);
+-- ddl-end --
+
+-- object: "workflowtype_name_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workflowtype DROP CONSTRAINT IF EXISTS "workflowtype_name_workspaceId_uq" CASCADE;
+ALTER TABLE public.workflowtype ADD CONSTRAINT "workflowtype_name_workspaceId_uq" UNIQUE (name,workspace_id,organization_id);
+-- ddl-end --
+
+-- object: "issue_key_projectId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issue DROP CONSTRAINT IF EXISTS "issue_key_projectId_uq" CASCADE;
+ALTER TABLE public.issue ADD CONSTRAINT "issue_key_projectId_uq" UNIQUE (key,project_id);
+-- ddl-end --
+
+-- object: "workflo" | type: CONSTRAINT --
+-- ALTER TABLE public.workflowtype DROP CONSTRAINT IF EXISTS "workflowtype_key_organizationId_workspaceId_uq" CASCADE;
+ALTER TABLE public.workflowtype ADD CONSTRAINT "workflowtype_key_organizationId_workspaceId_uq" UNIQUE (key,organization_id,workspace_id);
+-- ddl-end --
+
+-- object: invite_info_uq1 | type: CONSTRAINT --
+-- ALTER TABLE public.invite_info DROP CONSTRAINT IF EXISTS invite_info_uq1 CASCADE;
+ALTER TABLE public.invite_info ADD CONSTRAINT invite_info_uq1 UNIQUE (user_id);
+-- ddl-end --
+

# 2021-04-02 14:35:55.051308
+select * from public.user;

# 2021-04-02 14:36:01.596980
+select username from public.user;

# 2021-04-02 14:37:05.707798
+select id, username from public.user where username like '@';

# 2021-04-02 14:37:47.099744
+select id, username from public.user where username like '%@%';

# 2021-04-02 14:38:08.460799
+delete from public.user where username like '%@%';

# 2021-04-02 14:38:36.373858
+delete from invite_info where id = '6d737824-91d1-11eb-ab23-005056be2b54';

# 2021-04-02 14:39:06.806989
+ALTER TABLE public.invite_info ADD CONSTRAINT issue_fk FOREIGN KEY (issue_id)
+REFERENCES public.issue (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE CASCADE;
+

# 2021-04-02 14:39:26.076715
+delete from public.user where username like '%@%';

# 2021-04-02 14:40:26.956866
+select id, username from public.user join public.invite_info ON invite_info.user_id = "user".id where username like '%@%';

# 2021-04-02 14:40:40.117656
+select * from public.user join public.invite_info ON invite_info.user_id = "user".id where username like '%@%';

# 2021-04-02 14:41:20.179436
+select x.id from public.user join public.invite_info x ON invite_info.user_id = "user".id where username like '%@%';

# 2021-04-02 14:41:23.752354
+\d invite_info;

# 2021-04-02 14:42:02.414327
+delete from public.invite_info where user_id in (select id from public.user where username like '%@%');

# 2021-04-02 14:42:10.510589
+delete from public.user where username like '%@%';

# 2021-04-02 14:42:51.268090
+-- object: username_check | type: CONSTRAINT --
+-- ALTER TABLE public."user" DROP CONSTRAINT IF EXISTS username_check CASCADE;
+ALTER TABLE public."user" ADD CONSTRAINT username_check CHECK (((username)::text ~ '^[a-zA-Z0-9_.]+$'::text));
+-- ddl-end --
+
+-- object: "role_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.role DROP CONSTRAINT IF EXISTS "role_name_organizationId_uq" CASCADE;
+ALTER TABLE public.role ADD CONSTRAINT "role_name_organizationId_uq" UNIQUE (organization_id,name);
+-- ddl-end --
+
+-- object: "rule_permSchemeId_action_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.rule DROP CONSTRAINT IF EXISTS "rule_permSchemeId_action_roleId_uq" CASCADE;
+ALTER TABLE public.rule ADD CONSTRAINT "rule_permSchemeId_action_roleId_uq" UNIQUE (perm_scheme_id,action,role_id);
+-- ddl-end --
+
+-- object: "rule_notifySchemeId_action_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.rule DROP CONSTRAINT IF EXISTS "rule_notifySchemeId_action_roleId_uq" CASCADE;
+ALTER TABLE public.rule ADD CONSTRAINT "rule_notifySchemeId_action_roleId_uq" UNIQUE (notify_scheme_id,action,role_id);
+-- ddl-end --
+
+-- object: "userGroupMapping_userId_groupId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.user_group_mapping DROP CONSTRAINT IF EXISTS "userGroupMapping_userId_groupId_uq" CASCADE;
+ALTER TABLE public.user_group_mapping ADD CONSTRAINT "userGroupMapping_userId_groupId_uq" UNIQUE (group_id,user_id);
+-- ddl-end --
+
+-- object: "mappingUser_schemeId_userId_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.mapping_user DROP CONSTRAINT IF EXISTS "mappingUser_schemeId_userId_roleId_uq" CASCADE;
+ALTER TABLE public.mapping_user ADD CONSTRAINT "mappingUser_schemeId_userId_roleId_uq" UNIQUE (scheme_id,role_id,user_id);
+-- ddl-end --
+
+-- object: "mappingGroup_schemeId_groupId_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.mapping_group DROP CONSTRAINT IF EXISTS "mappingGroup_schemeId_groupId_roleId_uq" CASCADE;
+ALTER TABLE public.mapping_group ADD CONSTRAINT "mappingGroup_schemeId_groupId_roleId_uq" UNIQUE (scheme_id,group_id,role_id);
+-- ddl-end --
+
+-- object: "group_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public."group" DROP CONSTRAINT IF EXISTS "group_name_organizationId_uq" CASCADE;
+ALTER TABLE public."group" ADD CONSTRAINT "group_name_organizationId_uq" UNIQUE (organization_id,name);
+-- ddl-end --
+
+-- object: "mappingField_schemeId_issuefieldId_roleId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.mapping_field DROP CONSTRAINT IF EXISTS "mappingField_schemeId_issuefieldId_roleId_uq" CASCADE;
+ALTER TABLE public.mapping_field ADD CONSTRAINT "mappingField_schemeId_issuefieldId_roleId_uq" UNIQUE (scheme_id,role_id,issuefield_id);
+-- ddl-end --
+
+-- object: "attachment_id_issueId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.attachment DROP CONSTRAINT IF EXISTS "attachment_id_issueId_uq" CASCADE;
+ALTER TABLE public.attachment ADD CONSTRAINT "attachment_id_issueId_uq" UNIQUE (issue_id,id);
+-- ddl-end --
+
+-- object: "workflowtype_id_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workflowtype DROP CONSTRAINT IF EXISTS "workflowtype_id_workspaceId_uq" CASCADE;
+ALTER TABLE public.workflowtype ADD CONSTRAINT "workflowtype_id_workspaceId_uq" UNIQUE (id,workspace_id);
+-- ddl-end --
+
+-- object: "screen_id_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.screen DROP CONSTRAINT IF EXISTS "screen_id_workspaceId_uq" CASCADE;
+ALTER TABLE public.screen ADD CONSTRAINT "screen_id_workspaceId_uq" UNIQUE (id,workspace_id);
+-- ddl-end --
+
+-- object: "issuetype_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issuetype DROP CONSTRAINT IF EXISTS "issuetype_name_organizationId_uq" CASCADE;
+ALTER TABLE public.issuetype ADD CONSTRAINT "issuetype_name_organizationId_uq" UNIQUE (name,organization_id);
+-- ddl-end --
+
+-- object: "issuetype_key_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issuetype DROP CONSTRAINT IF EXISTS "issuetype_key_organizationId_uq" CASCADE;
+ALTER TABLE public.issuetype ADD CONSTRAINT "issuetype_key_organizationId_uq" UNIQUE (key,organization_id);
+-- ddl-end --
+
+-- object: "workspace_name_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workspace DROP CONSTRAINT IF EXISTS "workspace_name_organizationId_uq" CASCADE;
+ALTER TABLE public.workspace ADD CONSTRAINT "workspace_name_organizationId_uq" UNIQUE (name,organization_id);
+-- ddl-end --
+
+-- object: "workspace_key_organizationId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workspace DROP CONSTRAINT IF EXISTS "workspace_key_organizationId_uq" CASCADE;
+ALTER TABLE public.workspace ADD CONSTRAINT "workspace_key_organizationId_uq" UNIQUE (key,organization_id);
+-- ddl-end --
+
+-- object: "screen_name_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.screen DROP CONSTRAINT IF EXISTS "screen_name_workspaceId_uq" CASCADE;
+ALTER TABLE public.screen ADD CONSTRAINT "screen_name_workspaceId_uq" UNIQUE (name,workspace_id,organization_id);
+-- ddl-end --
+
+-- object: "screen_key_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.screen DROP CONSTRAINT IF EXISTS "screen_key_workspaceId_uq" CASCADE;
+ALTER TABLE public.screen ADD CONSTRAINT "screen_key_workspaceId_uq" UNIQUE (key,workspace_id,organization_id);
+-- ddl-end --
+
+-- object: "workflowtype_name_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workflowtype DROP CONSTRAINT IF EXISTS "workflowtype_name_workspaceId_uq" CASCADE;
+ALTER TABLE public.workflowtype ADD CONSTRAINT "workflowtype_name_workspaceId_uq" UNIQUE (name,workspace_id,organization_id);
+-- ddl-end --
+
+-- object: "issue_key_projectId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.issue DROP CONSTRAINT IF EXISTS "issue_key_projectId_uq" CASCADE;
+ALTER TABLE public.issue ADD CONSTRAINT "issue_key_projectId_uq" UNIQUE (key,project_id);
+-- ddl-end --
+
+-- object: "workflowtype_key_organizationId_workspaceId_uq" | type: CONSTRAINT --
+-- ALTER TABLE public.workflowtype DROP CONSTRAINT IF EXISTS "workflowtype_key_organizationId_workspaceId_uq" CASCADE;
+ALTER TABLE public.workflowtype ADD CONSTRAINT "workflowtype_key_organizationId_workspaceId_uq" UNIQUE (key,organization_id,workspace_id);
+-- ddl-end --
+
+-- object: invite_info_uq1 | type: CONSTRAINT --
+-- ALTER TABLE public.invite_info DROP CONSTRAINT IF EXISTS invite_info_uq1 CASCADE;
+ALTER TABLE public.invite_info ADD CONSTRAINT invite_info_uq1 UNIQUE (user_id);
+-- ddl-end --
+

# 2021-04-02 14:48:15.445637
+\c orgpool;

# 2021-04-02 14:48:20.326225
+\d organization;

# 2021-04-02 14:48:50.185886
+\dT+ org_status;

# 2021-04-02 14:49:03.441429
+ALTER TYPE public.org_status ADD VALUE 'init_fiw' BEFORE 'initializing';

# 2021-04-02 14:49:30.453536
+\c orgpool;

# 2021-04-02 14:49:44.593163
+\dT+ org_status;

# 2021-04-02 14:51:26.396742
+\c landlord;

# 2021-04-02 14:51:35.484872
+\d+ create_info

# 2021-04-02 14:52:17.675064
+\d+ create_info;

# 2021-04-02 14:53:24.686628
+alter table public.create_info add constraint create_info_uq unique (organization_id);

# 2021-04-02 14:56:11.575583
+\c fiw

# 2021-04-02 14:56:16.202426
+select * from public.user;

# 2021-04-02 14:58:25.008261
+select * from public.user_group_mapping join public.group gg on gg.id = user_group_mapping.group_id;

# 2021-04-02 14:59:04.240807
+select uu.username, gg.name from public.user_group_mapping join public.group gg on gg.id = user_group_mapping.group_id join public.user uu on uu.id = user_group_mapping.user_id;

# 2021-04-02 14:59:25.791907
+\c whoru;

# 2021-04-02 14:59:38.260856
+select * from public.user join public.email ON email.id = "user".email_id;

# 2021-04-02 15:00:09.128141
+\c fiw;

# 2021-04-02 15:00:20.524538
+select * from public.user where whoru_id = 'a8d46706-912d-11eb-bf2b-005056be2b54';

# 2021-04-02 15:00:31.073597
+select uu.username, gg.name from public.user_group_mapping join public.group gg on gg.id = user_group_mapping.group_id join public.user uu on uu.id = user_group_mapping.user_id;

# 2021-04-02 15:01:08.747615
+select * from public.user;

# 2021-04-02 15:02:36.382673
+update public.user set status = 'active', whoru_id = 'a8d46706-912d-11eb-bf2b-005056be2b54' where username = 'haanh';

# 2021-04-05 09:18:51.595633
+\d

# 2021-04-05 09:19:27.326050
+\d organization;

# 2021-04-05 09:19:46.183543
+\d public.user;

# 2021-04-05 09:20:37.677733
+create table abc(
+uuid id default uuid_generate_v1(),
+string name,
+uuid value default id);

# 2021-04-05 09:21:36.609719
+create table abc(
+uuid id default uuid_generate_v1(),
+string name,
+uuid value default id);\e

# 2021-04-05 09:21:54.454635
+create table abc(
+id uuid default uuid_generate_v1(),
+name varchar,
+value uuid default id);

# 2021-04-05 10:41:18.212341
+\d+ public.user;

# 2021-04-05 10:41:58.645461
+\d+ public.actor;

# 2021-04-05 12:17:18.052003
+\c fiw

# 2021-04-05 12:17:25.364633
+\d rule;

# 2021-04-05 12:17:36.324334
+select * from rule where perm_scheme_id = '685d0862-9296-11eb-a554-005056be2b54';

# 2021-04-05 12:18:35.559076
+select * from role where id = ' ad20fa86-935d-11eb-9d20-005056be2b54';

# 2021-04-05 12:18:44.142190
+select * from role where id = 'ad20fa86-935d-11eb-9d20-005056be2b54';

# 2021-04-05 13:36:23.975137
+select * from organization;

# 2021-04-05 13:36:54.866921
+select * from organization where id = '7d78f25c-92cc-11eb-9d28-005056be277d';

# 2021-04-05 13:37:09.368168
+delete from organization where id = '7d78f25c-92cc-11eb-9d28-005056be277d';

# 2021-04-05 13:37:15.035432
+\d

# 2021-04-05 13:37:28.726914
+\d create_info;

# 2021-04-05 13:37:44.940687
+select * from create_info where organization_id = '7d78f25c-92cc-11eb-9d28-005056be277d';

# 2021-04-05 13:38:07.329679
+select * from organization where id = '7d78f25c-92cc-11eb-9d28-005056be277d';

# 2021-04-05 13:38:13.897761
+delete from organization where id = '7d78f25c-92cc-11eb-9d28-005056be277d';

# 2021-04-05 13:38:22.163586
+\d

# 2021-04-05 13:38:27.282399
+\d org_user;

# 2021-04-05 13:38:40.437386
+select * from org_user where organization_id = '7d78f25c-92cc-11eb-9d28-005056be277d';

# 2021-04-05 13:39:02.957826
+select * from ladn;

# 2021-04-05 13:39:05.205252
+select * from land;

# 2021-04-05 13:42:06.305288
+delete from organization where id = 'de2a55d6-95d9-11eb-915a-005056be277d';

# 2021-04-05 13:42:58.912767
+select * from organization;

# 2021-04-05 13:43:11.195994
+select * from organization order by created_at desc;

# 2021-04-05 13:43:31.254262
+select * from organization order by created_at;

# 2021-04-05 13:43:47.083985
+select * from organization order by created_at limit 1;

# 2021-04-05 13:44:09.741711
+select * from organization where id = '46e300af-76cd-4694-a42a-fa52331a41e6';

# 2021-04-05 13:44:52.511448
+\x

# 2021-04-05 13:44:53.762613
+select * from organization order by created_at limit 1;

# 2021-04-05 13:45:24.759518
+insert into organization (id, key, name, status, created_at, updated_at, land_id) values (
+'46e300af-76cd-4694-a42a-fa52331a41e6', 'ndl', 'Nguoi di lam', 'active', '2021-03-30 23:30:18.556309-04', '2021-03-30 23:30:23.591974-04', 'ca9c0fba-8edf-11eb-8571-005056be2b54');

# 2021-04-05 13:45:32.878454
+select * from land;

# 2021-04-05 13:45:50.156217
+insert into organization (id, key, name, status, created_at, updated_at, land_id) values (
+'46e300af-76cd-4694-a42a-fa52331a41e6', 'ndl', 'Nguoi di lam', 'active', '2021-03-30 23:30:18.556309-04', '2021-03-30 23:30:23.591974-04', '81f7c866-86d4-11eb-aa6c-005056be277d');

# 2021-04-05 13:45:58.910211
+select * from organization;

# 2021-04-05 13:46:12.040446
+delete * from organization;

# 2021-04-05 13:46:16.910952
+delete from organization;

# 2021-04-05 13:46:33.741826
+update public.land set current_org_number = 1;

# 2021-04-05 13:46:38.741547
+insert into organization (id, key, name, status, created_at, updated_at, land_id) values (
+'46e300af-76cd-4694-a42a-fa52331a41e6', 'ndl', 'Nguoi di lam', 'active', '2021-03-30 23:30:18.556309-04', '2021-03-30 23:30:23.591974-04', '81f7c866-86d4-11eb-aa6c-005056be277d');

# 2021-04-05 14:00:22.418409
+\c fiw;

# 2021-04-05 14:02:09.840111
+select s.id, s.name, s.description, s.parent_id, s.organization_id, s.workspace_id, s.project_id,
+rule.action, role.id as rid, role.name as rname, role.description as rdescription, role.organization_id as rorganization_id, role.workspace_id as rworkspace_id
+from  perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = "685d0862-9296-11eb-a554-005056be2b54";
+

# 2021-04-05 14:02:18.334577
+select s.id, s.name, s.description, s.parent_id, s.organization_id, s.workspace_id, s.project_id,
+rule.action, role.id as rid, role.name as rname, role.description as rdescription, role.organization_id as rorganization_id, role.workspace_id as rworkspace_id
+from  perm_scheme as s
+left join rule on rule.perm_scheme_id = s.id
+left join role on rule.role_id = role.id
+where s.id = '685d0862-9296-11eb-a554-005056be2b54';

# 2021-04-05 14:18:15.807161
+select * from scheme where id = '79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:18:23.781601
+select * from perm_scheme where id = '79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:18:27.175445
+\c fiw;

# 2021-04-05 14:18:28.595663
+select * from perm_scheme where id = '79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:18:47.418685
+select * from workspace where id = '79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:29:38.120000
+ select rm.id, rm.scheme_id, rm.role_id,
+ mu.user_id as user_id, mg.group_id as group_id, mf.issuefield_id as field_id, issf.field_type as field_type,
+ role.id as rid, role.name as rname, role.description as rdescription, role.organization_id as rorganization_id, role.workspace_id as rworkspace_id
+ from role_mapping as rm
+ left join mapping_user mu on mu.id = rm.id 
+ left join mapping_group mg on mg.id = rm.id 
+ left join mapping_field mf on mf.id = rm.id 
+ left join issuefield issf on issf.id = mf.issuefield_id 
+ left join role on rm.role_id = role.id
+ where rm.scheme_id='79aef166-92be-11eb-9410-005056be2b54';
+

# 2021-04-05 14:31:21.356379
+select * from mapping_user   where rm.scheme_id='79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:31:29.535006
+select * from mapping_user where cheme_id='79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:31:34.023040
+select * from mapping_user where scheme_id='79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:31:42.708113
+select * from mapping_group where scheme_id='79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:32:08.842207
+select * from mapping_role where scheme_id='79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:32:18.776115
+select * from mapping_field where scheme_id='79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:33:05.600026
+select * from mapping_group where scheme_id='79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:33:17.592709
+delete from mapping_group where scheme_id='79aef166-92be-11eb-9410-005056be2b54';

# 2021-04-05 14:39:37.941100
+\d group;

# 2021-04-05 14:40:00.058289
+\c fiw;

# 2021-04-05 14:40:02.002578
+\d group;

# 2021-04-05 15:00:36.406121
+  ALTER TABLE public.mapping_group DROP CONSTRAINT IF EXISTS group_fk CASCADE;

# 2021-04-05 15:01:12.393654
+ALTER TABLE public.mapping_group ADD CONSTRAINT group_fk FOREIGN KEY (group_id)
+REFERENCES public."group" (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE RESTRICT;
+

# 2021-04-05 15:01:23.873195
+ALTER TABLE public.rule DROP CONSTRAINT IF EXISTS role_fk CASCADE;
+

# 2021-04-05 15:01:36.706541
+ALTER TABLE public.rule ADD CONSTRAINT role_fk FOREIGN KEY (role_id)
+REFERENCES public.role (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE RESTRICT;
+

# 2021-04-05 15:02:18.872849
+\c fiw

# 2021-04-05 15:02:29.865617
+ALTER TABLE public.rule DROP CONSTRAINT IF EXISTS role_fk CASCADE;

# 2021-04-05 15:02:35.471843
+ALTER TABLE public.rule ADD CONSTRAINT role_fk FOREIGN KEY (role_id)
+REFERENCES public.role (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE RESTRICT;

# 2021-04-05 15:02:44.505232
+ALTER TABLE public.mapping_group DROP CONSTRAINT IF EXISTS group_fk CASCADE;

# 2021-04-05 15:02:54.214408
+ALTER TABLE public.mapping_group ADD CONSTRAINT group_fk FOREIGN KEY (group_id)
+REFERENCES public."group" (id) MATCH FULL
+ON DELETE CASCADE ON UPDATE RESTRICT;

# 2021-04-06 14:42:34.070375
+\i ~/a.sql

# 2021-04-06 15:17:05.565666
+\d user;

# 2021-04-06 16:56:58.958432
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter 
+from public.invite_info as info left join public.user usr on usr.id = info.user_id
+where info.user_id = '2d758392-96be-11eb-bd81-0242ac110003' and usr.status != 'archived'

# 2021-04-06 17:26:51.876476
+\c fiw

# 2021-04-06 17:26:55.024208
+\c ems

# 2021-04-06 17:26:59.502639
+select * from public.value;

# 2021-04-06 17:29:24.600415
+\c fiw

# 2021-04-06 17:29:29.013227
+select * from organization;

# 2021-04-07 09:05:40.307795
+\c ems

# 2021-04-07 09:05:47.769087
+select * from public.value;

# 2021-04-07 09:05:54.989434
+\x

# 2021-04-07 09:05:56.093794
+select * from public.value;

# 2021-04-07 09:07:22.901549
+\x

# 2021-04-07 09:07:24.604369
+select * from public.value;

# 2021-04-07 09:08:16.073208
+\x

# 2021-04-07 09:08:16.986439
+select * from public.value;

# 2021-04-07 09:09:07.162906
+\l

# 2021-04-07 09:09:09.028810
+\c ems

# 2021-04-07 09:09:11.481571
+\x

# 2021-04-07 09:09:13.632091
+select * from public.value;

# 2021-04-07 09:16:50.213040
+\c landlord

# 2021-04-07 09:17:00.988293
+\d organization;

# 2021-04-07 09:17:06.187236
+select * from public.organization;

# 2021-04-07 09:17:58.738598
+select * from public.organization where status != 'done';

# 2021-04-07 09:18:05.530974
+select * from public.organization;

# 2021-04-07 09:18:15.862564
+select * from public.organization where init_status != 'done';

# 2021-04-07 09:18:25.827204
+select * from public.organization where init_state != 'done';

# 2021-04-07 09:18:39.192054
+delete from public.organization where init_state != 'done';

# 2021-04-07 10:07:59.178894
+select * from public.organization;

# 2021-04-07 10:14:56.480518
+\c ems

# 2021-04-07 10:15:04.522808
+select * from public.value;

# 2021-04-07 10:15:50.222453
+\c ems

# 2021-04-07 10:15:52.124623
+select * from public.value;

# 2021-04-07 10:24:05.882955
+\c ems

# 2021-04-07 10:24:06.796233
+select * from public.value;

# 2021-04-07 10:24:29.746549
+\d public.value;

# 2021-04-07 10:29:32.872487
+\c ems

# 2021-04-07 10:29:38.790464
+select * from public.value;

# 2021-04-07 10:30:26.293123
+update public.value set content = '<div style="font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;">
+    <p style="text-align: center;">
+      <img src="data:image/png;base64,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"/>
+    </p>
+    <p style="text-align: center;">
+      {{inviter}} from {{orgName}} has invited you to collaborate with them on
+      Luklak. Please use the button bellow to continue:
+    </p>
+    <p style="text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;">
+      <a style="width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;" href="{{acceptUrl}}">ACCEPT INVITE</a>
+    </p>
+    <p style="text-align: center;">
+      <p style="text-align: center;">1. You will be asked to login or signup using personal email account.</p>
+      <p style="text-align: center;">2. If you think this invitation is irrelevant to you, please <a href="{{declineUrl}}">click here</a> to decline.</p>
+      </ol>
+    </p>
+    <hr/>
+    <p>
+      If you cannot click the button above, please use this link to join {{orgName}}:
+      <a href="{{acceptUrl}}">{{acceptUrl}}</a>
+    </p>
+  </div>' where id = '670786d2-92bd-11eb-a062-005056be277d';

# 2021-04-07 10:30:41.032415
+update public.value set content = '<div style="font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;">
+    <p style="text-align: center;">
+      <img src="data:image/png;base64,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"/>
+    </p>
+    <p style="text-align: center;">
+      {{inviter}} from {{orgName}} has invited you to collaborate with them on
+      Luklak. Please use the button bellow to continue:
+    </p>
+    <p style="text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;">
+      <a style="width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;" href="{{acceptUrl}}">ACCEPT INVITE</a>
+    </p>
+    <p style="text-align: center;">
+      <p style="text-align: center;">1. You will be asked to login or signup using personal email account.</p>
+      <p style="text-align: center;">2. If you think this invitation is irrelevant to you, please <a href="{{declineUrl}}">click here</a> to decline.</p>
+      </ol>
+    </p>
+    <hr/>
+    <p>
+      If you cannot click the button above, please use this link to join {{orgName}}:
+      <a href="{{acceptUrl}}">{{acceptUrl}}</a>
+    </p>
+  </div>' where id = '22a88a3e-9751-11eb-91a4-005056be277d';

# 2021-04-07 10:31:29.012814
+update public.value set content = '<div style="font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;">
+    <p style="text-align: center;">
+      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKkAAABDCAYAAADnCiXLAAAABmJLR0QA/wD/AP+gvaeTAAAPWUlEQVR42u1dCZgUxRUGRI14cCjszLAgIorKERZYDgmKQVGD0SCu0RBREcn3xSAgOzO7JMEFAUUDkSBgSAyKBJB4JlEJREFQPpR12enehQXhQzExoNw3uEfe63klj2Zmqnq251qqvq++nq6u49Wrv9579aq6p149FpqN/Owib4HRzeMPDfUGQjO8QWO512+sqJchwVdU3MgbMLv7/OYwoH060u8JGi/Uy6DQKlDi8+UbN3r9oVEwBvO9AaMYfvdNa6JHFJ+dFTQ6+YKhe4DmKR6/+XfAzZOu1Y+V+QLGP6Hyz4EhNRFiWbryJis/dL4nYD7uDZqvAjg3A62Vdvo9AeOtdB5fb7D0ZqBzri9orIXrwUhjgKBNJ5qbBosbA78LgfeLADsGxBOn0e03X3KPSZGBmREgbRkIZcvoT3uQBkJzZH1IN5C2LCy9UoobDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVINUg1SDVIN0roHUgDDGuswRLToNz5RoGVBzDogwn59CzdBCodQHpa1CfED3K/OFJD6Co2r4CzAElkMH2AJzfAFQkVwEOcRn7+sT5uibd9LBkghzwjrAFOsGAi9ZtHjFkgh31FJPVUKA7ZeRk/2mNKWboHUOnEUMPbJ6zDHZpIkhcMfdyqMa+QYNPYDT170jC2/JlEg9Y7dcCnkOSTtd8D4lauSNBNBCtL9TYXyITyKlkkg9QXMR+MG6cn4LRwRHJcIkILk/oe8PGjevCVnpSFIjdJkgRQGYLBC36uyAqFemWaTevzGVBdAStEsdBOkYGb8TGWC+ApKc1y3Sd0AKUqtZIDUOtwdNP4jV33ms5m4cAIp9Ff3QGocb+E3L3cDpNljypvBsx3SMYNJlpCFUyaBFNThLIV+b78kUHFhRoI0YKx0EaQ4WSe7AVJ8S0LeXuhzPMyetiDFU96JBqknUNoDaZECI2jckakuKCiz1VWQBoyS2oIUNNd1kF4tK5flN29LmAvKJZvUTChIi1Y0VFmcoesjk/2k6FqSuJ5eg3pXKZk84ViZPWbNefGCtN3Iz86FtA0K7SxMqJ/UJZCWJRKkuFpVccFgvU7B5iksaY4urUxz5odfnlPQLOB7jRekMDEmKLib9kXl35kC0uyC8nZwf0SaH5zaTge6dYHRNOz0Nzdz+jJlxwna+EjOx7Ib4gEpuJvaK2CjxucPDU/4jpMrIA0a5YkCKfxe5sg35xig37lsNjuRqGkC0oXyyWsOdA7SmvoA0vcVMLYK82YGSBXslnhAGv6OgEPfXFwA/S5uUgVqmoD093LQhQY7BSltOUtdXLF2t84IkIZVmfmNY9+cJLQZvb4JlFsXo04loCYDpNZHM2Ar0jJ54OMf9gg24zz5ZA/d5QikYc21R8EWnZi0AyaugNRvbEwASGvi8s3VDqAiVsiAmgiQthhnZuGhEaj7Q1wIusGjOECqspu1WeVAS7pJ0orUgNRc6hCgJQ7q34Ar/2SBFDYqHor2JZS0A6nfeDmpR/XSGKR7VBgW0YkcKcBhE8j/hoPBWMZ9jIkEKZgsD7gNzrhBqibBq3Bz5YwHKS6c4Pq2gm20RUn1QOhQVH6OygkqPIcqMyPcAilu4aocO0waSEFKgob6WKHu4npFNQ1kwKiSzIhyRZAeqj1IrY+OuQ5S8pEeVVjBjlNVqwpAXaVi58IXAGfL6IJ+9lfg3X2JAmh8IIXVPXzhUGmjAL6CKAPXYYmE+UoRpDK1Wo3bkqkAadgHa05WGIzDuAp2AlSS1KcBtHlR+QWKfJsml/Kh2+WHc0KLFQGHGybLTtkmVViwxgNS9UMlxk609WvjQK/2FKxvo8Ds/0klAnQuVSBFuxDutykMxmInK+nTgWquVgUoSdKRCvbdEwqSdLXCbtqtUUyOKYkCacvCjRfD/a5aHYtU2m3AgZNJQYXdovAHbSPvLGT711+BMyrBe/eD1VTbyS1AZaDih2MdApQWO9cr0LQrq8BoW8sJXh3tDYNEgpSk6SMqmynZ+WbnaCAdoqgmKnx+4zl83wdtCGBuni9Y3pr5OFeo1GO9OpBvDrIcyfAF43AHrFM5VSrla3tUD9LeUVosOnxlBE/6OPG12rwFexVoOojvHkEMQnwQ+e8pMPvF62O2TZSpiQQpLoxwyznu7dHwV3vj86vBoYB72YHlvyTScHcLpCSxj8knk/loso7rKdptEb0HToQEgPsV8dYrvnULwuanNGkrEwpS6ySUea3KeVI4I3B3NFX9RG1BCtJwdCaAlCbUUyp+vub+ck8yQAqAuQz3sGsDUgfvNVXHswtVW5DSkb15Cm19GVEjYaKKTRkLpHjeMFNAGv4DiKj/EcC3S/+cNGnqN8bXCqQFZbnp5oKKgLMWaqaNOSma4X21yktS0UCqfBwuDUAaVrHm3Upvi+aHeiYFpWi3WX9QER9InawLUgVSZW8GaJWoniCy18x4QYoAcvBKQkpBSpPqXVd2RFwD6oqG5NyvjgekeOQN0nanM0jxvK7KKzzoLZHspFivWex0ClLWgYo4GPEpMOJ+2bE6N0GqvIiS7Yi4/UpHwLxJcTX8wen2dmkP3IBxwHe0Uf8FfJqZFJBa0rSsj+IiamDs0z6wj42EoV1GH204qgJSDOgrJBtrm+zrIDAgTyPRbAH2a9q9ihgvGbfBK/LiMbhYea0I76DH9u9aO1F7JLHCqf/TlQUVfJjC+vOu8He29qqA9ORhbPizuOgTHlfzpeF3j8yr2eItKSClcZ6vcp4CXXuObCar87BtiI5ljLgAkRVDIOHeM84Ky7cKUgI76axxHYS70OJ9fqgjXqWHqsEHiw5ywXvQkLdYh5wVxk0HHXTQQQcddNBBBx100EEHHXTQQQcddNBBBx100EGHTAs5OTnX5ObmXq85kQGhW7dub0CsgfhiHenPAOrPt/369Yv4Xn+nTp2awvNDEKt79ux5UR0e22eJF+/HygeT9UbIswfi5ykluHv37u8CEcUQf2LryBbqyNg6MjBjqT8bouVBYCIvgCd/rMsCCPr3b+LFjFj5unbt6sd8cP0olQPXGKUGEgKz5lqR3rlz5/MhrYo6MoCS8Sxn/QwG6YvUnyVnsIKsT7zYSbwYLuHZS5gvZZMWbK/rYIa8SsRiXIDEwLU1XHuIdMhzM828ExD3Q/wDAVZ05HKICyHuJWBvhjIjojEJnn+BKgTy/JzN7HtIrWB6Z5Y+mdLn0f2P4PlyuD9IbW2COEowv0OHDhfA/W4qkwf5F8P1v0RnMfVpPN736NHjMvhdQm1Oxz7BdT6VnS14JOhCO5X4cBTiN/D7aT5pqQ9Y33HsI9R1N+aj8gMiqNJcVncrJr1eoPSNNr59TLQ+AOZKQ+w3xPU0LsdR2qF6ZuMykOrZAbT1gbgG8iyCPjVnYy7edqiP9cL9pxCPQfwS7h+ke8w3MlWSZRojVkTLFoMOPUT3ldTRU/LB81sZI46RNF4BHVvJwR2l3VX0fBIbAJOVu5NAdDHcH0AacDED1wmMhkMEBnGfTwPci6V9RddVeXl5Z8H1CNU/iCbhDnr+FJMwm6h/Abp/lPJgW/vsfBCgwPYF/wioW4l3Vr4uXbq0icCHRizPDQTctmgzi7pQo1G/BlHa1vbt218I1/cYHXuFNsSywKvuVP9vKO0A8cuaoPC8P/2uwklNeWew+nbTRKykCYD86JdKFTiXCHsjimFdTbacFwgdyoA0AhjfhDqEnbiXlV1AeWbGMtpRytkG4IQNcJPofi5KMTYQj6HUQwajdKC0TVTmYcbspQhGmHRZ8PsqNsECcD2MAwq/fyHo6t2793kCNGwSCv5UQdoY5AOqSNbGcKg/m4CF9OVhOZJ0H1Ke/dHMJLSPudoF+p/nvIA2O5KUXkc8Rek8kYHzB8IjQdoF02dRmcWMzt8hD/r06XMhSWBM20Jl+7M+DmO2eQkrf0kqQbqWiJhoS3+PmLJIpOGKmA30HTjAdH8EzQQRhYogFRrJaL+P6lhHA/MJDgqqT8FkspVxEI4gCJAOqnO5zbAfTWW+tkmEL9q1a3cu608e1xZ0NTl4oK5uTEK2IlrXEK0v2+x4wYfb2aCvtvFwBuVZE4P/C6jsk9CmhyRYGcQ3BZ+Brluo7/jv2g2YPfmYjRfLKX0h1V1up53S/8QFE5pSdP+KLd94oZFSakSTKrBmqI3Ar6mDwxi4OorBIXtujgAIMsgeuXS12WIdhCRAk4Dafx7iD6nNdwWDhEkgGE6qmdM5i/Kt5JML6njOlo+bCkcYyG5iee6n9H0EXs6fIYwPOTY+PBNhQYZgKpUtOpjHYQlJuxqaUFMEEIV5RBLPK9pGe9k2ltvo2W9xggqzATVVFME0gZs4uJKPMoGWpQyhaCcx9d0X7TYizsskSi6bqUOEjUNMEVLrS1QjbHBivrRF9qGwkXAgjwPDL4XoE/VB3EWLjsZc3aFUAjV/DtHTlyRPjViEicmFat/G8NeFWQDAuhIXU/YBYCBZzRZWgj98MTeUq3F49jjdH4Rng4FlXWgBViNbdKAtKlQvqWuU7g1YG6XU/jvMj1vNQUZjIaTeMeLl9/lEiiSYoI27uMmBwkFggKS3ML+mpdJX1p4xElfce2kGCqd3lTDcifCplP4hA4lg2Ha4f0vMZi6Bo/jfPmJtz2GDtp+lj2Lpj7H07WQiVDLbtj6pSwGqXjYwbKX00dT+40ya5lCepZQ2m/L8WCxGbKbDM5wP6A2hScUXVVtY/f1iCIomjIccOD1ZXVUIfNb+2+xZCWurWnhVcNJygcK0WFvWVnvKO53Vt4l4WyXowlV+qn2HSxiB5bB4aMZU0JYITv9TQEX25XYOIKFuJCCdKRYIfOUrJCaC3VZHA1LZfIWNE2KUmP2ousVgMcl+is9XqHfSFsdpEOZTmpCuvyQaxwm+2Hh2CpgFUKHuIjQ/0DPCFoOVCETJGGylvGXCtUfgrYm040dejyVM0iGY1nJvihAodnuYbGgsc1Twjdx2f2OeBvSKjIykTVMWsNMY+SoX1QofaLHiw3R8bq8DgNACAa7aJi7CsC771iMyjFRaoyjlcNXcGlfs9mdoBmDZCKBogOkYxcCIBRC11TgKeBrF4oPYWoV8XckUOpsAdgVzqb0u4wXWH4mvgmZh3tgD5kfJGGn7FicmlT3l9W+c+NH6jPXgghF5hFG0z33iOmRgILfVBuY22sFVPtrZmks6pDyAFL0NNzLInj5ALrigXYrVhfB/qjXZvJDBx3oAAAAASUVORK5CYII="/>
+    </p>
+    <p style="text-align: center;">
+      {{inviter}} from {{orgName}} has invited you to collaborate with them on
+      Luklak. Please use the button bellow to continue:
+    </p>
+    <p style="text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;">
+      <a style="width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;" href="{{invitationUrl}}">ACCEPT INVITE</a>
+    </p>
+    <p style="text-align: center;">
+      <p style="text-align: center;">1. You will be asked to login or signup using personal email account.</p>
+      <p style="text-align: center;">2. If you think this invitation is irrelevant to you, please <a href="{{declineUrl}}">click here</a> to decline.</p>
+      </ol>
+    </p>
+    <hr/>
+    <p>
+      If you cannot click the button above, please use this link to join {{orgName}}:
+      <a href="{{invitationUrl}}">{{invitationUrl}}</a>
+    </p>
+  </div>' where id = '22a88a3e-9751-11eb-91a4-005056be277d';

# 2021-04-07 10:31:46.820631
+update public.value set content = '<div style="font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;">
+    <p style="text-align: center;">
+      <img src="data:image/png;base64,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"/>
+    </p>
+    <p style="text-align: center;">
+      {{inviter}} from {{orgName}} has invited you to collaborate with them on
+      Luklak. Please use the button bellow to continue:
+    </p>
+    <p style="text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;">
+      <a style="width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;" href="{{invitationUrl}}">ACCEPT INVITE</a>
+    </p>
+    <p style="text-align: center;">
+      <p style="text-align: center;">1. You will be asked to login or signup using personal email account.</p>
+      <p style="text-align: center;">2. If you think this invitation is irrelevant to you, please <a href="{{declineUrl}}">click here</a> to decline.</p>
+      </ol>
+    </p>
+    <hr/>
+    <p>
+      If you cannot click the button above, please use this link to join {{orgName}}:
+      <a href="{{invitationUrl}}">{{invitationUrl}}</a>
+    </p>
+  </div>' where id = '670786d2-92bd-11eb-a062-005056be277d';

# 2021-04-07 10:32:29.640346
+\c ems

# 2021-04-07 10:32:32.284724
+select * from public.value;

# 2021-04-07 10:33:12.663319
+update public.value set content = '<div style="font-family: Roboto; font-size: 14px; font-weight: 400; width: calc(618px - 2*80px); height: calc(536px - 2*80px); position: relative; margin: 0 auto; border: 1px solid #E8E8E8; padding: 80px; border-radius: 3.14px;">
+    <p style="text-align: center;">
+      <img src="data:image/png;base64,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"/>
+    </p>
+    <p style="text-align: center;">
+      {{inviter}} from {{orgName}} has invited you to collaborate with them on
+      Luklak. Please use the button bellow to continue:
+    </p>
+    <p style="text-align: center; position: relative; background-color:#1976D2; height: 40px; line-height: 37px;">
+      <a style="width: 368px; height: 40px; position: relative;color: white; text-decoration: none; font-weight: bold;" href="{{invitationUrl}}">ACCEPT INVITE</a>
+    </p>
+    <p style="text-align: center;">
+      <p style="text-align: center;">1. You will be asked to login or signup using personal email account.</p>
+      <p style="text-align: center;">2. If you think this invitation is irrelevant to you, please <a href="{{declineUrl}}">click here</a> to decline.</p>
+      </ol>
+    </p>
+    <hr/>
+    <p>
+      If you cannot click the button above, please use this link to join {{orgName}}:
+      <a href="{{invitationUrl}}">{{invitationUrl}}</a>
+    </p>
+  </div>' where id in ('153e5bf8-9143-11eb-97cc-005056be2b54', 'bfc9ec02-920d-11eb-8e10-005056be2b54');

# 2021-04-07 10:33:17.442975
+select * from public.value;

# 2021-04-07 14:44:09.067265
+select * from public.user where username = 'anhphan';

# 2021-04-07 14:45:06.162818
+select * from public.user join invite_info where invite_info.user_id = public.user.id where username = 'anhphan';

# 2021-04-07 14:45:21.510706
+select * from public.user join invite_info where invite_info.user_id = public.user.id where public.user.username = 'anhphan';

# 2021-04-07 14:45:30.374563
+select * from public.user join invite_info on invite_info.user_id = public.user.id where public.user.username = 'anhphan';

# 2021-04-07 14:46:54.228067
+select * from public.user where username = 'anhphan';

# 2021-04-07 14:49:00.117084
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from invite_info as info
+left join public.user usr on usr.id = info.user_id
+where info.user_id =  and usr.status != 'archived';
+

# 2021-04-07 14:49:20.011092
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from invite_info as info
+left join public.user usr on usr.id = info.user_id
+where info.user_id = '313c2920-92bf-11eb-9a03-005056be277d' and usr.status != 'archived';

# 2021-04-07 14:49:34.153995
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from invite_info as info
+left join public.user usr on usr.id = info.user_id
+where user.user_id = '313c2920-92bf-11eb-9a03-005056be277d' and usr.status != 'archived';

# 2021-04-07 14:49:39.225437
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from invite_info as info
+left join public.user usr on usr.id = info.user_id
+where usr.user_id = '313c2920-92bf-11eb-9a03-005056be277d' and usr.status != 'archived';

# 2021-04-07 14:50:23.460809
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from public.user as usr
+left join invite_info info on usr.id = info.user_id
+where usr.user_id = '313c2920-92bf-11eb-9a03-005056be277d' and usr.status != 'archived';

# 2021-04-07 14:50:34.144550
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from public.user as usr
+left join invite_info info on usr.id = info.user_id
+where usr.id = '313c2920-92bf-11eb-9a03-005056be277d' and usr.status != 'archived';

# 2021-04-07 15:27:25.374321
+\d perm_scheme;

# 2021-04-07 15:53:18.757965
+select * from public.user limit 1;

# 2021-04-07 15:53:23.671466
+select * from public.user;

# 2021-04-07 15:53:37.393658
+\x

# 2021-04-07 15:53:38.748462
+select * from public.user;

# 2021-04-07 15:54:17.749214
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from invite_info as info
+left join public.user usr on usr.id = info.user_id
+where usr.user_id = '313c2920-92bf-11eb-9a03-005056be277d' and usr.status != 'archived';

# 2021-04-07 15:54:35.569883
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from public.user as usr
+left join invite_info info on usr.id = info.user_id
+where usr.id = '313c2920-92bf-11eb-9a03-005056be277d' and usr.status != 'archived';

# 2021-04-07 15:55:04.515596
+select usr.*, info.issue_id as info_start_issue_id, info.inviter as inviter
+from public.user as usr
+left join invite_info info on usr.id = info.user_id
+where usr.id = '83f056b6-977c-11eb-a5fb-005056be277d' and usr.status != 'archived';

# 2021-04-07 16:33:28.937149
+\d public.user;

# 2021-04-07 16:48:58.559618
+\d

# 2021-04-07 16:49:04.385863
+\d user;

# 2021-04-07 16:49:18.740949
+\d

# 2021-04-07 16:50:03.170992
+create table abc(
+id int,
+name varchar,
+status varchar);

# 2021-04-07 16:50:42.220669
+insert into abc (id, name, status) values
+(1, 'a', 'x'),
+(2, 'b', 'x');

# 2021-04-07 16:51:20.639114
+create unique index abc_uq on abc (name) where status = 'x';

# 2021-04-07 16:51:27.913896
+\d 

# 2021-04-07 16:51:34.946018
+\d+ abc;

# 2021-04-07 16:52:05.912751
+insert into abc (id, name, status) values
+(3, 'c', 'x');

# 2021-04-07 16:52:14.244567
+select * from abc;

# 2021-04-07 16:52:22.010808
+insert into abc (id, name, status) values
+(4, 'c', 'x');

# 2021-04-07 16:52:32.835791
+insert into abc (id, name, status) values
+(4, 'c', null);

# 2021-04-07 16:52:48.764286
+insert into abc (id, name, status) values
+(4, 'd', 'y');

# 2021-04-07 16:52:52.768075
+select * from abc;

# 2021-04-07 16:53:03.369253
+insert into abc (id, name, status) values
+(4, 'd', 'x');

# 2021-04-07 16:53:10.237445
+select * from abc;

# 2021-04-07 16:53:43.103988
+insert into abc (id, name, status) values
+(5, 'd', 'x');

# 2021-04-07 16:53:49.384508
+insert into abc (id, name, status) values
+(5, 'd', null);

# 2021-04-07 16:53:53.194156
+select * from abc;

# 2021-04-07 16:56:04.711022
+update abc set status = 'x' where id = 5;

# 2021-04-07 16:58:59.643091
+drop table abc;

# 2021-04-07 16:59:52.685789
+create table abc(
+id int,
+name varchar,
+orgId int);

# 2021-04-07 17:00:57.387073
+create unique index abc_uq on abc (name) where orgId is null;

# 2021-04-07 17:02:49.666322
+ALTER TABLE public."user"
+	ADD CONSTRAINT user_whoruId_organizationId_uq
+	UNIQUE (organization_id,whoru_id)FROM;

# 2021-04-07 17:02:58.660730
+\d+ abc;

# 2021-04-07 17:14:04.475296
+select * from abc;

# 2021-04-07 17:14:08.544357
+\d+ abc;

# 2021-04-07 17:14:43.426668
+ALTER TABLE abc ADD CONSTRAINT user_whoruId_organizationId_uq
+	UNIQUE (name, orgId);

# 2021-04-07 17:14:52.444345
+select * from abc;

# 2021-04-07 17:14:54.771177
+\d+ abc;

# 2021-04-07 17:15:40.217587
+insert into abc (id, name, orgid) values
+(1, 'a', null),
+(2, 'b', null);

# 2021-04-07 17:15:43.599763
+select * from abc;

# 2021-04-07 17:16:03.211234
+insert into abc (id, name, orgid) values
+(3, 'a', 1);

# 2021-04-07 17:16:09.260640
+select * from abc;

# 2021-04-07 17:22:03.959238
+ALTER TABLE public.perm_scheme
+ADD CONSTRAINT permScheme_name_organizationId_uq
+UNIQUE (organization_id,name);
+

# 2021-04-07 17:22:13.767379
+ALTER TABLE public.notify_scheme
+ADD CONSTRAINT notifyScheme_name_organizationId_uq
+UNIQUE (organization_id,name);
+

# 2021-04-07 17:22:24.779464
+\c fiw

# 2021-04-07 17:22:26.198964
+ALTER TABLE public.notify_scheme
+ADD CONSTRAINT notifyScheme_name_organizationId_uq
+UNIQUE (organization_id,name);
+

# 2021-04-07 17:22:32.536931
+ALTER TABLE public.perm_scheme
+ADD CONSTRAINT permScheme_name_organizationId_uq
+UNIQUE (organization_id,name);
+

# 2021-04-07 17:22:47.414651
+select * from perm_scheme;

# 2021-04-07 17:24:12.436498
+select * from perm_scheme where name = '';

# 2021-04-07 17:25:09.736293
+select * from perm_scheme as ps join public.template tp on tp.id = ps.template_id where tp.name = '';

# 2021-04-07 17:25:15.023384
+select * from perm_scheme as ps join public.template tp on tp.id = ps.template_id where ps.name = '';

# 2021-04-07 17:26:59.022717
+select * from perm_scheme where name = '';

# 2021-04-07 17:27:11.905049
+update perm_scheme set name = null where name = '';

# 2021-04-07 17:27:16.432312
+ALTER TABLE public.perm_scheme
+ADD CONSTRAINT permScheme_name_organizationId_uq
+UNIQUE (organization_id,name);
+

# 2021-04-07 17:27:45.100451
+\d+ public.user;

# 2021-04-07 17:45:30.366817
+alter table public.user drop index user_whoruid_organizationid_uq;

# 2021-04-07 17:45:40.073659
+alter table public.user drop constraint user_whoruid_organizationid_uq;

# 2021-04-07 17:45:58.741252
+CREATE UNIQUE INDEX "user_organizationId_whoruId_uq" ON public."user"
+	USING btree
+	(
+	  organization_id,
+	  whoru_id
+	)
+	WHERE (status = 'active');

# 2021-04-08 10:59:35.079561
+\c whoru

# 2021-04-08 10:59:36.977356
+\d

# 2021-04-08 10:59:45.350738
+select * from session where id = '48f481ca-981e-11eb-85c1-005056be2b54';

# 2021-04-08 13:36:06.363018
+\c fiw

# 2021-04-08 13:36:10.985093
+\d+ invite_info

# 2021-04-08 13:36:22.167479
+\i ~/a.sql

# 2021-04-08 13:36:26.341101
+\d+ invite_info

# 2021-04-08 13:37:46.627590
+\d+ perm_scheme;

# 2021-04-08 13:38:29.099091
+\d+ notify_scheme;

# 2021-04-08 13:44:34.996179
+\d+ public.screen;

# 2021-04-08 13:50:07.678848
+\i ~/a.sql

# 2021-04-08 14:11:48.343924
+\d+ public.user;

# 2021-04-08 14:38:52.609159
+select * from public.user;

# 2021-04-08 14:40:11.444598
+select * from organization;

# 2021-04-08 14:55:24.211953
+\d+ public.user;

# 2021-04-08 14:55:29.183149
+\d+ public.group;

# 2021-04-08 15:33:50.305336
+select * from public.fileserver;

# 2021-04-08 17:59:17.940534
+select * from organization;

# 2021-04-09 10:19:13.449650
+\c whoru

# 2021-04-09 10:19:18.085004
+select * from public.user;

# 2021-04-09 10:20:21.210620
+\c fiw

# 2021-04-09 10:20:28.995502
+select * from public.user;

# 2021-04-09 10:21:01.218627
+select * from public.user where username = 'linh3'
+;

# 2021-04-09 10:21:18.261439
+select * from public.user where id = '4689216c-92cd-11eb-90c5-005056be2b54';

# 2021-04-09 10:21:57.077895
+select * from public.user join email on "user".email_id = email.id where id = '4689216c-92cd-11eb-90c5-005056be2b54';

# 2021-04-09 10:22:19.004083
+select * from public.user join email on public.user.email_id = email.id where id = '4689216c-92cd-11eb-90c5-005056be2b54';

# 2021-04-09 10:22:37.917929
+select * from public.user as u join email on u.email_id = email.id where u.id = '4689216c-92cd-11eb-90c5-005056be2b54';

# 2021-04-09 10:22:45.525572
+\c whoru

# 2021-04-09 10:22:47.030079
+select * from public.user as u join email on u.email_id = email.id where u.id = '4689216c-92cd-11eb-90c5-005056be2b54';

# 2021-04-09 15:22:24.505992
+select * from scheme;

# 2021-04-09 15:22:47.940220
+select * from rule;

# 2021-04-09 15:27:09.338384
+select * from role_mapping;

# 2021-04-09 15:27:34.382209
+select * from role_mapping where scheme_id = '4177bc88-990d-11eb-970f-0242ac110003';

# 2021-04-09 15:28:08.741493
+select * from user_mapping where scheme_id = '4177bc88-990d-11eb-970f-0242ac110003';

# 2021-04-09 15:28:23.861715
+select * from mapping_user where scheme_id = '4177bc88-990d-11eb-970f-0242ac110003';

# 2021-04-09 15:28:41.344889
+select * from mapping_role where scheme_id = '4177bc88-990d-11eb-970f-0242ac110003';

# 2021-04-09 15:29:13.185070
+select * from rule where scheme_id = '4177bc88-990d-11eb-970f-0242ac110003';

# 2021-04-09 15:29:18.347392
+select * from rule;

# 2021-04-09 15:29:32.609226
+\d+ rule;

# 2021-04-09 15:30:39.231557
+select * from rule where scheme_id = '4177bc88-990d-11eb-970f-0242ac110003';

# 2021-04-09 15:30:51.651199
+select * from rule where perm_scheme_id = '4177bc88-990d-11eb-970f-0242ac110003';

# 2021-04-09 15:32:43.018560
+DELETE FROM public.rule  WHERE perm_scheme_id='4177bc88-990d-11eb-970f-0242ac110003' and action=ANY('att.create')

# 2021-04-09 15:36:46.462226
+select * from rule;

# 2021-04-09 15:38:49.726826
+DELETE FROM public.rule  WHERE perm_scheme_id='d8c5ec4e-990e-11eb-a20f-0242ac110006' and action=ANY('att.create')

# 2021-04-09 15:39:41.999236
+DELETE FROM public.rule  WHERE perm_scheme_id='d8c5ec4e-990e-11eb-a20f-0242ac110006' and action in ('att.create');

# 2021-04-09 15:39:45.056446
+select * from rule;

# 2021-04-09 15:45:02.081549
+DELETE FROM public.rule  WHERE perm_scheme_id='d8c5ec4e-990e-11eb-a20f-0242ac110006' and action in ('att.create');

# 2021-04-09 15:46:11.999346
+select * FROM public.rule  WHERE perm_scheme_id='f5ada648-990f-11eb-91f4-0242ac110004' and action in ('att.create');

# 2021-04-09 15:49:34.917175
+select * from rule where perm_scheme_id = '74ab1a5c-9910-11eb-b45d-0242ac110003';

# 2021-04-09 15:49:52.183165
+select * from rule;

# 2021-04-09 15:50:04.086684
+select * from rule where action = 'att.create';
